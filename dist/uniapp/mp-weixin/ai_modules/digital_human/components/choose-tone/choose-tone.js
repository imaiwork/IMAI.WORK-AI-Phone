"use strict";const e=require("../../../../common/vendor.js"),o=require("../../../../common/assets.js"),t=require("../../../../api/digital_human.js"),s=require("../../../../stores/app.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../router/index.js"),require("../../../../utils/util.js"),require("../../../../stores/navigationBarTitle.js"),require("../../../../config/index.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),!Array){(e.resolveComponent("empty")+e.resolveComponent("z-paging")+e.resolveComponent("popup-bottom"))()}Math||((()=>"../../../../components/empty/empty.js")+(()=>"../../../../node-modules/z-paging/components/z-paging/z-paging.js")+(()=>"../../../../components/popup-bottom/popup-bottom.js"))();const i=e.defineComponent({__name:"choose-tone",props:{modelValue:{type:Boolean,default:!1},modelVersion:{type:[String,Number],default:""},activeTone:{type:[String,Number],default:""},showOriginalTone:{type:Boolean,default:!1},showFreeTone:{type:Boolean,default:!0}},emits:["update:modelValue","confirm"],setup(i,{emit:r}){const n=i,a=e.computed({get:()=>n.modelValue,set(e){r("update:modelValue",e)}}),u=s.useAppStore(),l=e.computed((()=>{var e;const o=[...((null==(e=u.getDigitalHumanConfig)?void 0:e.voice)||[]).filter((e=>"1"==e.status)).map((e=>({...e,voice_id:e.code,type:0})))];return n.showOriginalTone&&o.unshift({voice_id:-1,name:"视频原音",type:1}),o})),p=e.shallowRef(),m=e.ref([]),c=e.reactive({name:"",model_version:n.modelVersion,status:1,builtin:1}),d=async(e,o)=>{var s,i;try{const{lists:i}=await t.getVoiceList({page_no:e,page_size:o,...c});null==(s=p.value)||s.complete(i)}catch(r){null==(i=p.value)||i.complete([])}},f=(e,o)=>{r("confirm",{...e,type:o})};return e.watch((()=>n.modelValue),(async o=>{var t;c.model_version=n.modelVersion,await e.nextTick$1(),null==(t=p.value)||t.reload()})),(t,s)=>e.e({a:o._imports_0$6,b:`/ai_modules/digital_human/pages/tone_clone/tone_clone?model_version=${i.modelVersion}`,c:i.showFreeTone},i.showFreeTone?{d:e.f(e.unref(l),((o,t,s)=>({a:e.t(o.name),b:e.t(-1===o.voice_id?"当前视频":"免费"),c:i.activeTone==o.voice_id?1:"",d:t,e:e.o((e=>f(o,o.type)),t)}))),e:o._imports_1$27}:{},{f:e.f(e.unref(m),((o,t,s)=>({a:e.t(o.name),b:i.activeTone==o.voice_id?1:"",c:t,d:e.o((e=>f(o,1)),t)}))),g:o._imports_2$10,h:e.sr(p,"483c1fe4-1,483c1fe4-0",{k:"pagingRef"}),i:e.o(d),j:e.o((o=>e.isRef(m)?m.value=o:null)),k:e.p({fixed:!1,auto:!1,"safe-area-inset-bottom":!0,modelValue:e.unref(m)}),l:e.o((o=>e.isRef(a)?a.value=o:null)),m:e.p({title:"请选择音色","custom-class":"bg-_hF9FAFB_","is-disabled-touch":!0,modelValue:e.unref(a)})})}});wx.createComponent(i);
