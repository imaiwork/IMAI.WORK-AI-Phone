"use strict";const e=require("../../../../common/vendor.js"),t=require("../../../../api/app.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../router/index.js"),require("../../../../utils/util.js"),require("../../../../stores/navigationBarTitle.js"),require("../../../../stores/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),require("../../../../config/index.js"),!Array){(e.resolveComponent("empty")+e.resolveComponent("z-paging")+e.resolveComponent("popup-bottom"))()}Math||((()=>"../../../../components/empty/empty.js")+(()=>"../../../../node-modules/z-paging/components/z-paging/z-paging.js")+(()=>"../../../../components/popup-bottom/popup-bottom.js"))();const s=e.defineComponent({__name:"choose-history",props:{modelValue:{type:Boolean},type:null},emits:["update:modelValue","select"],setup(s,{emit:u}){const r=s,o=e.computed({get:()=>r.modelValue,set:e=>{u("update:modelValue",e)}}),n=e.ref([]),a=e.ref(null),l=e.ref([]),i=async(e,s)=>{var u;try{const{lists:o}=await t.getVideoCreationRecord({page_no:e,page_size:s,type:r.type});null==(u=a.value)||u.complete(o.filter((e=>3==e.status)))}catch(o){console.error("查询历史记录失败:",o)}},p=e=>l.value.some((t=>t.id===e.id)),c=()=>{l.value.length==n.value.length?l.value=[]:l.value=n.value},m=()=>{0!=l.value.length?(o.value=!1,u("select",l.value),l.value=[]):e.index.$u.toast("至少选择一个视频")};return e.watch(o,(async()=>{var t;o.value&&(await e.nextTick$1(),null==(t=a.value)||t.reload())})),(t,s)=>e.e({a:e.t(e.unref(l).length),b:e.f(e.unref(n),((t,s,u)=>e.e({a:t.pic,b:p(t)},(p(t),{}),{c:s,d:e.o((e=>{var s;p(s=t)?l.value=l.value.filter((e=>e.id!==s.id)):l.value.push(s)}),s)}))),c:e.sr(a,"7adcb792-1,7adcb792-0",{k:"pagingRef"}),d:e.o(i),e:e.o((t=>e.isRef(n)?n.value=t:null)),f:e.p({auto:!1,fixed:!1,"safe-area-inset-bottom":!0,modelValue:e.unref(n)}),g:e.unref(l).length>0&&e.unref(l).length==e.unref(n).length},(e.unref(l).length>0&&(e.unref(l).length,e.unref(n).length),{}),{h:e.o(c),i:e.o(m),j:e.o((t=>e.isRef(o)?o.value=t:null)),k:e.p({title:"创作历史","show-close-btn":!0,height:"80%","is-disabled-touch":!0,"custom-class":"bg-_hF9FAFB_",show:e.unref(o)})})}});wx.createComponent(s);
