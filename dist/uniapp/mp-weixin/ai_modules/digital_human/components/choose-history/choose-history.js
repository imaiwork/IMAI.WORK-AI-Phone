"use strict";const e=require("../../../../common/vendor.js"),t=require("../../../../api/app.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../router/index.js"),require("../../../../utils/util.js"),require("../../../../stores/navigationBarTitle.js"),require("../../../../stores/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),require("../../../../config/index.js"),!Array){(e.resolveComponent("empty")+e.resolveComponent("z-paging")+e.resolveComponent("popup-bottom"))()}Math||((()=>"../../../../components/empty/empty.js")+(()=>"../../../../node-modules/z-paging/components/z-paging/z-paging.js")+(()=>"../../../../components/popup-bottom/popup-bottom.js"))();const u=e.defineComponent({__name:"choose-history",props:{modelValue:{type:Boolean},type:null},emits:["update:modelValue","select"],setup(u,{emit:s}){const r=u,o=e.computed({get:()=>r.modelValue,set:e=>{s("update:modelValue",e)}}),a=e.ref([]),n=e.ref(null),l=e.ref([]),i=async(e,u)=>{var s;try{const{lists:o}=await t.getVideoCreationRecord({page_no:e,page_size:u,type:r.type});null==(s=n.value)||s.complete(o.filter((e=>3==e.status)))}catch(o){console.error("查询历史记录失败:",o)}},p=e=>l.value.some((t=>t.id===e.id)),c=()=>{l.value.length==a.value.length?l.value=[]:l.value=a.value},m=()=>{0!=l.value.length?(o.value=!1,s("select",l.value),l.value=[]):e.index.$u.toast("至少选择一个视频")};return e.watch(o,(async()=>{var t;o.value&&(await e.nextTick$1(),null==(t=n.value)||t.reload())})),(t,u)=>e.e({a:e.t(e.unref(l).length),b:e.f(e.unref(a),((t,u,s)=>e.e({a:t.pic,b:p(t)},(p(t),{}),{c:u,d:e.o((e=>{var u;p(u=t)?l.value=l.value.filter((e=>e.id!==u.id)):l.value.push(u)}),u)}))),c:e.sr(n,"7adcb792-1,7adcb792-0",{k:"pagingRef"}),d:e.o(i),e:e.o((t=>e.isRef(a)?a.value=t:null)),f:e.p({auto:!1,fixed:!1,"safe-area-inset-bottom":!0,modelValue:e.unref(a)}),g:e.unref(l).length>0&&e.unref(l).length==e.unref(a).length},(e.unref(l).length>0&&(e.unref(l).length,e.unref(a).length),{}),{h:e.o(c),i:e.o(m),j:e.o((t=>e.isRef(o)?o.value=t:null)),k:e.p({title:"创作历史",height:"80%","is-disabled-touch":!0,"custom-class":"bg-_hF9FAFB_",modelValue:e.unref(o)})})}});wx.createComponent(u);
