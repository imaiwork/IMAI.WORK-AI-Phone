"use strict";const e=require("../../../../common/vendor.js"),n=require("../../../../common/assets.js"),i=require("../../../../api/digital_human.js"),u=require("../../../../hooks/useAudio.js"),a=require("../../enums/index.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../router/index.js"),require("../../../../utils/util.js"),require("../../../../stores/navigationBarTitle.js"),require("../../../../stores/app.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),require("../../../../config/index.js"),!Array){(e.resolveComponent("u-navbar")+e.resolveComponent("u-tabs")+e.resolveComponent("u-icon")+e.resolveComponent("empty")+e.resolveComponent("z-paging"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-navbar/u-navbar.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-tabs/u-tabs.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+r+(()=>"../../../../components/empty/empty.js")+(()=>"../../../../node-modules/z-paging/components/z-paging/z-paging.js")+o)();const r=()=>"../../components/video-item/video-item.js",o=()=>"../../../../components/video-preview/video-preview.js",s=e.defineComponent({__name:"clone_manage",setup(r){const o=[{name:"形象克隆"},{name:"声音克隆"}],s=e.ref(0),t=e.ref([]),l=e.ref([]),d=e.ref(0),{isPlaying:c,play:m,pause:v,pauseAll:f,destroy:p}=u.useAudio(),g=e.shallowRef(),h=async(e,n)=>{var u,r;try{const r=`${a.DigitalHumanModelVersionEnum.CHANJING},${a.DigitalHumanModelVersionEnum.STANDARD},${a.DigitalHumanModelVersionEnum.SHANJIAN}`,{lists:o,count:t}=0==s.value?await i.getAnchorList({page_no:e,page_size:n,type:0,model_version:r}):await i.getVoiceList({page_no:e,page_size:n,builtin:1,model_version:r});d.value=t,null==(u=g.value)||u.complete(o)}catch(o){null==(r=g.value)||r.complete([])}},_=e=>{var n;s.value=e,l.value=[],null==(n=g.value)||n.reload(),1==s.value&&(f(),p())},j=e.ref(""),q=e.ref(!1),w=e=>{j.value=e,q.value=!0},x=e.ref(null),k=e=>{l.value.includes(e)?l.value=l.value.filter((n=>n!==e)):l.value.push(e)},y=e.ref(!1),b=()=>{y.value=!y.value,l.value=[]},A=()=>{l.value.length===t.value.length?l.value=[]:l.value=t.value.map((e=>e.id))},z=async n=>{var u;e.index.showLoading({title:"重试中...",mask:!0});try{await i.retryAnchor({anchor_id:n}),e.index.hideLoading(),null==(u=g.value)||u.reload(),e.index.showToast({title:"重试成功",icon:"none",duration:3e3})}catch(a){e.index.hideLoading(),e.index.showToast({title:a||"重试失败",icon:"none",duration:3e3})}},L=n=>{e.index.showModal({title:"提示",content:"确定要删除吗？",success:async u=>{var a;if(u.confirm){e.index.showLoading({title:"删除中...",mask:!0});try{0==s.value?await i.deleteAnchor({id:n||l.value}):await i.deleteVoice({id:n||l.value}),null==(a=g.value)||a.reload(),e.index.hideLoading(),e.index.showToast({title:"删除成功",icon:"none",duration:3e3})}catch(r){e.index.hideLoading(),e.index.showToast({title:r||"删除失败",icon:"none",duration:3e3})}}y.value=!1,l.value=[]}})};return e.onUnload((()=>{p()})),(i,u)=>e.e({a:e.p({"border-bottom":!1,"is-fixed":!1,background:{background:"transparent"},title:"我的克隆","title-bold":!0}),b:e.o(_),c:e.p({list:o,"is-scroll":!1,current:e.unref(s),"bg-color":""}),d:e.t(e.unref(d)),e:0==e.unref(s)},0==e.unref(s)?{f:e.f(e.unref(t),((n,i,u)=>e.e(e.unref(y)?e.e({a:e.unref(l).includes(n.id)},e.unref(l).includes(n.id)?{b:"3ad1ea84-3-"+u+",3ad1ea84-2",c:e.p({name:"checkmark",color:"#fff",size:20})}:{},{d:e.unref(l).includes(n.id)?1:"",e:e.o((e=>k(n.id)),i)}):{},{f:e.o(z,i),g:e.o(L,i),h:e.o(w,i),i:"3ad1ea84-4-"+u+",3ad1ea84-2",j:e.p({item:{id:n.id,name:n.name,pic:n.pic,status:n.status,video_url:n.url,model_version:n.model_version,remark:n.remark},"show-play":!1,"show-more":!e.unref(y)}),k:i}))),g:e.unref(y)}:{},{h:1==e.unref(s)},1==e.unref(s)?{i:e.f(e.unref(t),((i,u,a)=>e.e({a:e.t(i.name),b:e.t(i.create_time),c:1==i.status},1==i.status?e.e({d:e.unref(c)&&e.unref(x)==i.id},e.unref(c)&&e.unref(x)==i.id?{e:n._imports_1$5}:{f:n._imports_2$2},{g:e.t(e.unref(c)&&e.unref(x)==i.id?"暂停":"试听"),h:e.o((e=>(async e=>{c.value&&x.value!==e.id&&f(),c.value?v():(m(e.voice_urls),x.value=e.id)})(i)),u)}):2===i.status?{j:n._imports_3$4}:[0,3,4,5].includes(i.status)?{l:n._imports_4$4}:{},{i:2===i.status,k:[0,3,4,5].includes(i.status)},e.unref(y)?e.e({m:e.unref(l).includes(i.id)},e.unref(l).includes(i.id)?{n:"3ad1ea84-5-"+a+",3ad1ea84-2",o:e.p({name:"checkmark",color:"#fff",size:20})}:{},{p:e.unref(l).includes(i.id)?1:"",q:e.o((e=>k(i.id)),u)}):{},{r:u}))),j:n._imports_0$7,k:e.unref(y)}:{},{l:e.sr(g,"3ad1ea84-2",{k:"pagingRef"}),m:e.o(h),n:e.o((n=>e.isRef(t)?t.value=n:null)),o:e.p({fixed:!1,"safe-area-inset-bottom":!0,modelValue:e.unref(t)}),p:e.unref(t).length>0},e.unref(t).length>0?e.e({q:e.t(e.unref(y)?"取消":"管理"),r:e.o(b),s:e.unref(y)},e.unref(y)?{t:e.o(A)}:{},{v:e.unref(y)},e.unref(y)?{w:e.t(e.unref(l).length),x:e.o((e=>L()))}:{}):{},{y:e.o((e=>q.value=!1)),z:e.o((n=>e.isRef(q)?q.value=n:null)),A:e.p({title:"视频预览","video-url":e.unref(j),modelValue:e.unref(q)})})}}),t=e._export_sfc(s,[["__scopeId","data-v-3ad1ea84"]]);wx.createPage(t);
