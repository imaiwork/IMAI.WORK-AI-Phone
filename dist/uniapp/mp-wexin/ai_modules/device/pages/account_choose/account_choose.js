"use strict";const e=require("../../../../common/vendor.js"),u=require("../../../../api/device.js"),a=require("../../../../enums/appEnums.js"),r=require("../../enums/index.js"),n=require("../../hooks/useDevice.js"),s=require("../../../../hooks/useEventBusManager.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../router/index.js"),require("../../../../utils/util.js"),require("../../../../stores/navigationBarTitle.js"),require("../../../../stores/app.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),require("../../../../config/index.js"),require("../../../../common/assets.js"),!Array){(e.resolveComponent("u-icon")+e.resolveComponent("empty")+e.resolveComponent("z-paging")+e.resolveComponent("u-button"))()}Math||((()=>"../../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+(()=>"../../../../components/empty/empty.js")+(()=>"../../../../node-modules/z-paging/components/z-paging/z-paging.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-button/u-button.js"))();const i=e.defineComponent({__name:"account_choose",setup(i){const{emit:o}=s.useEventBusManager(),t=e.ref([]),l=e.ref(1),{platformLogo:p}=n.useDevice(),c=e.ref([{value:0,label:"全部"},{value:a.AppTypeEnum.SPH,label:"微信",icon:p[a.AppTypeEnum.SPH].activeIcon},{value:a.AppTypeEnum.XHS,label:"小红书",icon:p[a.AppTypeEnum.XHS].activeIcon},{value:a.AppTypeEnum.DOUYIN,label:"抖音",icon:p[a.AppTypeEnum.DOUYIN].activeIcon},{value:5,label:"快手",icon:p[a.AppTypeEnum.KUAISHOU].activeIcon}]),v=e.ref(),m=e.ref([]),d=e.shallowRef(),f=e.ref([]),j=async(e,a)=>{var r,n;try{const{lists:n}=await u.getPublishAccountList({page_no:e,page_size:a,type:0===v.value?"":v.value});null==(r=d.value)||r.complete(n)}catch(s){null==(n=d.value)||n.complete([])}},q=e=>f.value.some((u=>u.id===e.id)),g=()=>{o("confirm",{type:r.ListenerTypeEnum.CHOOSE_ACCOUNT,data:f.value}),e.index.navigateBack()};return e.onLoad((e=>{e.accounts&&(f.value=JSON.parse(e.accounts)),e.platformTypes&&(t.value=JSON.parse(e.platformTypes)),e.multiple&&(l.value=parseInt(e.multiple))})),e.onMounted((()=>{var e,u;v.value=(null==(e=(0===t.value.length||(c.value=c.value.filter((e=>t.value.includes(e.value)))),c.value)[0])?void 0:e.value)||0,null==(u=d.value)||u.reload()})),(u,a)=>({a:e.f(e.unref(c),((u,a,r)=>({a:e.t(u.label),b:u.value,c:u.value===e.unref(v)?1:"",d:e.o((e=>(e=>{var u;v.value=e.value,null==(u=d.value)||u.reload()})(u)),u.value)}))),b:e.f(e.unref(m),((u,a,r)=>{return e.e({a:u.avatar,b:(n=u.type,null==(s=c.value.find((e=>e.value===parseInt(n))))?void 0:s.icon),c:e.t(u.nickname),d:e.t(u.device_name),e:q(u)},q(u)?{f:"32826804-1-"+r+",32826804-0",g:e.p({name:"checkmark",color:"#ffffff",size:"20"})}:{},{h:e.n(q(u)?"bg-primary flex items-center justify-center":"border border-solid border-_h00000033_"),i:a,j:q(u)?1:"",k:e.o((e=>(e=>{0!==l.value?q(e)?f.value=f.value.filter((u=>u.id!==e.id)):f.value.push(e):f.value=[e]})(u)),a)});var n,s})),c:e.sr(d,"32826804-0",{k:"pagingRef"}),d:e.o(j),e:e.o((u=>e.isRef(m)?m.value=u:null)),f:e.p({fixed:!1,auto:!1,"safe-area-inset-bottom":!0,modelValue:e.unref(m)}),g:e.o(g),h:e.p({type:"primary","custom-style":{height:"100rpx",borderRadius:"20rpx",fontWeight:"bold"}})})}});wx.createPage(i);
