"use strict";const e=require("../../../../common/vendor.js"),t=require("../../../../api/device.js"),n=require("../../../../enums/appEnums.js"),u=require("../../enums/index.js"),s=require("../../../../hooks/useEventBusManager.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../router/index.js"),require("../../../../utils/util.js"),require("../../../../stores/navigationBarTitle.js"),require("../../../../stores/app.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),require("../../../../config/index.js"),!Array){(e.resolveComponent("u-button")+e.resolveComponent("confirm-dialog"))()}Math||(i+(()=>"../../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../../components/confirm-dialog/confirm-dialog.js"))();const i=()=>"../../components/bast-setting-v2/bast-setting-v2.js",r=e.defineComponent({__name:"create_account_building",setup(i){const{on:r}=s.useEventBusManager(),o=e.reactive({name:`自动养号任务${e.index.$u.timeFormat(new Date,"yyyymmddhhMM")}`,accounts:[],task_frep:1,time_config:["09:00","09:30"],custom_date:[]}),a=e.ref(0),c=e.ref(""),m=e.ref(!1),p=()=>{e.index.$u.route({url:"/pages/phone/phone",type:"reLaunch"}),m.value=!1},l=async()=>{if(o.name)if(o.accounts.length)if(5!==a.value||o.custom_date.length)if(o.time_config[0]&&o.time_config[1]){e.index.showLoading({title:"创建中...",mask:!0});try{await t.addGrowthAccountTask({task_name:o.name,accounts:o.accounts,task_frep:o.task_frep,time_config:[`${o.time_config[0]}-${o.time_config[1]}`],custom_date:o.custom_date}),e.index.hideLoading(),m.value=!0}catch(n){c.value=n,e.index.hideLoading(),e.index.showToast({title:n||"创建失败",icon:"none",duration:3e3})}}else e.index.$u.toast("请选择任务时间");else e.index.$u.toast("请选择任务日期");else e.index.$u.toast("请选择发布账号");else e.index.$u.toast("请输入任务名称")};return e.onLoad(()=>{r("confirm",e=>{const{type:t,data:n}=e;if(t===u.ListenerTypeEnum.CHOOSE_ACCOUNT){if(0===n.length)return;o.accounts=n.map(e=>({id:e.id,account:e.account,type:e.type}))}if(t===u.ListenerTypeEnum.CHOOSE_DATE){if(0===n.length)return;o.custom_date=n,a.value=5}})}),(t,u)=>e.e({a:e.o(e=>a.value=e),b:e.o(t=>e.isRef(o)?o.value=t:null),c:e.p({"show-device":!1,"show-accounts":!0,"current-frequency":e.unref(a),"platform-types":[e.unref(n.AppTypeEnum).XHS,e.unref(n.AppTypeEnum).DOUYIN,e.unref(n.AppTypeEnum).KUAISHOU],multiple:0,modelValue:e.unref(o)}),d:e.unref(c)},e.unref(c)?{e:e.t(e.unref(c))}:{},{f:e.o(l),g:e.p({type:"primary","custom-style":{height:"100rpx",borderRadius:"20rpx",fontWeight:"bold"}}),h:e.o(p),i:e.o(p),j:e.o(t=>e.isRef(m)?m.value=t:null),k:e.p({center:!0,"confirm-text":"确定",content:"创建成功，回到首页？","show-close":!1,modelValue:e.unref(m)})})}});wx.createPage(r);
