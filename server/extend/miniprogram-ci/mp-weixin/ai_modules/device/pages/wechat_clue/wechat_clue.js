"use strict";const e=require("../../../../common/vendor.js"),r=require("../../../../api/sph.js"),t=require("../../enums/index.js"),s=require("../../../../hooks/useEventBusManager.js");if(require("../../../../utils/request/index.js"),require("../../../../utils/request/http.js"),require("../../../../enums/requestEnums.js"),require("../../../../utils/request/cancel.js"),require("../../../../utils/auth.js"),require("../../../../enums/constantEnums.js"),require("../../../../utils/cache.js"),require("../../../../stores/user.js"),require("../../../../api/user.js"),require("../../../../hooks/useShareMessage.js"),require("../../../../router/index.js"),require("../../../../utils/util.js"),require("../../../../stores/navigationBarTitle.js"),require("../../../../stores/app.js"),require("../../../../api/app.js"),require("../../../../api/chat.js"),require("../../../../api/voice_chat.js"),require("../../../../config/index.js"),!Array){(e.resolveComponent("u-icon")+e.resolveComponent("empty")+e.resolveComponent("z-paging")+e.resolveComponent("u-button"))()}Math||(u+(()=>"../../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+(()=>"../../../../components/empty/empty.js")+(()=>"../../../../node-modules/z-paging/components/z-paging/z-paging.js")+(()=>"../../../../uni_modules/vk-uview-ui/components/u-button/u-button.js"))();const u=()=>"../../components/clue-card/clue-card.js",n=e.defineComponent({__name:"wechat_clue",setup(u){const{emit:n}=s.useEventBusManager(),i=e.shallowRef(),a=e.ref([]),o=e.ref([]),c=async(e,t)=>{try{const{lists:s}=await r.getTaskList({page_no:e,page_size:t});i.value.complete(s)}catch(s){i.value.complete([])}},l=()=>{o.value.length?(n("confirm",{type:t.ListenerTypeEnum.WECHAT_CLUE,data:o.value.map(e=>{const r=a.value[e];return{id:r.id,name:r.name,time:r.create_time,total:r.crawl_number,added:r.completed_add_count,file_type:2}})}),e.index.navigateBack()):e.index.$u.toast("请选择线索")};return(r,t)=>({a:e.t(e.unref(o).length),b:e.f(e.unref(a),(r,t,s)=>e.e({a:"b09ad8d4-1-"+s+",b09ad8d4-0",b:e.p({data:{name:r.name,time:r.create_time,total:r.crawl_number,added:r.completed_add_count},type:2}),c:e.unref(o).includes(t)},e.unref(o).includes(t)?{d:"b09ad8d4-2-"+s+",b09ad8d4-0",e:e.p({name:"checkmark",color:"#ffffff",size:"20"})}:{},{f:e.n(e.unref(o).includes(t)?"bg-primary flex items-center justify-center":"border border-solid border-_h00000033_"),g:t,h:e.o(s=>((r,t)=>{const{crawl_number:s}=t;0!=s?o.value=o.value.includes(r)?o.value.filter(e=>e!==r):[...o.value,r]:e.index.$u.toast("该线索没有可采集数量")})(t,r),t)})),c:e.sr(i,"b09ad8d4-0",{k:"pagingRef"}),d:e.o(c),e:e.o(r=>e.isRef(a)?a.value=r:null),f:e.p({fixed:!1,"safe-area-inset-bottom":!0,modelValue:e.unref(a)}),g:e.o(l),h:e.p({type:"primary","custom-style":{height:"100rpx",borderRadius:"20rpx",fontWeight:"bold"},disabled:!e.unref(o).length})})}});wx.createPage(n);
