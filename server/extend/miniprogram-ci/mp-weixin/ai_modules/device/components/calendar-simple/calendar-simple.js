"use strict";const e=require("../../../../common/vendor.js");if(!Array){e.resolveComponent("u-icon")()}Math;const a=e.defineComponent({__name:"calendar-simple",props:{modelValue:null},emits:["update:modelValue","change"],setup(a,{emit:t}){const n=a,u=e.computed({get:()=>n.modelValue,set(e){t("update:modelValue",e)}}),l=e.computed((()=>e.index.$u.timeFormat(u.value?new Date(u.value.replace(/-/g,"/")):new Date,"yyyy年mm月dd日"))),d=["日","一","二","三","四","五","六"],o=e.ref(new Date),c=e.ref([]),D=e.ref([]),r=e.ref([]),s=e.ref(1),v=e.ref(!1),g=e.computed((()=>v.value?0:300)),m=a=>{const t=[],n=new Date,u=e.index.$u.timeFormat(n,"yyyy-mm-dd"),l=new Date(a);l.setDate(a.getDate()-a.getDay());for(let d=0;d<7;d++){const a=new Date(l);a.setDate(l.getDate()+d);const n=e.index.$u.timeFormat(a,"yyyy-mm-dd");t.push({date:n,day:a.getDate(),isToday:n===u})}return t};e.onMounted((()=>{const e=n.modelValue?new Date(n.modelValue.replace(/-/g,"/")):new Date,a=new Date(e);a.setDate(e.getDate()-e.getDay()),o.value=a,(e=>{D.value=m(e);const a=new Date(e);a.setDate(a.getDate()-7),c.value=m(a);const t=new Date(e);t.setDate(t.getDate()+7),r.value=m(t)})(a)}));const y=async({detail:a})=>{if("touch"!==a.source)return;const t=a.current;if(t!==s.value){if(v.value=!0,2===t){const a=new Date(o.value);a.setDate(a.getDate()+7),o.value=a,c.value=D.value,D.value=r.value,s.value=1,await e.nextTick$1();const t=new Date(o.value);t.setDate(t.getDate()+7),r.value=m(t)}else if(0===t){const a=new Date(o.value);a.setDate(a.getDate()-7),o.value=a,r.value=D.value,D.value=c.value,s.value=1,await e.nextTick$1();const t=new Date(o.value);t.setDate(t.getDate()-7),c.value=m(t)}v.value=!1}},i=e=>{u.value=e,t("change",e)};return(a,t)=>({a:e.t(e.unref(l)),b:e.p({name:"arrow-right",color:"#0065FB"}),c:e.f(d,((a,t,n)=>({a:e.t(a),b:t,c:0==t||t==d.length-1?1:""}))),d:e.f(c.value,((a,t,n)=>({a:e.t(a.day),b:a.isToday?1:"",c:a.date===e.unref(u)?1:"",d:0===new Date(a.date.replace(/-/g,"/")).getDay()||6===new Date(a.date.replace(/-/g,"/")).getDay()?1:"",e:a.date,f:e.o((e=>i(a.date)),a.date)}))),e:e.f(D.value,((a,t,n)=>({a:e.t(a.day),b:a.isToday?1:"",c:a.date===e.unref(u)?1:"",d:0===new Date(a.date.replace(/-/g,"/")).getDay()||6===new Date(a.date.replace(/-/g,"/")).getDay()?1:"",e:a.date,f:e.o((e=>i(a.date)),a.date)}))),f:e.f(r.value,((a,t,n)=>({a:e.t(a.day),b:a.isToday?1:"",c:a.date===e.unref(u)?1:"",d:0===new Date(a.date.replace(/-/g,"/")).getDay()||6===new Date(a.date.replace(/-/g,"/")).getDay()?1:"",e:a.date,f:e.o((e=>i(a.date)),a.date)}))),g:s.value,h:e.unref(g),i:e.o(y)})}}),t=e._export_sfc(a,[["__scopeId","data-v-c00ef35c"]]);wx.createComponent(t);
