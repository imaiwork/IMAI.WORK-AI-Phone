import{a4 as q,L as j,C as G,D as H,G as O,H as z,w as J,F as Q,J as Y,K as W,M as X}from"./element-plus.e618cff3.js";import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang.2d767870.js";import{_ as ee}from"./index.vue_vue_type_script_setup_true_lang.b9a0ee41.js";import{d as te,Y as ae,r as V,ai as oe,aq as le,o as u,c as y,Q as t,H as a,u as o,a6 as ue,M as n,a as k,I as f,G as r,P as x,a5 as ne,O as C,L as A,v as ie}from"./@vue.fa3e2f74.js";import{n as se,o as re,p as me}from"./montage.58388415.js";import{g as pe,f as de}from"./index.9f6c4e8c.js";import{u as ce}from"./usePaging.74092dd4.js";import"./@vueuse.57305db2.js";import"./@element-plus.8edeb311.js";import"./lodash-es.72862127.js";import"./dayjs.33f9e030.js";import"./@vscode.6c9cb547.js";import"./katex.234fd046.js";import"./@popperjs.36402333.js";import"./@ctrl.b082b0c1.js";import"./async-validator.fb49d0f5.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.0bb3a698.js";import"./axios.e67d1c3e.js";import"./vue-router.24cf2b30.js";import"./pinia.d2a105b3.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.9d260b6b.js";import"./color.4290e22e.js";import"./clone.10c3af82.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.35afef70.js";import"./ms.a9ae1d6d.js";import"./nprogress.d9597aae.js";import"./vue-clipboard3.6701dfcc.js";import"./clipboard.a993786e.js";import"./sortablejs.fb59ed0f.js";import"./echarts.8535e5a6.js";import"./zrender.3eba8991.js";import"./tslib.60310f1a.js";import"./highlight.js.4f6161a5.js";import"./@highlightjs.fc60ff58.js";const _e={class:"mb-4 flex justify-between"},fe={class:"break-all"},Ce={class:"flex justify-end mt-4"},lt=te({__name:"reocrd",setup(Fe){const i=ae({nickname:"",start_time:"",end_time:"",status:""}),{pager:c,getLists:_,resetPage:E,resetParams:T}=ce({fetchFun:me,params:i}),B=V(),F=V([]),R=m=>{F.value=m},S=async m=>{await se({id:m.id,status:m.status==1?4:1}),_()},D=async m=>{var l;await de.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F"),await re({id:m}),_(),F.value=[],(l=B.value)==null||l.clearSelection()};return _(),(m,l)=>{const P=G,b=H,h=O,$=z,L=ee,p=J,M=Q,w=Y,s=W,v=q,U=oe("router-link"),I=Z,g=le("perms"),K=X;return u(),y("div",null,[t(w,{class:"!border-none",shadow:"never"},{default:a(()=>[t(M,{ref:"formRef",class:"mb-[-16px]",model:o(i),inline:!0},{default:a(()=>[t(b,{label:"\u7528\u6237\u4FE1\u606F"},{default:a(()=>[t(P,{class:"w-[280px]",modelValue:o(i).nickname,"onUpdate:modelValue":l[0]||(l[0]=e=>o(i).nickname=e),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237",clearable:"",onKeyup:ue(o(E),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(b,{label:"\u72B6\u6001"},{default:a(()=>[t($,{class:"!w-[180px]",modelValue:o(i).status,"onUpdate:modelValue":l[1]||(l[1]=e=>o(i).status=e),placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",clearable:"",onChange:l[2]||(l[2]=e=>o(_)())},{default:a(()=>[t(h,{label:"\u8FDB\u884C\u4E2D",value:"1"}),t(h,{label:"\u5DF2\u5B8C\u6210",value:"2"}),t(h,{label:"\u6682\u505C",value:"4"})]),_:1},8,["modelValue"])]),_:1}),t(b,{label:"\u521B\u4F5C\u65F6\u95F4"},{default:a(()=>[t(L,{startTime:o(i).start_time,"onUpdate:startTime":l[3]||(l[3]=e=>o(i).start_time=e),endTime:o(i).end_time,"onUpdate:endTime":l[4]||(l[4]=e=>o(i).end_time=e)},null,8,["startTime","endTime"])]),_:1}),t(b,null,{default:a(()=>[t(p,{type:"primary",onClick:o(E)},{default:a(()=>[n("\u67E5\u8BE2")]),_:1},8,["onClick"]),t(p,{onClick:o(T)},{default:a(()=>[n("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t(w,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[k("div",_e,[f((u(),r(p,{type:"default",plain:!0,disabled:!o(F).length,onClick:l[5]||(l[5]=e=>D(o(F).map(d=>d.id)))},{default:a(()=>[n(" \u6279\u91CF\u5220\u9664 ")]),_:1},8,["disabled"])),[[g,["ai_application.montage.publish_record/delete"]]])]),f((u(),r(o(j),{ref_key:"tableRef",ref:B,size:"large",data:o(c).lists,"row-key":"id",onSelectionChange:R},{default:a(()=>[t(s,{type:"selection",width:"55",fixed:"left","reserve-selection":""}),t(s,{label:"ID",prop:"id","min-width":"60"}),t(s,{label:"\u7528\u6237",prop:"user_nickname","min-width":"140","show-overflow-tooltip":""}),t(s,{label:"\u53D1\u5E03\u8D26\u53F7",width:"180"},{default:a(({row:e})=>[k("div",fe,[(u(!0),y(x,null,ne(e.accounts,(d,N)=>(u(),y("div",{key:N},C(d.type==1?"\u4E2A\u5FAE":"\u5C0F\u7EA2\u4E66")+"\uFF1A"+C(d.account),1))),128))])]),_:1}),t(s,{label:"\u4EFB\u52A1\u540D\u79F0",prop:"name","min-width":"180","show-overflow-tooltip":""}),t(s,{label:"\u4EFB\u52A1\u7C7B\u578B",width:"120"},{default:a(({row:e})=>[n(C(e.auto_type==0?"\u624B\u52A8":"24h\u4EFB\u52A1"),1)]),_:1}),t(s,{label:"\u4EFB\u52A1\u72B6\u6001","min-width":"120"},{default:a(({row:e})=>[e.status==1||e.status==2?(u(),r(v,{key:0,type:"warning"},{default:a(()=>[n("\u8FDB\u884C\u4E2D")]),_:1})):e.status==3?(u(),r(v,{key:1,type:"success"},{default:a(()=>[n("\u5DF2\u5B8C\u6210")]),_:1})):e.status==4?(u(),r(v,{key:2,type:"info"},{default:a(()=>[n("\u5DF2\u6682\u505C")]),_:1})):(u(),y(x,{key:3},[n("-")],64))]),_:1}),t(s,{label:"\u53D1\u5E03\u5468\u671F",prop:"name","min-width":"100"},{default:a(({row:e})=>[k("span",null,C(e.publish_cycle)+"\u5929",1)]),_:1}),t(s,{label:"\u521B\u4F5C\u65F6\u95F4",prop:"create_time","min-width":"180"}),t(s,{label:"\u64CD\u4F5C",width:"160",fixed:"right"},{default:a(({row:e})=>[f((u(),r(p,{type:"primary",link:""},{default:a(()=>[t(U,{to:{path:o(pe)("ai_application.montage/publish_detail"),query:{id:e.id}}},{default:a(()=>[n(" \u8BE6\u60C5 ")]),_:2},1032,["to"])]),_:2},1024)),[[g,["ai_application.montage/publish_detail"]]]),e.auto_type==0&&(e.status==1||e.status==2||e.status==4)?f((u(),r(p,{key:0,type:"primary",link:"",onClick:d=>S(e)},{default:a(()=>[n(C(e.status==2||e.status==1?"\u6682\u505C":"\u5F00\u59CB"),1)]),_:2},1032,["onClick"])),[[g,["ai_application.montage.publish_record/start:pause"]]]):A("",!0),e.auto_type==0?f((u(),r(p,{key:1,type:"danger",link:"",onClick:d=>D([e.id])},{default:a(()=>[n(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[g,["ai_application.montage.publish_record/delete"]]]):A("",!0)]),_:1})]),_:1},8,["data"])),[[K,o(c).loading]]),k("div",Ce,[t(I,{modelValue:o(c),"onUpdate:modelValue":l[6]||(l[6]=e=>ie(c)?c.value=e:null),onChange:o(_)},null,8,["modelValue","onChange"])])]),_:1})])}}});export{lt as default};
