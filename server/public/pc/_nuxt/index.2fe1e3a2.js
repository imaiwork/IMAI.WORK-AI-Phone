import{d as oe,bP as se,au as ae,aG as ne,r as i,c as L,o as le,k as n,l as c,m as s,Z as a,J as b,I as g,s as W,K as $,t as E,Y as F,q as m,L as _,bM as re,v as ie,du as ce,G as M,ai as de,ax as ue,y as fe,ay as pe,_ as me}from"./entry.45b56a4a.js";import{_ as _e}from"./index.ed54afdc.js";import{E as ve,a as xe}from"./el-tabs.2c86b5e0.js";import{a as ge,_ as he}from"./mind-map.vue.98be3d5b.js";import{u as ye,b as be,c as ke}from"./useHandleApi.685b1dcd.js";import{_ as Te}from"./index.vue.dee5da2a.js";import Ce from"./lead.cabace33.js";import{_ as Se}from"./note.vue.38ae045a.js";import{_ as Ee}from"./audio-control.vue.0c05c438.js";import{_ as we}from"./recorder-control.vue.961bcac0.js";import{d as Re}from"./debounce.794d1e19.js";import{E as Ie}from"./index.515d6243.js";import"./raf.d3c38821.js";import"./strings.2a3b34b9.js";import"./clamp.2ad9aed4.js";import"./toNumber.7157a344.js";import"./index.118c5c16.js";import"./useMindMap.c2b34ad4.js";import"./index.3864ff87.js";import"./index.937f4495.js";import"./katex.824cf536.js";import"./usePaging.9b885ff9.js";import"./index.0f8f6319.js";import"./index.def52f2a.js";import"./index.386b5c03.js";import"./_baseIteratee.2c25c469.js";import"./index.1bb131e0.js";import"./el-slider.5e214cfb.js";import"./el-input-number.7885b021.js";import"./index.66077ec6.js";/* empty css                  *//* empty css               *//* empty css                     */import"./useDictOptions.f1ba5a71.js";import"./knowledge_base.519704cc.js";import"./common.1373bb04.js";import"./index.0b13dd01.js";/* empty css                   */const Be={class:"h-full flex min-w-[1200px] relative"},Pe={class:"h-full flex flex-col basis-[42%] min-w-[468px] bg-[#f7f8fc]"},Ve={class:"grow min-h-0 flex flex-col"},Le={class:"grow min-h-0 my-8 relative"},We={class:"px-6 pb-6"},$e={class:"flex flex-col gap-y-6"},Ae={class:"flex gap-4 items-center"},De=["src"],Ne={class:"flex gap-2 text-[#7F7F94] text-xs"},Fe=["onClick"],Me={class:"break-all leading-[24px]"},Ue={key:1,class:"flex flex-col justify-center items-center h-full"},ze={class:"h-[80px] flex-shrink-0"},je={key:1,class:"grow min-h-0 flex flex-col justify-center items-center"},qe={class:"flex-1 flex flex-col py-6 bg-white"},He={class:"px-8"},Ke={class:"grow min-h-0 px-8 overflow-hidden"},Ge={class:"fixed right-4 top-[70px] z-[1001]"},Je=oe({__name:"index",setup(Ye){const w=se(),U=ae(),f=ne({id:"",from:"main"}),A=i(null),d=i({}),h=i("1"),z=L(()=>U.getMeetingConfig.avatars),j=L(()=>{var e,o;const{response:t}=d.value;if(t)return(o=(e=t.Result)==null?void 0:e.AutoChapters)==null?void 0:o.AutoChapters}),k=L(()=>{var o,r,u;const{response:t}=d.value,e=(u=(r=(o=t==null?void 0:t.Result)==null?void 0:o.Transcription)==null?void 0:r.Transcription)==null?void 0:u.Paragraphs;return e&&e.length>0?e:[]}),{handleTrain:q}=ye(),H=t=>{var r,u,p;const{response:e}=d.value,o=(p=(u=(r=e==null?void 0:e.Result)==null?void 0:r.Translation)==null?void 0:u.Translation)==null?void 0:p.Paragraphs;return o&&o.length>0?o[t]:[]},R=i([]),D=i([]),v=i(-1),C=i(!1),I=i(!1),B=i(null),K=()=>{I.value||(C.value=!0)},G=(t=0)=>{const e=k.value;if(t=parseInt(t.toFixed(0)),v.value=e.findIndex(o=>t>=o.Words[0].Start&&t<=o.Words[o.Words.length-1].End),k.value.forEach(o=>{o.class="",o.Words.forEach(r=>{r.class=""})}),v.value!==-1){const o=k.value[v.value];o.class="!bg-primary !text-[#ffffff99]",D.value.forEach((x,l)=>{v.value}),o.Words.forEach((x,l)=>{t>=x.Start?x.class="!text-white":x.class=""});const r=R.value.filter((x,l)=>l<=v.value),{scrollTop:u,clientHeight:p}=B.value.wrapRef,y=r[r.length-1];(y.offsetTop+y.clientHeight>u+p||u>y.offsetTop)&&!C.value&&N(y.offsetTop)}},J=()=>{N(R.value[v.value].offsetTop),setTimeout(()=>{C.value=!1},20)},N=t=>{I.value=!0,B.value.setScrollTop(t),setTimeout(()=>{I.value=!1},20)},Y=t=>{if(t&&t.length==0)return"00:00";const e=t[0].Start;return ce(e/1e3)},Z=t=>{var o;const e=t[0].Start;(o=A.value)==null||o.seek(e/1e3)},O=Re(async t=>{try{await be({id:f.id,text:t}),M.msgSuccess("更新笔记成功")}catch{M.msgError("更新笔记失败")}},2*1e3),Q=async t=>{O(t)},P=i(null),V=i(!1),X=()=>{q(d.value,async t=>{var e,o;V.value=!0,await de(),(e=P.value)==null||e.open(),(o=P.value)==null||o.setFormData(t)})},S=i(!1),ee=async()=>{try{S.value=!0;const t=await ke({id:f.id});d.value=t,w.meta.title=t.name,S.value=!1}finally{S.value=!1}};return le(()=>{f.id=w.query.id,f.from=w.query.from,f.id&&ee()}),(t,e)=>{const o=ue,r=fe,u=_e,p=ve,y=xe,x=pe;return n(),c(b,null,[s("div",Be,[s("div",Pe,[e[4]||(e[4]=s("div",{class:"text-lg font-bold mx-6 mt-6"},"语音转文字",-1)),s("div",Ve,[a(S)?(n(),c("div",je,[m(u)])):(n(),c(b,{key:0},[s("div",Le,[a(k).length>0?(n(),g(a(Ie),{key:0,ref_key:"scrollbarContentRef",ref:B,onScroll:K},{default:W(()=>[s("div",We,[s("div",$e,[(n(!0),c(b,null,$(a(k),(l,te)=>(n(),c("div",{ref_for:!0,ref_key:"contentItemRef",ref:R},[s("div",Ae,[s("img",{class:"w-6 h-6 rounded-full object-cover",src:a(z)[l.SpeakerId-1]},null,8,De),s("div",Ne,[s("span",null,"发言人"+E(l.SpeakerId),1),s("span",null,E(Y(l.Words)),1)])]),s("div",{class:F(["cursor-pointer py-4 px-6 bg-white rounded-lg mt-[10px] leading-[24px] text-[#585A73] hover:shadow-[0_0_0_2px_rgba(35,83,244,.4)]",l.class]),ref_for:!0,ref_key:"paragraphRef",ref:D,onClick:T=>Z(l.Words)},[(n(!0),c(b,null,$(l.Words,T=>(n(),c("span",{class:F(T.class)},E(T.Text),3))),256)),a(d).translation?(n(),c(b,{key:0},[m(o,{class:"!border-t-[#f0f0f0] !my-3"}),s("div",Me,[(n(!0),c(b,null,$(H(te).Sentences,T=>(n(),c("span",null,[s("span",null,E(T.Text),1)]))),256))])],64)):_("",!0)],10,Fe)],512))),256))])])]),_:1},512)):(n(),c("div",Ue,[...e[3]||(e[3]=[s("img",{src:ge,class:"w-[100px] h-[100px]"},null,-1),s("div",{class:"text-[#27264da6] mt-4"},"这里空空如也~",-1)])])),a(C)&&a(v)>-1?(n(),c("div",{key:2,class:"absolute bottom-0 right-3 p-2 bg-[rgba(44,44,54,.8)] rounded-lg z-[888]",onClick:J},[m(r,{name:"local-icon-crosshair",size:20,color:"#ffffff"})])):_("",!0)]),s("div",ze,[a(f).from==="real-time"&&!a(f).id?(n(),g(we,{key:0})):_("",!0),a(f).id?(n(),g(Ee,{key:1,ref_key:"audioControlRef",ref:A,music:a(d).url,"content-list":a(j),onUpdateTime:G},null,8,["music","content-list"])):_("",!0)])],64))])]),s("div",qe,[s("div",He,[m(y,{modelValue:a(h),"onUpdate:modelValue":e[0]||(e[0]=l=>re(h)?h.value=l:null)},{default:W(()=>[m(p,{label:"导读",name:"1"}),m(p,{label:"脑图",name:"2"}),m(p,{label:"笔记",name:"3"})]),_:1},8,["modelValue"])]),s("div",Ke,[a(h)==="1"?(n(),g(Ce,{key:0,detail:a(d)},null,8,["detail"])):_("",!0),a(h)==="2"?(n(),g(he,{key:1,detail:a(d)},null,8,["detail"])):_("",!0),a(h)==="3"?(n(),g(Se,{key:2,modelValue:a(d).text,"onUpdate:modelValue":[e[1]||(e[1]=l=>a(d).text=l),Q]},null,8,["modelValue"])):_("",!0)])]),s("div",Ge,[m(x,{type:"primary",onClick:X},{default:W(()=>[...e[5]||(e[5]=[ie("知识库训练",-1)])]),_:1})])]),a(V)?(n(),g(Te,{key:0,ref_key:"knbBindRef",ref:P,onClose:e[2]||(e[2]=l=>V.value=!1)},null,512)):_("",!0)],64)}}});const Wt=me(Je,[["__scopeId","data-v-32d1eb0a"]]);export{Wt as default};
