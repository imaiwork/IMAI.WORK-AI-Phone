import{_ as q}from"./index.vue.3f013733.js";import{d as L,A as x,aG as k,cy as T,G as v,bK as U,k as E,I as V,s as a,m as l,q as s,t as P,Z as t,v as d,L as S,av as z,aw as A,d0 as K,d1 as X,az as Z,ay as $,cX as j}from"./entry.8705b591.js";import{u as H,q as J}from"./agent.4a5bb123.js";const M={class:"text-2xl font-bold mb-5"},O={class:"flex"},ee=L({__name:"create-popup",props:{showChatType:{type:[Boolean,Number]},type:{},agentId:{}},emits:["close","success"],setup(m,{expose:h,emit:g}){const c=m,i=g,f=x(),o=k({robot_id:c.agentId,type:c.type,id:"",name:"",password:"",chat_type:1}),_=x(),C=k({name:[{required:!0,message:"请输入分享名称"}]}),{lockFn:R,isLock:F}=T(async()=>{await _.value.validate();try{o.id?await H(o):await J(o),v.msgSuccess("发布成功"),r(),i("success")}catch(p){v.msgError(p)}}),I=()=>{f.value.open()},r=()=>{i("close")};return h({open:I,setFormData:p=>U(p,o)}),(p,e)=>{const B=q,y=z,u=A,w=K,N=X,D=Z,b=$,G=j;return E(),V(G,{ref_key:"popupRef",ref:f,async:"",width:"550px","confirm-button-text":"","cancel-button-text":"","header-class":"!p-0","show-close":!1},{default:a(()=>[l("div",null,[l("div",{class:"absolute w-6 h-6 right-4 top-4 cursor-pointer",onClick:r},[s(B)]),l("div",M,P(t(o).id?"编辑":"添加")+"链接",1),s(D,{model:t(o),rules:t(C),ref_key:"formRef",ref:_,"label-position":"top"},{default:a(()=>[s(u,{label:"名称",prop:"name"},{default:a(()=>[s(y,{modelValue:t(o).name,"onUpdate:modelValue":e[0]||(e[0]=n=>t(o).name=n),class:"!h-11",placeholder:"记录名称，仅用于展示"},null,8,["modelValue"])]),_:1}),s(u,{label:"密码",prop:"password"},{default:a(()=>[s(y,{modelValue:t(o).password,"onUpdate:modelValue":e[1]||(e[1]=n=>t(o).password=n),type:"password",placeholder:"不设置密码，可直接访问","show-password":"",class:"!h-11"},null,8,["modelValue"])]),_:1}),m.showChatType&&!t(o).id?(E(),V(u,{key:0,label:"对话模式",prop:"chat_type"},{default:a(()=>[l("div",null,[s(N,{modelValue:t(o).chat_type,"onUpdate:modelValue":e[2]||(e[2]=n=>t(o).chat_type=n)},{default:a(()=>[s(w,{value:1},{default:a(()=>[...e[3]||(e[3]=[d("文本对话",-1)])]),_:1}),s(w,{value:2},{default:a(()=>[...e[4]||(e[4]=[d("形象对话",-1)])]),_:1})]),_:1},8,["modelValue"]),e[5]||(e[5]=l("div",{class:"form-tips"},"若关闭或没有配置形象选择后，默认展示文本",-1))])]),_:1})):S("",!0)]),_:1},8,["model","rules"]),l("div",O,[s(b,{class:"!rounded-full flex-1 !h-[50px]",onClick:r},{default:a(()=>[...e[6]||(e[6]=[d("取消",-1)])]),_:1}),s(b,{type:"primary",class:"!rounded-full flex-1 !h-[50px]",loading:t(F),onClick:t(R)},{default:a(()=>[...e[7]||(e[7]=[d(" 保存 ",-1)])]),_:1},8,["loading","onClick"])])])]),_:1},512)}}});export{ee as _};
