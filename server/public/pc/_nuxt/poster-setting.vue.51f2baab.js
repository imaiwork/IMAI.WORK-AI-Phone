import{_ as D}from"./index.vue.96af9406.js";import{d as R,A as m,aG as E,B as F,c as N,cy as S,d7 as L,G as _,bK as j,k as x,I as A,s as n,m as e,q as o,Z as l,l as G,L as I,t as g,v as c,d8 as q,ay as z,cX as H}from"./entry.563c232b.js";import{_ as K}from"./index.875ea2c9.js";import{V as Q}from"./vue-qr.c4e819c6.js";const T=["src"],X={class:"absolute top-0 left-0 w-full h-full flex flex-col justify-center items-center"},Z={class:"text-center text-white mt-[15px] text-[18px] font-bold"},J={class:"flex py-3 items-center"},M={class:"flex-1 ml-3"},O={class:"flex"},st=R({__name:"poster-setting",emits:["close","success"],setup(P,{expose:k,emit:v}){const p=v,d=m(),u=m(),s=E({id:"",apikey:"",bgUrl:"",title:"快来扫码",description:"和我的智能体对话吧"}),f=`${F()}/static/images/ai_share_bg.png`,y=N(()=>`${location.origin}${q()}/chat/${s.apikey}`),b=a=>{s.bgUrl=a.data.uri},h=()=>{s.bgUrl=f},{lockFn:w,isLock:B}=S(async()=>{try{await L(u.value,{name:`${s.title}.png`}),i(),p("success"),_.msgSuccess("海报已保存到本地")}catch{_.msgError("下载失败，请重试")}}),U=()=>{d.value.open(),s.bgUrl=f},i=()=>{p("close")};return k({open:U,setFormData:a=>j(a,s)}),(a,t)=>{const C=D,r=z,$=K,V=H;return x(),A(V,{ref_key:"popupRef",ref:d,async:"",width:"400px","confirm-button-text":"","cancel-button-text":"","header-class":"!p-0","show-close":!1},{default:n(()=>[e("div",null,[e("div",{class:"absolute w-6 h-6 right-4 top-4 cursor-pointer",onClick:i},[o(C)]),t[5]||(t[5]=e("div",{class:"text-2xl font-bold mb-5"},"生成海报",-1)),e("div",{class:"w-full h-[556px] rounded-[10px] overflow-hidden relative",ref_key:"posterRef",ref:u},[l(s).bgUrl?(x(),G("img",{key:0,class:"object-cover w-full h-full",src:l(s).bgUrl},null,8,T)):I("",!0),e("div",X,[o(Q,{text:l(y),size:200,class:"rounded-[10px]","dot-scale":1,margin:12},null,8,["text"]),e("div",Z,[e("div",null,g(l(s).title),1),e("div",null,g(l(s).description),1)])])],512),e("div",J,[o($,{limit:1,"show-file-list":!1,"show-progress":"",onSuccess:b},{default:n(()=>[o(r,{type:"primary",link:""},{default:n(()=>[...t[0]||(t[0]=[c("自定义背景图",-1)])]),_:1})]),_:1}),e("div",M,[o(r,{type:"primary",link:"",onClick:h},{default:n(()=>[...t[1]||(t[1]=[c("使用默认图",-1)])]),_:1})]),t[2]||(t[2]=e("div",{class:"text-tx-regular"},"背景图尺寸：430*670",-1))]),e("div",O,[o(r,{class:"!rounded-full flex-1 !h-[50px]",onClick:i},{default:n(()=>[...t[3]||(t[3]=[c("取消",-1)])]),_:1}),o(r,{type:"primary",class:"!rounded-full flex-1 !h-[50px]",loading:l(B),onClick:l(w)},{default:n(()=>[...t[4]||(t[4]=[c(" 保存 ",-1)])]),_:1},8,["loading","onClick"])])])]),_:1},512)}}});export{st as _};
