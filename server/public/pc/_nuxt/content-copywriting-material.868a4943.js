import{_ as W}from"./index.vue.83bf2a64.js";import{E as ee,a as te}from"./index.899f58ef.js";import{d as oe,r as y,c as z,k as n,I as k,s as r,m as t,q as c,Z as a,cZ as le,l as i,K as w,J as C,bM as se,v as u,t as S,Y as ne,L as D,ay as ce,av as ie,y as ae,cX as re,_ as de}from"./entry.556496e9.js";import{E as pe}from"./index.4bb9b943.js";import{E as ue}from"./el-empty.5e752bd7.js";/* empty css                  *//* empty css               *//* empty css                     */import{a as fe}from"./matrix.418b34fe.js";import{CopywritingTypeEnum as _e}from"./index.db2ee73f.js";import"./index.ef7246b4.js";import"./strings.09a7c832.js";import"./_baseIteratee.4a27397d.js";import"./toNumber.844d22bd.js";import"./clamp.b3f2460d.js";import"./index.c754b099.js";const me={class:"-my-4"},ve={class:"mt-[17px]"},he={class:"flex justify-between items-center gap-x-2 mt-4"},xe={class:"flex gap-x-2"},be={class:"text-[#ffffff80] text-[11px]"},ye={class:"text-white"},ge={class:"text-[#ffffff80] text-[11px]"},ke={class:"text-white"},we={class:"flex gap-x-[10px] mt-[18px]"},Ce={class:"basis-[45%] flex-shrink-0 rounded-xl border border-app-border-1 bg-app-bg-2"},Ee={class:"flex items-center justify-between h-11 border-[0] border-b-[1px] border-app-border-1 px-[10px]"},Ve={class:"h-[350px]"},Le={class:"p-3 flex flex-col gap-y-2"},ze={class:"flex-1"},Se=["onClick"],Te={key:1,class:"h-full flex items-center justify-center"},$e={class:"flex-auto rounded-xl border border-app-border-1 bg-app-bg-2"},je={class:"flex items-center justify-between h-11 border-[0] border-b-[1px] border-app-border-1 px-[10px]"},Ue={class:"h-[350px]"},Be={class:"p-3 flex flex-col gap-y-3"},Ie={class:"flex-1"},Me={class:"relative mt-4 flex gap-x-2 items-end"},Ae={key:0,class:"flex-1 flex flex-wrap gap-2"},De=["onClick"],Ne={key:1,class:""},Re=["onClick"],Fe={key:1,class:"h-full flex items-center justify-center"},Ke={class:"mt-[18px] flex justify-center"},Oe=oe({__name:"content-copywriting-material",emits:["close","confirm"],setup(Ze,{expose:N,emit:R}){const T=R,f=y([]),d=y({title:[],described:[]}),_=y(),p=z(()=>{if(m.value)return{title:d.value.title,described:d.value.described};const o=f.value.find(e=>e.id==_.value)||{};return{title:o.title||[],described:o.described||[]}}),F=z(()=>d.value.title.length),K=z(()=>d.value.described.length),O=()=>{m.value=!1},Z=async()=>{const{lists:o}=await fe({page_size:9999,copywriting_type:_e.TITLE});o.length>0&&(o.forEach(e=>{e.title=e.title.map(s=>({...s,checked:!1})),e.described=e.described.map(s=>({...s,checked:!1}))}),f.value=o,_.value=o[0].id)},q=o=>{const{described:e}=p.value;e[o].topic||(e[o].topic=[]),e[o].topic.push("")},J=(o,e)=>{const{described:s}=p.value;s[o].topic&&s[o].topic.splice(e,1)},m=y(!1),X=()=>{m.value=!m.value},$=()=>{const o=f.value.flatMap(s=>s.title).filter(s=>s.checked),e=f.value.flatMap(s=>s.described).filter(s=>s.checked);d.value={title:o,described:e}},j=(o,e)=>{e.checked=!e.checked,$()},U=o=>{const e=p.value[o].some(s=>!s.checked);p.value[o].forEach(s=>{s.checked=e}),$()},E=y(),Y=()=>{E.value.open(),f.value=[],d.value={title:[],described:[]},_.value=void 0,m.value=!1,Z()},B=()=>{T("close"),E.value.close()},G=()=>{T("confirm",{titleList:d.value.title.map(o=>({content:o.content})),contentList:d.value.described.map(o=>({content:o.content,topic:o.topic}))}),B()};return N({open:Y}),(o,e)=>{const s=W,H=ee,P=te,v=ce,V=ie,L=ae,I=pe,M=ue,Q=re;return n(),k(Q,{ref_key:"popupRef",ref:E,width:"718px","confirm-button-text":"","cancel-button-text":"",style:{"background-color":"var(--app-bg-color-3)",border:"1px solid var(--app-border-color-1)"},"show-close":!1},{default:r(()=>[t("div",me,[t("div",{class:"absolute w-6 h-6 top-4 right-4",onClick:B},[c(s,{theme:a(le).DARK},null,8,["theme"])]),e[11]||(e[11]=t("div",{class:"text-white text-[20px] font-bold"},"内容文案库",-1)),t("div",ve,[c(P,{modelValue:a(_),"onUpdate:modelValue":e[0]||(e[0]=l=>se(_)?_.value=l:null),class:"!w-[314px] !h-11",placeholder:"请选择","popper-class":"dark-select-popper",clearable:"",filterable:"","show-arrow":!1,onChange:O},{default:r(()=>[(n(!0),i(C,null,w(a(f),l=>(n(),k(H,{label:l.name,value:l.id,key:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),t("div",he,[t("div",xe,[t("div",be,[e[3]||(e[3]=u(" 已选择标题",-1)),t("span",ye,"（"+S(a(F))+"）",1)]),t("div",ge,[e[4]||(e[4]=u(" 已选择正文",-1)),t("span",ke,"（"+S(a(K))+"）",1)])]),c(v,{link:"",class:"!text-[#ffffff80] !text-[11px]",onClick:X},{default:r(()=>[u(S(a(m)?"隐藏已选择":"查看已选择"),1)]),_:1})]),t("div",we,[t("div",Ce,[t("div",Ee,[e[6]||(e[6]=t("div",{class:"text-white"},"标题",-1)),c(v,{class:"!border-app-border-2",color:"#1f1f1f",size:"small",onClick:e[1]||(e[1]=l=>U("title"))},{default:r(()=>[...e[5]||(e[5]=[u("全选",-1)])]),_:1})]),t("div",Ve,[a(p).title.length>0?(n(),k(I,{key:0,class:"h-full"},{default:r(()=>[t("div",Le,[(n(!0),i(C,null,w(a(p).title,(l,h)=>(n(),i("div",{class:"flex items-center gap-x-3",key:h},[t("div",ze,[c(V,{modelValue:l.content,"onUpdate:modelValue":x=>l.content=x,class:"!h-11",clearable:"",maxlength:"20","show-word-limit":"",placeholder:"-","input-style":"font-size: 11px"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",{class:"w-4 h-4 rounded-full cursor-pointer",onClick:x=>j("title",l)},[c(L,{name:"local-icon-success_fill",size:16,color:l.checked?"var(--color-primary)":"#ffffff1a"},null,8,["color"])],8,Se)]))),128))])]),_:1})):(n(),i("div",Te,[c(M,{description:"暂无数据","image-size":100})]))])]),t("div",$e,[t("div",je,[e[8]||(e[8]=t("div",{class:"text-white"},"正文描述",-1)),c(v,{class:"!border-app-border-2",color:"#1f1f1f",size:"small",onClick:e[2]||(e[2]=l=>U("described"))},{default:r(()=>[...e[7]||(e[7]=[u("全选",-1)])]),_:1})]),t("div",Ue,[a(p).described.length>0?(n(),k(I,{key:0,class:"h-full"},{default:r(()=>[t("div",Be,[(n(!0),i(C,null,w(a(p).described,(l,h)=>{var x;return n(),i("div",{class:"flex items-center gap-x-3",key:h},[t("div",Ie,[t("div",null,[c(V,{modelValue:l.content,"onUpdate:modelValue":b=>l.content=b,type:"textarea",maxlength:"800","show-word-limit":"",rows:6},null,8,["modelValue","onUpdate:modelValue"])]),t("div",Me,[l.topic&&l.topic.length>0?(n(),i("div",Ae,[(n(!0),i(C,null,w(l.topic,(b,g)=>(n(),i("div",{key:g,class:ne(["relative text-[11px] rounded-md shadow-[0_0_0_1px_rgba(255,255,255,0.1)]",{"bg-app-bg-4":b}])},[c(V,{modelValue:l.topic[g],"onUpdate:modelValue":A=>l.topic[g]=A,class:"h-[26px] !w-[78px]",placeholder:"#请输入话题","input-style":"font-size: 11px;height: 100%"},null,8,["modelValue","onUpdate:modelValue"]),t("div",{class:"absolute -top-2 -right-2 w-4 h-4 rounded-full flex items-center justify-center bg-[#FF3C26] cursor-pointer",onClick:A=>J(h,g)},[c(L,{name:"local-icon-close",color:"#ffffff"})],8,De)],2))),128))])):D("",!0),((x=l.topic)==null?void 0:x.length)<5?(n(),i("div",Ne,[c(v,{type:"primary",class:"!h-[26px]",onClick:b=>q(h)},{default:r(()=>[...e[9]||(e[9]=[u("添加话题",-1)])]),_:1},8,["onClick"])])):D("",!0)])]),t("div",{class:"w-4 h-4 rounded-full cursor-pointer",onClick:b=>j("described",l)},[c(L,{name:"local-icon-success_fill",size:16,color:l.checked?"var(--color-primary)":"#ffffff1a"},null,8,["color"])],8,Re)])}),128))])]),_:1})):(n(),i("div",Fe,[c(M,{description:"暂无数据","image-size":100})]))])])]),t("div",Ke,[c(v,{type:"primary",class:"!rounded-full w-[246px] !h-[50px]",onClick:G},{default:r(()=>[...e[10]||(e[10]=[u("确定",-1)])]),_:1})])])]),_:1},512)}}});const it=de(Oe,[["__scopeId","data-v-39955044"]]);export{it as default};
