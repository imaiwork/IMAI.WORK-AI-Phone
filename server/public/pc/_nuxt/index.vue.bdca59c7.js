import{d as j,a as D,bP as M,c as Y,r as z,o as F,k as r,l as _,Z as l,J as x,m as a,K as G,Y as J,t as f,q as o,s,$ as O,aI as Z,I as b,v as C,bM as H,G as k,y as Q,ay as W,av as X,cY as ee}from"./entry.563c232b.js";import{E as te}from"./el-avatar.8d5c28fd.js";import{E as oe,a as ae}from"./index.8c66fba0.js";import{E as ne}from"./el-switch.ecfcb4c2.js";import{E as le}from"./el-empty.92ad44f2.js";import{_ as se}from"./index.vue.d663f363.js";/* empty css                        *//* empty css               *//* empty css                 *//* empty css                     */import{c as ie}from"./service.9c966dd0.js";import{u as re}from"./useSocialPlatform.ddcf0ae5.js";import ce from"./useAccount.a92f320f.js";import{_ as ue}from"./account-setting.vue.42e89db7.js";const de={class:"h-full flex rounded-lg overflow-hidden"},pe={class:"w-[178px] bg-white border-r border-r-[#E8E8E8] flex-shrink-0"},me={class:"flex flex-col gap-y-4 p-4"},_e=["onClick"],fe=["src"],ve={class:"flex-1 bg-white flex flex-col py-4 overflow-hidden"},ye={class:"px-4 flex items-center justify-between"},ge={class:"grow min-h-0 mt-4"},he={class:"flex justify-end px-4 mt-4"},Re=j({__name:"index",setup(Ee){const g=D(),v=M(),{socialPlatformList:w,currentSocialPlatform:p}=re(),{accountPager:c,queryParams:y,getAccountList:u,resetAccountPage:h,resetAccountParams:V}=ce({type:p.value}),P=Y(()=>w.filter(n=>n.show)),S=n=>{p.value=n,y.type=n,h()},m=z(!1),$=async n=>{try{await ie({account:n.account,open_ai:n.open_ai,account_type:n.type}),k.msgSuccess("操作成功")}catch{k.msgError("操作失败")}u()},A=n=>{m.value=!0,g.replace({query:{...v.query,id:n.id,account:n.account,app_type:p.value}})},q=()=>{m.value=!1,g.replace({query:{...v.query,id:void 0,account:void 0}}),h()};return F(()=>{v.query.id?m.value=!0:u()}),(n,t)=>{const B=Q,E=W,I=X,L=te,i=oe,T=ne,R=le,U=ae,K=se,N=ee;return r(),_("div",de,[l(m)?(r(),b(ue,{key:1,onClose:q})):(r(),_(x,{key:0},[a("div",pe,[a("div",me,[(r(!0),_(x,null,G(l(P),(e,d)=>(r(),_("div",{key:d,class:J(["flex items-center gap-x-3 px-4 hover:bg-primary-light-9 py-1.5 rounded-lg cursor-pointer",{"bg-primary-light-9":l(p)===e.type}]),onClick:xe=>S(e.type)},[a("img",{src:e.icon,class:"w-6 h-6"},null,8,fe),a("div",null,f(e.name),1)],10,_e))),128))])]),a("div",ve,[a("div",ye,[o(E,{text:"",onClick:t[0]||(t[0]=e=>l(u)())},{default:s(()=>[o(B,{name:"el-icon-Refresh"}),t[5]||(t[5]=a("span",null,"刷新",-1))]),_:1}),a("div",null,[o(I,{modelValue:l(y).name,"onUpdate:modelValue":t[1]||(t[1]=e=>l(y).name=e),placeholder:"搜索账号信息","prefix-icon":"el-icon-Search",clearable:"",onClear:t[2]||(t[2]=e=>l(V)()),onKeyup:t[3]||(t[3]=O(e=>l(u)(),["enter"]))},null,8,["modelValue"])])]),a("div",ge,[Z((r(),b(U,{data:l(c).lists,height:"100%",stripe:"","row-style":{height:"60px"},"header-cell-style":{height:"63px"}},{empty:s(()=>[o(R,{description:"暂无数据"})]),default:s(()=>[o(i,{label:"头像"},{default:s(({row:e})=>[o(L,{src:e.avatar},null,8,["src"])]),_:1}),o(i,{label:"账号/昵称",prop:"account","min-width":"120"},{default:s(({row:e})=>[a("div",null,[a("div",null,f(e.account),1),a("div",null,"("+f(e.nickname)+")",1)])]),_:1}),o(i,{prop:"device_code",label:"所属设备"}),o(i,{prop:"robot_name",label:"接管机器人"},{default:s(({row:e})=>[a("div",null,f(e.robot_name||"-"),1)]),_:1}),o(i,{label:"接管类型",width:"80"},{default:s(({row:e})=>[...t[6]||(t[6]=[C(" 私聊 ",-1)])]),_:1}),o(i,{prop:"name",label:"接管状态"},{default:s(({row:e})=>[o(T,{modelValue:e.open_ai,"onUpdate:modelValue":d=>e.open_ai=d,"active-value":1,"inactive-value":0,onChange:d=>$(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),o(i,{prop:"name",label:"操作",width:"100px",fixed:"right"},{default:s(({row:e})=>[o(E,{link:"",type:"primary",onClick:d=>A(e)},{default:s(()=>[...t[7]||(t[7]=[C(" 配置 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[N,l(c).loading]])]),a("div",he,[o(K,{modelValue:l(c),"onUpdate:modelValue":t[4]||(t[4]=e=>H(c)?c.value=e:null),onChange:l(u)},null,8,["modelValue","onChange"])])])],64))])}}});export{Re as _};
