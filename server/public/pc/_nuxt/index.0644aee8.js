import{E as F,a as G}from"./index.def52f2a.js";import{d as M,r as g,aG as O,k as t,l as a,m as c,q as i,s as d,Z as s,J as h,K as w,I as U,v as x,bM as J,L as y,aI as C,G as p,ay as K,cL as Y,ba as Z,y as H,cY as Q,u as W,_ as X}from"./entry.45b56a4a.js";import{E as ee}from"./index.515d6243.js";/* empty css                  *//* empty css               *//* empty css                     */import{u as le}from"./usePaging.9b885ff9.js";import{e as se,r as te,i as oe}from"./digital_human.299b9036.js";import{_ as ae}from"./empty.vue.3f7c5c9a.js";import ne from"./video-item.8f72b60c.js";import{E as ie}from"./index.c9f70b6f.js";import"./index.386b5c03.js";import"./strings.2a3b34b9.js";import"./_baseIteratee.2c25c469.js";import"./toNumber.7157a344.js";import"./clamp.2ad9aed4.js";import"./index.1bb131e0.js";import"./index.0b13dd01.js";import"./index.vue.b217a0a1.js";import"./index.vue.699ec101.js";/* empty css                   */import"./useTemplate.afda57ca.js";import"./throttle.ab15e8bc.js";import"./debounce.794d1e19.js";const re={class:"h-full flex flex-col bg-app-bg-2 rounded-[20px]"},ce={class:"flex-shrink-0 px-[14px]"},de={class:"flex items-center justify-end h-[88px]"},ue={class:"flex items-center gap-[14px]"},pe={key:1,class:"flex items-center gap-2"},me=["infinite-scroll-disabled"],fe={class:"h-full"},_e={key:0},ve={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 py-4"},ge=["onClick"],he={key:0,class:"absolute top-0 right-0 z-[1000] w-full h-full bg-black/5 flex justify-end p-2"},xe={class:"w-6 h-6 rounded-full"},ye={key:0,class:"text-white text-center text-xs w-full py-4"},ke={key:1,class:"h-full flex items-center justify-center"},be=M({__name:"index",setup(Ee){const k=W(),V=[{label:"全部",value:""},{label:"生成中",value:"0"},{label:"生成成功",value:"1"},{label:"生成失败",value:"2"}],m=g(!1),u=g(!1),n=g([]),f=O({page_no:1,page_size:20,status:"",model_version:"",type:0}),{pager:r,getLists:b,resetPage:v}=le({fetchFun:se,params:f,isScroll:!0}),L=()=>{m.value=!1,n.value=[]},S=o=>{n.value.includes(o)?n.value=n.value.filter(e=>e!==o):n.value.push(o),n.value.length==r.lists.length?u.value=!0:u.value=!1},$=()=>{u.value?n.value=r.lists.map(o=>o.id):n.value=[]},A=async()=>{f.page_no+=1,b()},I=async o=>{k.$confirm({message:"确定重试改形象吗？",theme:"dark",onConfirm:async()=>{try{p.loading("重试中..."),await te({anchor_id:o}),v(),p.msgSuccess("重试成功")}catch(e){p.msgError(e||"重试失败")}finally{p.closeLoading()}}})},E=async o=>{k.$confirm({title:"提示",message:"确定删除吗？",theme:"dark",onConfirm:async()=>{try{await oe({id:o}),r.lists=r.lists.filter(e=>typeof o=="number"?e.id!==o:!n.value.includes(e.id)),p.msgSuccess("删除成功")}catch{p.msgError("删除失败")}}})};return b(),(o,e)=>{const B=F,D=G,_=K,N=Y,R=Z,j=ee,z=H,P=Q,T=ie;return t(),a("div",re,[c("div",ce,[i(j,null,{default:d(()=>[c("div",de,[c("div",ue,[i(D,{modelValue:s(f).status,"onUpdate:modelValue":e[0]||(e[0]=l=>s(f).status=l),class:"!w-[260px] status-select","popper-class":"dark-select-popper",clearable:"","show-arrow":!1,"empty-values":[null,void 0],"value-on-clear":null,onChange:s(v)},{default:d(()=>[(t(),a(h,null,w(V,l=>i(B,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","onChange"]),s(r).lists.length>0?(t(),a(h,{key:0},[s(m)?(t(),a("div",pe,[i(N,{modelValue:s(u),"onUpdate:modelValue":e[2]||(e[2]=l=>J(u)?u.value=l:null),onChange:$},{default:d(()=>[...e[6]||(e[6]=[x(" 全选 ",-1)])]),_:1},8,["modelValue"]),i(_,{type:"danger",class:"!h-10 !rounded-full !w-[90px]",onClick:e[3]||(e[3]=l=>E(s(n)))},{default:d(()=>[...e[7]||(e[7]=[x(" 删除 ",-1)])]),_:1}),c("div",null,[i(_,{link:"",onClick:L},{default:d(()=>[...e[8]||(e[8]=[c("span",{class:"text-white"},"退出管理",-1)])]),_:1})])])):(t(),U(_,{key:0,type:"primary",class:"!h-10 !rounded-full !w-[116px]",onClick:e[1]||(e[1]=l=>m.value=!0)},{default:d(()=>[...e[5]||(e[5]=[x(" 批量管理 ",-1)])]),_:1}))],64)):y("",!0),c("div",null,[i(R,{content:"刷新"},{default:d(()=>[i(_,{circle:"",color:"#1f1f1f",icon:"el-icon-Refresh",class:"!w-10 !h-10",onClick:e[4]||(e[4]=l=>s(v)())})]),_:1})])])])]),_:1})]),C((t(),a("div",{class:"grow min-h-0 overflow-y-auto px-4 dynamic-scroller","infinite-scroll-immediate":!1,"infinite-scroll-disabled":!s(r).isLoad,"infinite-scroll-distance":10},[C((t(),a("div",fe,[s(r).lists.length?(t(),a("div",_e,[c("div",ve,[(t(!0),a(h,null,w(s(r).lists,(l,q)=>(t(),a("div",{class:"h-[295px] relative cursor-pointer overflow-hidden",key:q,onClick:we=>S(l.id)},[i(ne,{item:{id:l.id,name:l.name,pic:l.pic,status:l.status,video_url:l.url,model_version:l.model_version,remark:l.remark,create_time:l.create_time},onDelete:E,onRetry:I},null,8,["item"]),s(m)?(t(),a("div",he,[c("div",xe,[i(z,{name:"local-icon-success_fill",size:20,color:s(n).includes(l.id)?"var(--el-color-error)":"#ffffff1a"},null,8,["color"])])])):y("",!0)],8,ge))),128))]),s(r).isLoad?y("",!0):(t(),a("div",ye,"暂无更多了~"))])):(t(),a("div",ke,[i(ae)]))])),[[P,s(r).loading]])],8,me)),[[T,A]])])}}});const Ze=X(be,[["__scopeId","data-v-bbd25832"]]);export{Ze as default};
