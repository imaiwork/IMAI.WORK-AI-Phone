import{E as C,a as L}from"./index.c162b53f.js";import{d as R,A as f,aG as V,cy as B,bK as I,k as r,I as d,s as l,m as D,q as n,Z as t,l as q,K as A,J as G,az as K,cX as N,G as O,aw as S}from"./entry.9c858de7.js";/* empty css                  *//* empty css               *//* empty css                     */import{ai as z}from"./person_wechat.703f63bb.js";import J from"./useTask.f10ac003.js";const Q=R({__name:"send-flow",props:{type:{}},emits:["success","close"],setup(M,{expose:u,emit:_}){const i=_,c=f(),m=f(),e=V({id:"",flow_id:[],push_type:0}),w={flow_id:[{required:!0,message:"请选择执行的客户流程",trigger:"blur"}]},{flowLists:k,getFlowLists:E}=J(),b=async()=>{var o;await((o=m.value)==null?void 0:o.validate());try{await z(e),i("success"),p()}catch(a){O.msgError(a)}},y=()=>{var o;(o=c.value)==null||o.open(),E()},p=()=>{i("close")},{lockFn:F,isLock:g}=B(b);return u({open:y,setFormData:o=>{I(o,e),e.flow_id&&(e.flow_id=e.flow_id.map(a=>parseInt(a)))}}),(o,a)=>{const h=C,v=L,x=S;return r(),d(N,{ref_key:"popupRef",ref:c,title:"设置执行范围",width:"500px",async:"","confirm-loading":t(g),onClose:p,onConfirm:t(F)},{default:l(()=>[D("div",null,[n(t(K),{ref_key:"formRef",ref:m,model:t(e),"label-position":"top",rules:w},{default:l(()=>[n(x,{label:"请选择执行的客户流程（多选）",prop:"flow_id"},{default:l(()=>[n(v,{modelValue:t(e).flow_id,"onUpdate:modelValue":a[0]||(a[0]=s=>t(e).flow_id=s),placeholder:"请选择执行的客户流程",filterable:"",multiple:""},{default:l(()=>[(r(!0),q(G,null,A(t(k),s=>(r(),d(h,{key:s.id,label:s.flow_name,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["confirm-loading","onConfirm"])}}});export{Q as _};
