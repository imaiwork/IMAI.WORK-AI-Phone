import{d as V,r as f,aG as h,cy as C,bK as R,k as T,I as Y,s,q as n,Z as o,cX as q,bC as B,G as _,av as G,aw as H,az as L}from"./entry.8705b591.js";import{E as M}from"./el-date-picker-panel.5733be69.js";/* empty css                     */import{E as O,F as P}from"./person_wechat.703f63bb.js";const K=V({__name:"user-todo-edit",props:{wechatId:{},friendId:{}},emits:["close","confirm"],setup(u,{expose:y,emit:b}){const l=u,r=b,m=f(null),e=h({id:"",todo_type:0,todo_content:"",todo_time:"",wechat_id:l.wechatId,friend_id:l.friendId}),c=f(),k={todo_content:[{required:!0,message:"请输入待办内容"}],todo_time:[{required:!0,message:"请选择时间"}]},w=t=>t.getTime()<B().startOf("day").valueOf(),E=async()=>{var t;await((t=c.value)==null?void 0:t.validate());try{e.id?await O(e):await P(e),i(),r("confirm"),_.msgSuccess("添加成功")}catch(a){_.msgError(a)}},{lockFn:D,isLock:F}=C(E),I=t=>{var a;e.todo_type=t,(a=m.value)==null||a.open()},i=()=>{r("close")};return y({open:I,setFormData:t=>R(t,e)}),(t,a)=>{const g=G,p=H,x=M,v=L;return T(),Y(q,{ref_key:"popupRef",ref:m,title:o(e).todo_type==0?"添加待办":"添加自动跟进",async:"",width:"487px","confirm-button-text":"确认创建","confirm-loading":o(F),onConfirm:o(D),onClose:i},{default:s(()=>[n(v,{ref_key:"formRef",ref:c,model:o(e),"label-position":"top",rules:k},{default:s(()=>[n(p,{label:`请输入需要记录的${o(e).todo_type==0?"代办":"自动跟进"}内容`,prop:"todo_content"},{default:s(()=>[n(g,{modelValue:o(e).todo_content,"onUpdate:modelValue":a[0]||(a[0]=d=>o(e).todo_content=d),type:"textarea",rows:5,placeholder:`请输入${o(e).todo_type==0?"代办":"自动跟进"}内容`},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(p,{label:"日期时间",prop:"todo_time"},{default:s(()=>[n(x,{class:"!w-full",modelValue:o(e).todo_time,"onUpdate:modelValue":a[1]||(a[1]=d=>o(e).todo_time=d),type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",disabled:!!o(e).id,"disabled-date":w,placeholder:"点击选择时间"},null,8,["modelValue","disabled"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","confirm-loading","onConfirm"])}}});export{K as _};
