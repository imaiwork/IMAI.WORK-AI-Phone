import{_ as F}from"./index.vue.421b9ac0.js";import{d as J,r as _,c as j,k as l,I as g,s as p,m as o,q as c,v as x,t as w,Z as a,l as d,K as B,Y as X,J as S,ay as Y,y as Z,av as G,cX as H,_ as P}from"./entry.9c858de7.js";import{E as Q}from"./index.d2366752.js";import{E as W}from"./el-empty.9547ccf9.js";/* empty css                     */import{a as ee}from"./matrix.418b34fe.js";import{CopywritingTypeEnum as oe}from"./index.db2ee73f.js";const te={class:"-my-4"},se={class:"flex justify-between gap-x-2 mt-[18px]"},le={class:"text-[#ffffff80] text-[11px]"},ce={class:"text-white"},ae={class:"flex gap-x-[10px] mt-[18px]"},ne={class:"flex-1 rounded-xl border border-app-border-1 bg-app-bg-2"},re={class:"h-[308px]"},ie={class:"p-3 flex flex-col gap-y-1"},pe=["onClick"],de={class:"flex-1"},fe={class:"w-4 h-4 rounded-full cursor-pointer"},_e={key:1,class:"h-full flex items-center justify-center"},ue={class:"flex-1 rounded-xl border border-app-border-1 bg-app-bg-2"},xe={class:"flex items-center justify-between h-11 border-[0] border-b-[1px] border-app-border-1 px-[10px]"},me={class:"h-[308px]"},ye={class:"p-3 flex flex-col gap-y-2"},ve={class:"flex-1 rounded-md"},be=["onClick"],he={key:1,class:"h-full flex items-center justify-center"},ge={class:"mt-[18px] flex justify-center"},we=J({__name:"kb-copywriting-material",emits:["close","confirm"],setup(ke,{expose:I,emit:N}){const k=N,n=_([]),r=_({}),f=_({oral_copy:[]}),u=j(()=>i.value?{oral_copy:f.value.oral_copy}:{oral_copy:(n.value.find(e=>e.id==r.value.id)||{}).oral_copy||[]}),$=j(()=>f.value.oral_copy.length),T=async()=>{const{lists:t}=await ee({page_size:9999,copywriting_type:oe.CONTENT});t.length>0&&(t.forEach(e=>{e.oral_copy=e.oral_copy.map(y=>({...y,checked:!1}))}),n.value=t,r.value=t[0])},i=_(!1),M=()=>{i.value=!i.value},A=t=>{r.value=t,i.value=!1},C=()=>{const t=n.value.flatMap(e=>e.oral_copy).filter(e=>e.checked);f.value={oral_copy:t}},K=t=>{t.checked=!t.checked,C()},O=()=>{const t=u.value.oral_copy.some(e=>!e.checked);u.value.oral_copy.forEach(e=>{e.checked=t}),C()},m=_(),R=()=>{m.value.open(),n.value=[],f.value={oral_copy:[]},r.value={},i.value=!1,T()},E=()=>{k("close"),m.value.close()},U=()=>{k("confirm",{lists:f.value.oral_copy.map(t=>({content:t.content}))}),E()};return I({open:R}),(t,e)=>{const y=F,v=Y,V=Z,z=Q,L=W,q=G,D=H;return l(),g(D,{ref_key:"popupRef",ref:m,width:"718px","confirm-button-text":"","cancel-button-text":"",style:{"background-color":"var(--app-bg-color-3)",border:"1px solid var(--app-border-color-1)"},"show-close":!1},{default:p(()=>[o("div",te,[o("div",{class:"absolute w-6 h-6 top-4 right-4",onClick:E},[c(y)]),e[6]||(e[6]=o("div",{class:"text-white text-[20px] font-bold"},"口播文案库",-1)),o("div",se,[o("div",le,[e[1]||(e[1]=x(" 已选择",-1)),o("span",ce,"（"+w(a($))+"）",1)]),c(v,{link:"",class:"!text-[#ffffff80] !text-[11px]",onClick:M},{default:p(()=>[x(w(a(i)?"隐藏已选择":"查看已选择"),1)]),_:1})]),o("div",ae,[o("div",ne,[e[2]||(e[2]=o("div",{class:"flex items-center justify-between h-11 border-[0] border-b-[1px] border-app-border-1 px-[10px]"},[o("div",{class:"text-white"},"文案列表")],-1)),o("div",re,[a(n).length>0?(l(),g(z,{key:0,class:"h-full"},{default:p(()=>[o("div",ie,[(l(!0),d(S,null,B(a(n),(s,b)=>(l(),d("div",{class:X(["flex items-center gap-x-3 h-11 px-3 rounded-md text-white border border-app-border-2 text-xs cursor-pointer",[a(r).id==s.id?"bg-app-bg-2":"bg-app-bg-1"]]),key:b,onClick:h=>A(s)},[o("div",de,w(s.name),1),o("div",fe,[c(V,{name:"local-icon-success_fill",size:16,color:a(r).id==s.id?"var(--color-primary)":"#ffffff1a"},null,8,["color"])])],10,pe))),128))])]),_:1})):(l(),d("div",_e,[c(L,{description:"暂无数据","image-size":100})]))])]),o("div",ue,[o("div",xe,[e[4]||(e[4]=o("div",{class:"text-white"},"标题",-1)),c(v,{class:"!border-app-border-2",color:"#1f1f1f",size:"small",onClick:e[0]||(e[0]=s=>O())},{default:p(()=>[...e[3]||(e[3]=[x("全选",-1)])]),_:1})]),o("div",me,[a(u).oral_copy.length>0?(l(),g(z,{key:0,class:"h-full"},{default:p(()=>[o("div",ye,[(l(!0),d(S,null,B(a(u).oral_copy,(s,b)=>(l(),d("div",{class:"flex items-center gap-x-3",key:b},[o("div",ve,[c(q,{modelValue:s.content,"onUpdate:modelValue":h=>s.content=h,type:"textarea",maxlength:"800","show-word-limit":"","input-style":"font-size: 11px",rows:6},null,8,["modelValue","onUpdate:modelValue"])]),o("div",{class:"w-4 h-4 rounded-full cursor-pointer",onClick:h=>K(s)},[c(V,{name:"local-icon-success_fill",size:16,color:s.checked?"var(--color-primary)":"#ffffff1a"},null,8,["color"])],8,be)]))),128))])]),_:1})):(l(),d("div",he,[c(L,{description:"暂无数据","image-size":100})]))])])]),o("div",ge,[c(v,{type:"primary",class:"!rounded-full w-[246px] !h-[50px]",onClick:U},{default:p(()=>[...e[5]||(e[5]=[x("确定",-1)])]),_:1})])])]),_:1},512)}}});const Se=P(we,[["__scopeId","data-v-981e5cbc"]]);export{Se as default};
