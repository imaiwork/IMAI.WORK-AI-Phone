import{d as se,at as le,x as ne,aG as ie,r as w,A as $,cy as re,o as ae,k as m,l as I,m as t,q as o,s as l,Z as i,bM as L,Y as F,a0 as k,t as K,v as p,aI as me,I as E,L as A,J as de,ai as b,G as u,y as pe,ay as ue,cY as ce,u as fe,_ as ve}from"./entry.9c858de7.js";import{E as _e,a as ye}from"./el-collapse.c4926916.js";import{E as xe}from"./el-empty.9547ccf9.js";import{E as ge}from"./el-slider.fd1d8283.js";import{E as we}from"./el-input-number.2e27d67a.js";import{E as ke,a as Ee}from"./index.3c639db8.js";import{_ as be}from"./index.vue.2c8f7917.js";import{E as Ce}from"./index.d2366752.js";/* empty css                        *//* empty css               *//* empty css                 *//* empty css                     */import{u as he}from"./usePaging.c86a33a9.js";import{v as Ve,w as Se}from"./agent.4a5bb123.js";import{_ as $e}from"./keywords-edit.vue.f5fbfbd8.js";import{_ as Ie}from"./workflow-edit.vue.c66f985c.js";import{_ as Fe}from"./import-data.vue.23aadd69.js";import"./index.3d48e529.js";import"./debounce.3f6e2cd0.js";import"./toNumber.590fb445.js";import"./clamp.c33da429.js";import"./index.0a3baecf.js";import"./_baseIteratee.86867911.js";import"./raf.737e07d1.js";import"./index.c162b53f.js";import"./index.bbca104f.js";import"./strings.39ad33fc.js";import"./index.c04086ee.js";import"./index.vue.421b9ac0.js";import"./add-content.cb2cbc0d.js";import"./el-tabs.ecce24d0.js";import"./index.3244d4d2.js";import"./el-alert.a1b88bc1.js";import"./index.5a0721a3.js";import"./index.vue.c3c40281.js";import"./index.31653464.js";import"./index.c8d73379.js";import"./index.3f0b5ea1.js";import"./cloneDeep.051307f4.js";/* empty css                  *//* empty css                    *//* empty css                  */import"./el-image.315c077e.js";import"./el-image-viewer.d6a7ffcb.js";import"./throttle.69751cc4.js";import"./index.vue.c3bc6d51.js";/* empty css                   */import"./arrow_down.70a5466c.js";import"./dom.7f5b5a10.js";import"./index.cf59f1a8.js";import"./emoji.vue.34ef3fd1.js";import"./useHandle.c71e3e80.js";import"./person_wechat.703f63bb.js";import"./mini-program-card.vue.7d4bcb82.js";import"./material-picker.vue.85a68b28.js";import"./index.vue.9c7d0f39.js";import"./sidebar.6c65020f.js";import"./useMaterial.2336b2dc.js";import"./container.71481ae4.js";/* empty css                  */import"./upload.1bea6f09.js";import"./preview.vue.a6b81b59.js";import"./link-card.vue.dbf2e75a.js";import"./file-card.vue.8e501be0.js";import"./el-steps.026da170.js";const Ke={class:"h-full flex flex-col py-6"},Ae={class:"grow min-h-0"},De={class:"px-[30px]"},Re={class:"mt-3"},je={class:"leading-5"},Ne={class:"flex items-center gap-x-2"},ze={class:"leading-5"},Le={class:"flex items-center gap-x-2"},Te={key:0,class:"h-10 rounded-lg bg-[#F5F5F5] mb-3 px-4 flex items-center justify-between gap-x-4"},Ue={class:"flex items-center gap-x-3"},Be={class:"text-xs text-[#666976] bg-[#ECEDF3] px-3 py-1"},Me={key:1,class:"text-center text-[#00000080] text-sm"},Pe={class:"leading-5"},We={class:"flex items-center gap-x-2"},qe={class:"flex items-center justify-between gap-x-6 mb-2 px-4"},Ge={class:"flex items-center w-full gap-x-4"},Ye={class:"flex-1"},Je={class:"border border-[var(--el-border-color-lighter)] rounded-lg"},Ze={class:"h-[64px] flex justify-center items-center"},He={class:"flex items-center justify-center mt-4"},Oe=se({__name:"index",props:le({modelValue:{},agentId:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(D){const _=D,R=fe(),a=ne(D,"modelValue"),T=ie({keyword:"",robot_id:_.agentId}),{pager:c,getLists:f}=he({fetchFun:Ve,params:T}),d=w([]),C=w(!1),h=$(),U=async n=>{var e,r;C.value=!0,await b(),(e=h.value)==null||e.open(),n&&((r=h.value)==null||r.setFormData(n))},B=n=>{_.modelValue.flow_status=1,_.modelValue.flow_config=n},M=()=>{R.$confirm({message:"确定删除该工作流吗？",onConfirm:async()=>{try{a.value.flow_status=0,a.value.flow_config={workflow_id:"",bot_id:"",app_id:"",api_token:""},u.msgSuccess("删除成功")}catch{u.msgError("删除失败")}}})},y=w(!1),x=$(),P=async()=>{var n;y.value=!0,await b(),(n=x.value)==null||n.open()},j=async n=>{var e,r;y.value=!0,await b(),(e=x.value)==null||e.open(),(r=x.value)==null||r.setFormData(n)},W=async n=>{await R.$confirm({message:"确定删除该问答话术吗？",onConfirm:async()=>{try{await Se({id:n}),u.msgSuccess("删除成功"),f()}catch{u.msgError("删除失败")}}})},V=w(!1),N=$(),q=async()=>{var n;V.value=!0,await b(),(n=N.value)==null||n.open()},G=async()=>{try{u.msgSuccess("保存成功")}catch(n){u.msgError(n||"提交失败")}},{lockFn:Y,isLock:J}=re(G);return ae(()=>{f()}),(n,e)=>{const r=pe,S=_e,Z=xe,H=ge,O=we,v=ue,g=ke,Q=Ee,X=be,ee=ye,te=Ce,oe=ce;return m(),I(de,null,[t("div",Ke,[t("div",Ae,[o(te,null,{default:l(()=>[t("div",De,[e[24]||(e[24]=t("div",{class:"font-bold"},"技能",-1)),t("div",Re,[o(ee,{modelValue:i(d),"onUpdate:modelValue":e[8]||(e[8]=s=>L(d)?d.value=s:null)},{default:l(()=>[o(S,{name:"1",disabled:""},{title:l(()=>[t("div",je,[t("div",Ne,[t("span",{class:F(["transition-all duration-300",{"rotate-180":i(d).includes("1")}])},[o(r,{name:"el-icon-ArrowUp",color:"#00000080"})],2),e[12]||(e[12]=t("span",null,"插件",-1)),e[13]||(e[13]=t("span",{class:"text-xs text-white bg-[#FF8D1A] px-[6px] py-[2px] rounded inline-block"}," 功能开发中 ",-1))]),e[14]||(e[14]=t("div",{class:"text-[#00000080] mt-1"}," 插件能够让智能体调用外部 API，例如搜索信息、浏览网页、生成图片等，扩展智能体的能力和使用场景。 ",-1))])]),icon:l(()=>[t("div",{class:"w-5 h-5 bg-[#ECECEC] flex items-center justify-center rounded",onClick:e[0]||(e[0]=k(()=>{},["stop"]))},[o(r,{name:"el-icon-Plus",size:12})])]),_:1}),o(S,{name:"2"},{title:l(()=>[t("div",ze,[t("div",Le,[t("span",{class:F(["transition-all duration-300",{"rotate-180":i(d).includes("2")}])},[o(r,{name:"el-icon-ArrowUp",color:"#00000080"})],2),e[15]||(e[15]=t("span",null,"工作流",-1))]),e[16]||(e[16]=t("div",{class:"text-[#00000080] mt-1"}," 工作流支持通过可视化的方式，对插件、大语言模型、代码块等功能进行组合，从而实现复杂、稳定的业务流程编排。 ",-1))])]),icon:l(()=>[t("div",{class:"w-5 h-5 bg-[#ECECEC] flex items-center justify-center rounded cursor-pointer",onClick:e[1]||(e[1]=k(s=>U(),["stop"]))},[o(r,{name:"el-icon-Plus",size:12})])]),default:l(()=>[t("div",null,[a.value.flow_status===1?(m(),I("div",Te,[t("div",Ue,[o(r,{name:"local-icon-flow2",size:"24"}),t("span",null,K(a.value.flow_config.bot_id),1),t("span",Be," Token："+K(a.value.flow_config.api_token),1)]),t("div",null,[t("div",{class:"w-4 h-4 rounded-full flex items-center justify-center cursor-pointer bg-primary",onClick:e[2]||(e[2]=k(s=>M(),["stop"]))},[o(r,{name:"el-icon-Close",color:"#ffffff",size:"10"})])])])):(m(),I("div",Me,[o(Z,{description:"暂未添加工作流","image-size":80})]))])]),_:1}),o(S,{name:"3"},{title:l(()=>[t("div",Pe,[t("div",We,[t("span",{class:F(["transition-all duration-300",{"rotate-180":i(d).includes("3")}])},[o(r,{name:"el-icon-ArrowUp",color:"#00000080"})],2),e[17]||(e[17]=t("span",null,"固定话术",-1))]),e[18]||(e[18]=t("div",{class:"text-[#00000080] mt-1"}," 固定话术是智能体在对话过程中，根据用户输入的特定关键词，自动回复的固定内容。 ",-1))])]),icon:l(()=>[t("div",{class:"w-5 h-5 bg-[#ECECEC] flex items-center justify-center rounded cursor-pointer",onClick:e[3]||(e[3]=k(s=>P(),["stop"]))},[o(r,{name:"el-icon-Plus",size:12})])]),default:l(()=>[t("div",qe,[t("div",Ge,[e[19]||(e[19]=t("div",null,"模糊匹配阈值",-1)),t("div",Ye,[o(H,{modelValue:a.value.threshold,"onUpdate:modelValue":e[4]||(e[4]=s=>a.value.threshold=s),min:0,max:1,step:.01},null,8,["modelValue"])]),o(O,{modelValue:a.value.threshold,"onUpdate:modelValue":e[5]||(e[5]=s=>a.value.threshold=s),"controls-position":"right",min:0,max:1,step:.01},null,8,["modelValue"])]),o(v,{type:"primary",onClick:e[6]||(e[6]=s=>q())},{default:l(()=>[...e[20]||(e[20]=[p("批量导入",-1)])]),_:1})]),t("div",Je,[me((m(),E(Q,{data:i(c).lists,stripe:"","header-row-style":{height:"62px"},"row-style":{height:"50px"},"max-height":"300px"},{default:l(()=>[o(g,{label:"匹配模式",width:"120"},{default:l(({row:s})=>[p(K(s.match_type===0?"模糊匹配":"精确匹配"),1)]),_:1}),o(g,{label:"匹配内容",prop:"keyword","min-width":"200"}),o(g,{label:"回复内容","min-width":"300"},{default:l(({row:s})=>[o(v,{link:"",type:"primary",onClick:z=>j(s)},{default:l(()=>[...e[21]||(e[21]=[p(" 点击查看 ",-1)])]),_:1},8,["onClick"])]),_:1}),o(g,{label:"操作",width:"120",fixed:"right"},{default:l(({row:s})=>[o(v,{link:"",type:"primary",onClick:z=>j(s)},{default:l(()=>[...e[22]||(e[22]=[p(" 编辑 ",-1)])]),_:1},8,["onClick"]),o(v,{link:"",type:"danger",onClick:z=>W(s.id)},{default:l(()=>[...e[23]||(e[23]=[p(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[oe,i(c).loading]])]),t("div",Ze,[o(X,{modelValue:i(c),"onUpdate:modelValue":e[7]||(e[7]=s=>L(c)?c.value=s:null),layout:"prev, pager, next",onChange:i(f)},null,8,["modelValue","onChange"])])]),_:1})]),_:1},8,["modelValue"])])])]),_:1})]),t("div",He,[o(v,{type:"primary",class:"w-[318px] !rounded-full !h-[50px]",loading:i(J),onClick:i(Y)},{default:l(()=>[...e[25]||(e[25]=[p(" 保存 ",-1)])]),_:1},8,["loading","onClick"])])]),i(y)?(m(),E($e,{key:0,ref_key:"keywordsEditRef",ref:x,onClose:e[9]||(e[9]=s=>y.value=!1),onSuccess:i(f)},null,8,["onSuccess"])):A("",!0),i(C)?(m(),E(Ie,{key:1,ref_key:"workflowEditRef",ref:h,onClose:e[10]||(e[10]=s=>C.value=!1),onSuccess:B},null,512)):A("",!0),i(V)?(m(),E(Fe,{key:2,ref_key:"importKeywordsRef",ref:N,title:"批量导入关键词","agent-id":_.agentId,onClose:e[11]||(e[11]=s=>V.value=!1),onSuccess:i(f)},null,8,["agent-id","onSuccess"])):A("",!0)],64)}}});const mo=ve(Oe,[["__scopeId","data-v-8965eeb1"]]);export{mo as default};
