import{d as I,r as f,aG as V,cy as h,G as d,k as C,I as R,s as c,m as a,q as r,v as m,Z as t,az as b,cX as B,y as N,av as q,aw as z}from"./entry.45b56a4a.js";import{aF as G}from"./person_wechat.703f63bb.js";const L={class:"bg-primary-light-9 p-2 rounded-xl flex items-center gap-2"},$={class:"mt-4"},T=I({__name:"flow-add",emits:["close","success"],setup(A,{expose:u,emit:_}){const i=_,p=f(),n=V({flow_name:""}),v={flow_name:[{required:!0,message:"请输入流程名称"},{validator:(o,e,s)=>{/^[\u4e00-\u9fa5]+$/.test(e)||s(new Error("流程名称只能是汉字")),s()}}]},l=f(),{lockFn:w,isLock:x}=h(async()=>{var o,e;await((o=p.value)==null?void 0:o.validate());try{await G(n),d.msgSuccess("流程创建成功"),(e=l.value)==null||e.close(),i("success")}catch(s){d.msgError(s)}}),g=()=>{var o;(o=l.value)==null||o.open()},y=()=>{i("close")};return u({open:g}),(o,e)=>{const s=N,k=q,E=z;return C(),R(B,{ref_key:"popupRef",ref:l,title:"新建客户流程",width:"500px",async:"","confirm-loading":t(x),onClose:y,onConfirm:t(w)},{default:c(()=>[a("div",null,[a("div",L,[r(s,{name:"local-icon-tip",color:"var(--color-primary)",size:20}),e[1]||(e[1]=a("div",{class:"text-[#636363]"},[m(" 请注意，流程名称"),a("span",{class:"text-error"},"不可重复"),m("；流程名称请勿超过"),a("span",{class:"text-error"},"15个汉字"),m("； ")],-1))]),a("div",$,[r(t(b),{ref_key:"formRef",ref:p,model:t(n),rules:v,"label-position":"top"},{default:c(()=>[r(E,{label:"流程名称",prop:"flow_name"},{default:c(()=>[r(k,{modelValue:t(n).flow_name,"onUpdate:modelValue":e[0]||(e[0]=F=>t(n).flow_name=F),placeholder:"请输入流程名称",maxlength:"15"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])])]),_:1},8,["confirm-loading","onConfirm"])}}});export{T as _};
