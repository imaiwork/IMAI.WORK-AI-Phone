import{E as N,a as R}from"./index.899f58ef.js";import{d as j,bP as z,c as b,r as _,aG as G,cy as K,D as O,f as T,k as c,l as E,m as u,q as s,s as l,Z as o,I as w,J as U,K as J,v as x,L as P,G as F,aw as Z,ay as H,az as M,bK as Q}from"./entry.556496e9.js";/* empty css                  *//* empty css               *//* empty css                     */import{F as W}from"./agent.4a5bb123.js";import{c as X,a as Y}from"./service.557e9b35.js";const $={class:"h-full flex flex-col"},ee={class:"grow min-h-0 w-[600px] px-4"},te={class:"w-full"},oe={class:"flex justify-end mt-2"},ae={class:"flex items-center justify-center my-4"},de=j({__name:"base-setting",emits:["close","success"],setup(se,{emit:V}){const h=V,r=z(),A=b(()=>r.query.account),i=b(()=>r.query.app_type),p=_(),e=G({account:A.value,takeover_mode:0,robot_id:"",account_type:i.value}),L={takeover_mode:[{required:!0,message:"请选择接管类型",trigger:"blur"}],robot_id:[{required:!0,message:"请选择接管机器人AI",trigger:"blur"}]},f=_([]),m=_(!1),g=async a=>{m.value=!0;const t=await W({keyword:a});f.value=t.lists,m.value=!1},q=async()=>{await p.value.validate();try{await X({...e,account_type:i.value}),h("success"),F.msgSuccess("保存成功")}catch(a){F.msgError(a||"提交失败")}},{lockFn:I,isLock:S}=K(q),B=async()=>{const a=await Y({account:r.query.account});Q(a,e)};return O(()=>r.query.account,a=>{a&&(e.account=a,e.account_type=i.value,B(),g())},{immediate:!0}),(a,t)=>{const d=N,k=R,v=Z,y=H,C=T("router-link"),D=M;return c(),E("div",$,[u("div",ee,[s(D,{ref_key:"formRef",ref:p,model:o(e),rules:L,"label-position":"top"},{default:l(()=>[s(v,{label:"接管类型",prop:"takeover_mode"},{default:l(()=>[s(k,{modelValue:o(e).takeover_mode,"onUpdate:modelValue":t[0]||(t[0]=n=>o(e).takeover_mode=n),placeholder:"请选择接管类型"},{default:l(()=>[s(d,{label:"人工接管",value:0}),s(d,{label:"AI接管",value:1})]),_:1},8,["modelValue"])]),_:1}),o(e).takeover_mode===1?(c(),w(v,{key:0,label:"接管机器人AI",prop:"robot_id"},{default:l(()=>[u("div",te,[s(k,{modelValue:o(e).robot_id,"onUpdate:modelValue":t[1]||(t[1]=n=>o(e).robot_id=n),filterable:"",clearable:"",remote:"",placeholder:"请选择接管机器人AI",loading:o(m),"remote-method":g},{default:l(()=>[(c(!0),E(U,null,J(o(f),n=>(c(),w(d,{key:n.id,label:n.name,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"]),u("div",oe,[s(C,{to:"/agent",target:"_blank"},{default:l(()=>[s(y,{link:"",type:"primary",size:"small"},{default:l(()=>[...t[2]||(t[2]=[x(" 点击这里创建您的专属机器人 > ",-1)])]),_:1})]),_:1})])])]),_:1})):P("",!0)]),_:1},8,["model"])]),u("div",ae,[s(y,{type:"primary",class:"w-[166px] !h-[40px]",loading:o(S),onClick:o(I)},{default:l(()=>[...t[3]||(t[3]=[x(" 保存 ",-1)])]),_:1},8,["loading","onClick"])])])}}});export{de as _};
