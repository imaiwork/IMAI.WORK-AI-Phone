import{Q as _,S as I,U as ee,aV as se,d as F,V as ae,W as re,cc as oe,c as i,cd as ne,ce as te,r as u,aU as g,O as ie,D as le,o as ce,k as l,l as d,H as f,m as M,t as ue,Z as s,Y as C,J as j,am as H,L as y,I as de,al as fe,s as L,bd as P,bE as $,aa as ve,ai as pe,bn as me,aq as ge,cf as ye,cg as we,ch as he,ci as Se,an as Le}from"./entry.8705b591.js";import{E as be}from"./el-image-viewer.98cbed9e.js";const ke=_({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:I([String,Object])},previewSrcList:{type:I(Array),default:()=>ee([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},scale:{type:Number,default:1},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:Boolean,crossorigin:{type:I(String)}}),ze={load:n=>n instanceof Event,error:n=>n instanceof Event,switch:n=>se(n),close:()=>!0,show:()=>!0},Ee=F({name:"ElImage",inheritAttrs:!1}),Ie=F({...Ee,props:ke,emits:ze,setup(n,{expose:R,emit:v}){const r=n,{t:q}=ae(),t=re("image"),D=oe(),B=i(()=>ne(Object.entries(D).filter(([e])=>/^(data-|on[A-Z])/i.test(e)||["id","style"].includes(e)))),K=te({excludeListeners:!0,excludeKeys:i(()=>Object.keys(B.value))}),b=u(),p=u(!1),c=u(!0),k=u(!1),w=u(),m=u(),U=g&&"loading"in HTMLImageElement.prototype;let h;const W=i(()=>[t.e("inner"),z.value&&t.e("preview"),c.value&&t.is("loading")]),Z=i(()=>{const{fit:e}=r;return g&&e?{objectFit:e}:{}}),z=i(()=>{const{previewSrcList:e}=r;return ie(e)&&e.length>0}),J=i(()=>{const{previewSrcList:e,initialIndex:o}=r;let a=o;return o>e.length-1&&(a=0),a}),N=i(()=>r.loading==="eager"?!1:!U&&r.loading==="lazy"||r.lazy),E=()=>{g&&(c.value=!0,p.value=!1,b.value=r.src)};function Q(e){c.value=!1,p.value=!1,v("load",e)}function Y(e){c.value=!1,p.value=!0,v("error",e)}function G(e){e&&(E(),V())}const A=Se(G,200,!0);async function O(){var e;if(!g)return;await pe();const{scrollContainer:o}=r;if(me(o))m.value=o;else if(ge(o)&&o!=="")m.value=(e=document.querySelector(o))!=null?e:void 0;else if(w.value){const S=ye(w.value);m.value=we(S)?void 0:S}const{stop:a}=he(w,([S])=>{A(S.isIntersecting)},{root:m});h=a}function V(){!g||!A||(h==null||h(),m.value=void 0,h=void 0)}function T(){z.value&&(k.value=!0,v("show"))}function X(){k.value=!1,v("close")}function x(e){v("switch",e)}return le(()=>r.src,()=>{N.value?(c.value=!0,p.value=!1,V(),O()):E()}),ce(()=>{N.value?O():E()}),R({showPreview:T}),(e,o)=>(l(),d("div",H({ref_key:"container",ref:w},s(B),{class:[s(t).b(),e.$attrs.class]}),[p.value?f(e.$slots,"error",{key:0},()=>[M("div",{class:C(s(t).e("error"))},ue(s(q)("el.image.error")),3)]):(l(),d(j,{key:1},[b.value!==void 0?(l(),d("img",H({key:0},s(K),{src:b.value,loading:e.loading,style:s(Z),class:s(W),crossorigin:e.crossorigin,onClick:T,onLoad:Q,onError:Y}),null,16,["src","loading","crossorigin"])):y("v-if",!0),c.value?(l(),d("div",{key:1,class:C(s(t).e("wrapper"))},[f(e.$slots,"placeholder",{},()=>[M("div",{class:C(s(t).e("placeholder"))},null,2)])],2)):y("v-if",!0)],64)),s(z)?(l(),d(j,{key:2},[k.value?(l(),de(s(be),{key:0,"z-index":e.zIndex,"initial-index":s(J),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"show-progress":e.showProgress,"url-list":e.previewSrcList,scale:e.scale,crossorigin:e.crossorigin,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:X,onSwitch:x},fe({toolbar:L(a=>[f(e.$slots,"toolbar",P($(a)))]),default:L(()=>[e.$slots.viewer?(l(),d("div",{key:0},[f(e.$slots,"viewer")])):y("v-if",!0)]),_:2},[e.$slots.progress?{name:"progress",fn:L(a=>[f(e.$slots,"progress",P($(a)))])}:void 0,e.$slots["viewer-error"]?{name:"viewer-error",fn:L(a=>[f(e.$slots,"viewer-error",P($(a)))])}:void 0]),1032,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","show-progress","url-list","scale","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):y("v-if",!0)],64)):y("v-if",!0)],16))}});var Ce=ve(Ie,[["__file","image.vue"]]);const Be=Le(Ce);export{Be as E};
