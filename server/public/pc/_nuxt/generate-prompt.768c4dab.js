import{d as L,z as N,aH as G,r as m,A as U,cy as j,I as F,s as i,Z as o,bM as x,k as r,q as l,m as e,a0 as H,l as p,J as M,K as $,t as q,v as D,L as k,G as h,ds as J,y as K,ay as O,av as W}from"./entry.8705b591.js";import{E as Y}from"./index.d5b2ab73.js";import{E as Z}from"./index.656bf02e.js";/* empty css                     *//* empty css                   */import{CopywritingTypeEnum as Q}from"./chatEnum.1c450e0f.js";const X={class:"gap-1 flex items-center justify-center"},ee={class:"rounded-xl"},se={class:"flex items-center justify-between"},te={class:"flex items-center gap-2"},oe={class:"mt-4 relative"},le={class:"flex items-center justify-between mt-2"},ae={class:"flex items-center gap-2"},ne={key:0,class:"mt-4"},ie={class:"!text-xs max-h-[500px]"},re={class:"flex flex-col gap-2 content-box"},ce={class:"justify-end flex mt-2"},de={key:1,class:"chat-loader mt-2"},ye=L({__name:"generate-prompt",props:{promptType:{default:Q.AI_DIGITAL_HUMAN_COPYWRITING},maxSize:{default:0},disabled:{type:Boolean,default:!1}},emits:["use-content"],setup(u,{emit:w}){const C=u,E=w,b=N(),{userTokens:I}=G(b),c=m(!1),n=m(""),f=m([]),v=m(!1),T=async()=>{if(I.value<=0){h.msgPowerInsufficient();return}try{v.value=!0;const{reply:t}=await J({message:n.value,prompt_id:C.promptType});f.value.push(t),n.value=""}catch(t){h.msgError(t||"生成失败，请重试")}finally{v.value=!1,b.getUser(),setTimeout(()=>{z()},500)}},y=U(),z=()=>{var t;(t=y.value)==null||t.scrollTo(document.querySelector(".content-box").clientHeight)},B=t=>{E("use-content",t)},{lockFn:R,isLock:g}=j(T);return(t,s)=>{const d=K,_=O,S=W,V=Y,P=Z;return r(),F(P,{visible:o(c),"onUpdate:visible":s[2]||(s[2]=a=>x(c)?c.value=a:null),placement:"right",trigger:"click",width:"375","show-arrow":!1,disabled:u.disabled,"popper-options":{modifiers:[{name:"offset",options:{offset:[-90,40]}}]},"popper-class":"!rounded-xl",class:""},{reference:i(()=>[l(_,{type:"primary",size:"small",class:"!px-1",disabled:u.disabled},{default:i(()=>[e("div",X,[l(d,{name:"local-icon-fabang"}),s[3]||(s[3]=e("span",null,"AI生成文案",-1))])]),_:1},8,["disabled"])]),default:i(()=>[e("div",ee,[e("div",se,[e("div",te,[l(d,{name:"local-icon-fabang",color:"var(--color-primary)",size:22}),s[4]||(s[4]=e("span",{class:"text-primary font-bold"},"AI生成文案",-1))]),e("div",{class:"cursor-pointer leading-[0] hover:bg-token-light-8 rounded-full p-1",onClick:s[0]||(s[0]=a=>c.value=!1)},[l(d,{name:"el-icon-Close",size:22})])]),e("div",oe,[l(S,{modelValue:o(n),"onUpdate:modelValue":s[1]||(s[1]=a=>x(n)?n.value=a:null),type:"textarea",rows:8,autosize:{minRows:8},disabled:o(g),placeholder:"请在此输入您需要生成文案的关键词或内容"},null,8,["modelValue","disabled"]),e("div",le,[l(_,{type:"primary",size:"small",class:"!px-1",disabled:o(g)||!o(n),onClick:H(o(R),["stop"])},{default:i(()=>[e("div",ae,[l(d,{name:"local-icon-fabang",color:"#ffffff"}),s[5]||(s[5]=e("span",null," 开始生成 ",-1))])]),_:1},8,["disabled","onClick"])])]),o(f).length?(r(),p("div",ne,[l(V,{ref_key:"scrollRef",ref:y},{default:i(()=>[e("div",ie,[e("div",re,[(r(!0),p(M,null,$(o(f),(a,A)=>(r(),p("div",{key:A,class:"border border-token-primary rounded-lg p-4"},[e("div",null,q(a),1),e("div",ce,[l(_,{size:"small",onClick:me=>B(a)},{default:i(()=>[...s[6]||(s[6]=[D("使用文案",-1)])]),_:1},8,["onClick"])])]))),128))])])]),_:1},512)])):k("",!0),o(v)?(r(),p("div",de)):k("",!0)])]),_:1},8,["visible","disabled"])}}});export{ye as default};
