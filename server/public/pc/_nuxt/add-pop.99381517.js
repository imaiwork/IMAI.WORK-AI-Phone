import{d as J,au as K,z as X,aH as Z,c as _,dv as w,A as Q,r as C,aG as W,cy as Y,k as r,l as d,q as a,s,Z as e,J as f,K as h,I as U,m as $,v as A,t as ee,L as oe,cX as te,G as B,av as le,aw as ae,az as ne,ay as se}from"./entry.563c232b.js";import{E as re,a as me}from"./index.b6452ee7.js";/* empty css                  *//* empty css               *//* empty css                     */import{g as ue,c as ie}from"./digital_human.299b9036.js";import"./index.9ed38239.js";import"./index.941331c1.js";import"./strings.0730af8d.js";import"./_baseIteratee.4589a236.js";import"./toNumber.590accd9.js";import"./clamp.43011008.js";import"./index.be457d98.js";const de={class:"flex justify-end mt-6"},he=J({__name:"add-pop",emits:["success","close"],setup(ce,{expose:I,emit:R}){var y,E;const T=K(),m=X(),{userTokens:F}=Z(m),L=_(()=>{var n;return(n=T.getDigitalHumanConfig)==null?void 0:n.channel}),H=(y=m.getTokenByScene(w.HUMAN_AUDIO))==null?void 0:y.score,N=(E=m.getTokenByScene(w.HUMAN_AUDIO_PRO))==null?void 0:E.score,c=_(()=>t.model_version==="1"?N:t.model_version==="2"?H:null),p=Q(),v=R,g=C(),t=W({name:"",msg:"",voice_id:"",model_version:""}),q={name:[{required:!0,message:"请输入音频名称"}],msg:[{required:!0,message:"请输入音频内容"}],voice_id:[{required:!0,message:"请选择音色"}],model_version:[{required:!0,message:"请选择模型"}]},D=n=>{b()},k=C([]),b=async()=>{const{lists:n}=await ue({page_no:1,page_size:9999,model_version:t.model_version});k.value=n.length?n.filter(o=>o.status==1):[]};_(()=>".mp3");const O=()=>{p.value.open(),b()},z=async()=>{var n,o;if(F.value<c.value){B.msgPowerInsufficient();return}await((n=g.value)==null?void 0:n.validate());try{await ie(t),(o=p.value)==null||o.close(),m.getUser(),v("success")}catch(u){B.msgError(u||"转写失败！")}},M=()=>{v("close")},{lockFn:P,isLock:V}=Y(z);return I({open:O}),(n,o)=>{const u=le,i=ae,x=re,S=me,G=ne,j=se;return r(),d("div",null,[a(te,{title:"制作音频",ref_key:"popupRef",ref:p,async:!0,width:"500px","confirm-button-text":"","cancel-button-text":"",onClose:M},{default:s(()=>[a(G,{model:e(t),rules:q,ref_key:"formRef",ref:g,"label-position":"top",disabled:e(V)},{default:s(()=>[a(i,{label:"音频名称",prop:"name"},{default:s(()=>[a(u,{modelValue:e(t).name,"onUpdate:modelValue":o[0]||(o[0]=l=>e(t).name=l),placeholder:"请输入音频名称"},null,8,["modelValue"])]),_:1}),a(i,{label:"使用模型",prop:"model_version"},{default:s(()=>[a(S,{modelValue:e(t).model_version,"onUpdate:modelValue":o[1]||(o[1]=l=>e(t).model_version=l),placeholder:"请选择模型",onChange:D},{default:s(()=>[(r(!0),d(f,null,h(e(L),l=>(r(),U(x,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{label:"音色",prop:"voice_id"},{default:s(()=>[a(S,{modelValue:e(t).voice_id,"onUpdate:modelValue":o[2]||(o[2]=l=>e(t).voice_id=l),disabled:!e(t).model_version,placeholder:"请选择音色"},{default:s(()=>[(r(!0),d(f,null,h(e(k),(l,pe)=>(r(),U(x,{value:l.voice_id,label:l.name},null,8,["value","label"]))),256))]),_:1},8,["modelValue","disabled"])]),_:1}),a(i,{label:"音频内容",prop:"msg"},{default:s(()=>[a(u,{modelValue:e(t).msg,"onUpdate:modelValue":o[3]||(o[3]=l=>e(t).msg=l),placeholder:"请输入音频名称",type:"textarea",maxlength:150,"show-word-limit":"",rows:8},null,8,["modelValue"])]),_:1})]),_:1},8,["model","disabled"]),$("div",de,[a(j,{type:"primary",loading:e(V),onClick:e(P)},{default:s(()=>[o[4]||(o[4]=A("开始转写 ",-1)),e(c)?(r(),d(f,{key:0},[A("（消耗"+ee(e(c))+"算力）",1)],64)):oe("",!0)]),_:1},8,["loading","onClick"])])]),_:1},512)])}}});export{he as default};
