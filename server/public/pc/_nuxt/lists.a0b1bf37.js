import{d as pe,a as me,r as m,c as q,aG as ge,A as M,G as h,ai as N,o as fe,k as l,l as r,m as s,t as g,Z as n,dn as _e,dp as ve,q as d,s as f,v as I,J as A,K as L,I as x,bM as he,aI as Ae,a3 as xe,L as _,ay as Ee,y as ye,u as Ce,_ as be}from"./entry.556496e9.js";import{E as ze}from"./index.a390bc0e.js";import{E as we,a as ke}from"./el-tabs.8ece84b9.js";import{E as Se}from"./el-image.2c371257.js";import{_ as Te}from"./handle-menu.vue.65b68a4f.js";import{E as Me}from"./el-empty.5e752bd7.js";/* empty css                   */import"./el-image-viewer.97d3022d.js";import{u as Ne}from"./usePaging.cb2ddca4.js";import{D as Ie,E as Q,C as Le,F as Be,G as Ge,H as Re}from"./agent.4a5bb123.js";import{a as Fe}from"./common.1728c92e.js";import{A as De}from"./agent_bg.520030d5.js";import{AgentTypeEnum as a}from"./index.11e2700c.js";import Pe from"./coze-setting.1a9f7463.js";import{_ as qe}from"./coze-edit.vue.ab53006e.js";import Qe from"./coze-flow-edit.75dffffa.js";import{E as Ve}from"./index.1e989812.js";import"./raf.a745d528.js";import"./strings.09a7c832.js";import"./clamp.b3f2460d.js";import"./toNumber.844d22bd.js";import"./index.74b3694e.js";import"./useTemplate.afda57ca.js";import"./throttle.ede6b671.js";import"./debounce.0430f44a.js";import"./index.vue.83bf2a64.js";import"./coze_bg.a1872e5f.js";import"./index.2280f26b.js";import"./index.eaed1e2d.js";import"./index.65c6aa54.js";import"./cloneDeep.3021ea2e.js";/* empty css                  *//* empty css                    *//* empty css                  */import"./agent-logo.1602151e.js";import"./index.e8affe9d.js";import"./index.4bb9b943.js";import"./_baseIteratee.4a27397d.js";import"./index.899f58ef.js";import"./index.ef7246b4.js";import"./index.c754b099.js";/* empty css                        *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 */const Oe=""+new URL("agent.f48ce1f4.svg",import.meta.url).href,Ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAJKSURBVHic7ZtReoMgEISXfr1XyclqTgY3mz6IibExIA5i0/lf1C9m2R1hWSExE0IIIYQQQghxNK5n4wCGdPqVjj4d4+y2q3Nufv3eABgABGwnAPC9/W/GDmHeX6gkDpuhd1wUwOk1a4TW/jdL0hiHQfMAzMycc83i+Ghl2My+G9p+4IieRKXxsFpj6B13EQB8B3GaiUQfuxi7u2fbLYWdj6g5KD1Bz7RZ6QMNqtoAwLRXC7MX0XoQTlTdMn1hDrHDpvUCPMtQyzqoJ1/5W8qgjdWz5J8JVh561x5EgyLQmRL0BMsn9aAMEiiDBMoggTJIoAwSKMORAkWXMLPrge3u4rPmS09qjOX1M+aiRKt7d4sb2vPL4r7pBiTGlcKwY7XPL2xVrxZi3zZSwIYismiI4b5DUWy4AXHlfCveNuy2lOagMyxl+Nn5bn9QuPJY9MYLUN7Ur865Idnzdg94S7AxHf2Le4opeeOvStKVPKzRzMQyKxfJUz0qoHSIMablW2K2WaCTUCtcGpYFseSmXoXisjc5M7vY6HS0cTi6aVrOiFgLV/SdU+svNrbN3owcqOI8cTaQHPUF7bEeTMCR29MYhWKIFfBEqGR7rzgBZ9izJwQyDyiQbHlGbKwkHUl2vHXeul6i5Y4MEiiDNg4zMHtQSeEVie2doZ1tvJiBBqTpdu/UlGy8LC+6ipAD9x+Mh7kwi89rWdqahLq1x46ny381ap9yy5/7rtFrFrsc9J2/zas8sjas/h2LPDIx5S/f2z8hhBBCCCGEEMfzA0738JPYnH0NAAAAAElFTkSuQmCC",We={class:"h-full flex flex-col p-4"},Ke={class:"rounded-[20px] flex items-center justify-between gap-3 px-[30px]",style:{background:`linear-gradient(152deg, rgba(0, 101, 251, 0.88) -42.44%, rgba(255, 255, 255, 0) 12.19%)
                    rgb(255, 255, 255)`}},Xe={class:"flex items-center gap-3"},Ze={class:"text-[#000000cc]"},He=["onClick"],Ye={class:"flex w-5 h-5 rounded items-center justify-center bg-primary"},je={class:"grow min-h-0 flex flex-col bg-white rounded-[20px] mt-4"},Je=["infinite-scroll-disabled"],$e={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 p-5"},et=["onClick"],tt={class:"w-[72px] h-[72px] bg-white rounded-full p-[5px] absolute left-1/2 -bottom-[20px] -translate-x-1/2"},ot={class:"px-3 mt-10 mb-6 w-full"},st={class:"text-[14px] text-center line-clamp-1"},nt={class:"mt-3 line-clamp-2 text-center text-[#737373] leading-7 h-12"},lt={class:"text-xs text-[#999999] w-full mb-3 px-4"},at={key:0,class:"absolute right-4 bottom-2 z-10 invisible group-hover:visible w-6 h-6"},it={key:0,class:"text-tx-secondary text-center text-xs w-full py-4"},rt={key:1,class:"h-full flex items-center justify-center"},ct=pe({__name:"lists",setup(dt){const v=me(),V=Ce(),O=[{label:"智能体",icon:"local-icon-agent",value:a.AGENT},{label:"Coze智能体",icon:"local-icon-coze_agent",value:a.COZE_AGENT},{label:"Coze工作流",icon:"local-icon-coze_flow",value:a.COZE_FLOW}],i=m(a.AGENT),B=q(()=>O),G=ge({page_no:1}),U=e=>i.value===a.AGENT?Be(e):Ge({...e,type:i.value===a.COZE_AGENT?1:2}),{pager:u,getLists:R,resetPage:E}=Ne({fetchFun:U,params:G,isScroll:!0}),y=m(!1),C=m(!1),b=m(!1),z=M(),w=M(),k=M(),S=m(),F=()=>{var e;return(e=S.value)!=null&&e.id?!0:(h.msgWarning("请先设置Coze配置Token"),D(),!1)},p={[a.AGENT]:e=>j(e),[a.COZE_AGENT]:e=>J(e),[a.COZE_FLOW]:e=>$(e)},W={[a.AGENT]:Ie,[a.COZE_AGENT]:Q,[a.COZE_FLOW]:Q},K=e=>{var t;(t=p[e])==null||t.call(p)},X=e=>{var t;(t=p[i.value])==null||t.call(p,e)},Z=async e=>{await V.$confirm({message:"确定删除吗？",onConfirm:async()=>{try{const t=W[i.value];await t({id:e.id}),u.lists=u.lists.filter(c=>c.id!==e.id),h.msgSuccess("删除成功")}catch{h.msgWarning("删除失败")}}})},H=e=>{v.push({path:"/agent/chatting_log",query:{agent_id:e.id,coze_id:e.coze_id}})},Y=q(()=>{const e=[{label:"编辑",icon:"local-icon-edit3",click:X},{label:"删除",icon:"local-icon-delete",click:Z}];return i.value===a.AGENT&&e.splice(1,0,{label:"对话数据",icon:"local-icon-upload2",click:H}),e}),j=async e=>{if(e)v.push({query:{type:"edit",id:String(e.id)}});else try{const t=await Le({context_num:3,roles_prompt:Fe});v.push({query:{type:"edit",id:String(t.id)}})}catch(t){h.msgError(t||"创建智能体失败")}},J=async e=>{var t,c;F()&&(C.value=!0,await N(),(t=w.value)==null||t.open(),e&&((c=w.value)==null||c.setFormData(e)))},$=async e=>{var t,c;F()&&(b.value=!0,await N(),(t=k.value)==null||t.open(),e!=null&&e.id&&((c=k.value)==null||c.getDetail(e.id)))},D=async()=>{var e,t;y.value=!0,await N(),(e=z.value)==null||e.open(),(t=z.value)==null||t.setFormData(S.value)},ee=e=>{const t=e.paneName;i.value!==t&&(i.value=t,E())},te=e=>{v.push({path:"/agent/chatting",query:{agent_id:String(e.id),coze_id:e.coze_id?String(e.coze_id):void 0,type:i.value}})},oe=async()=>{G.page_no+=1,await R()},P=async()=>{try{S.value=await Re()}catch(e){console.warn("获取Coze配置失败，部分功能可能受限:",e)}};return fe(()=>{R(),P()}),(e,t)=>{const c=Ee,se=ye,ne=ze,le=we,ae=ke,ie=Se,re=Te,ce=Me,de=Ve;return l(),r("div",We,[s("div",Ke,[s("div",Xe,[t[5]||(t[5]=s("img",{src:Oe,class:"w-11 mt-7"},null,-1)),s("div",null,[s("div",Ze,g(n(_e)[n(ve).AGENT]),1),t[4]||(t[4]=s("div",{class:"text-[#00000080]"}," 一键激活模块化智能体，精准执行流程、分析等多类任务，化身全能数字员工。 ",-1))])]),s("div",null,[d(c,{color:"#000000",class:"!h-[30px]",size:"small",onClick:D},{default:f(()=>[...t[6]||(t[6]=[s("img",{src:Ue,class:"w-[18px] h-[16px] mr-2"},null,-1),I(" Coze令牌设置 ",-1)])]),_:1}),d(ne,{"popper-class":"!rounded-xl !p-2",trigger:"click","show-arrow":!1},{reference:f(()=>[d(c,{type:"primary",class:"!h-[30px]",size:"small"},{default:f(()=>[...t[7]||(t[7]=[I("立即创建",-1)])]),_:1})]),default:f(()=>[s("div",null,[(l(!0),r(A,null,L(n(B),(o,T)=>(l(),r("div",{class:"h-11 flex items-center gap-x-2 cursor-pointer px-3 rounded-lg hover:bg-[#F6F6F6] hover:shadow-[0_0_0_1px_rgba(239,239,239,1)]",key:T,onClick:ue=>K(o.value)},[s("span",Ye,[d(se,{name:o.icon,size:"12"},null,8,["name"])]),I(" "+g(o.label),1)],8,He))),128))])]),_:1})])]),s("div",je,[d(ae,{modelValue:n(i),"onUpdate:modelValue":t[0]||(t[0]=o=>he(i)?i.value=o:null),onTabClick:ee},{default:f(()=>[(l(!0),r(A,null,L(n(B),o=>(l(),x(le,{key:o.value,label:o.label,name:o.value},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),Ae((l(),r("div",{class:"grow min-h-0 flex flex-col overflow-y-auto","infinite-scroll-immediate":!1,"infinite-scroll-disabled":!n(u).isLoad,"infinite-scroll-distance":10},[n(u).lists.length?(l(),r(A,{key:0},[s("div",$e,[(l(!0),r(A,null,L(n(u).lists,(o,T)=>(l(),r("div",{key:T,class:"card-item group",onClick:ue=>te(o)},[s("div",{class:"top",style:xe({background:`url(${o.bg_image||n(De)}) center center / cover no-repeat`})},[s("div",tt,[d(ie,{src:o.image||o.avatar,class:"w-full h-full rounded-full",lazy:""},null,8,["src"])])],4),s("div",ot,[s("div",st,g(o.name),1),s("div",nt,g(o.intro||o.introduced),1)]),s("div",lt,"创建人："+g(o.source_text),1),o.source==1?(l(),r("div",at,[d(re,{data:o,"menu-list":n(Y),horizontal:!0},null,8,["data","menu-list"])])):_("",!0)],8,et))),128))]),n(u).isLoad?_("",!0):(l(),r("div",it," 暂无更多了~ "))],64)):(l(),r("div",rt,[d(ce)]))],8,Je)),[[de,oe]])]),n(y)?(l(),x(Pe,{key:0,ref_key:"cozeSettingRef",ref:z,onClose:t[1]||(t[1]=o=>y.value=!1),onSuccess:P},null,512)):_("",!0),n(C)?(l(),x(qe,{key:1,ref_key:"cozeEditRef",ref:w,onClose:t[2]||(t[2]=o=>C.value=!1),onSuccess:n(E)},null,8,["onSuccess"])):_("",!0),n(b)?(l(),x(Qe,{key:2,ref_key:"cozeFlowEditRef",ref:k,onClose:t[3]||(t[3]=o=>b.value=!1),onSuccess:n(E)},null,8,["onSuccess"])):_("",!0)])}}});const so=be(ct,[["__scopeId","data-v-b7c6f8b0"]]);export{so as default};
