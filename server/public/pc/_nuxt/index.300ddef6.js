import{E as U,a as I}from"./index.7002e1fb.js";import{d as P,aG as W,k as p,l as m,m as c,q as l,s as t,Z as o,J as b,K as C,I as g,v as n,t as _,dO as y,aI as H,L as x,bM as O,G as k,aw as j,ay as R,az as q,cY as G,u as X,_ as J}from"./entry.8705b591.js";import{E as K,a as M}from"./index.158d282d.js";import{E as Y}from"./el-empty.a2e85def.js";import{_ as Z}from"./index.vue.c79afe88.js";/* empty css                  *//* empty css               *//* empty css                     *//* empty css                        *//* empty css                 */import{u as Q}from"./usePaging.0c251ebb.js";import{u as ee}from"./useDictOptions.73f577c5.js";import{k as le,r as ae,l as te}from"./service.557e9b35.js";import{z as oe}from"./person_wechat.703f63bb.js";import{h as se}from"./device.b8ac970d.js";import"./index.d5b2ab73.js";import"./index.d9a24f65.js";import"./strings.05ad2423.js";import"./_baseIteratee.889eaccd.js";import"./toNumber.9701a4c1.js";import"./clamp.2d199c02.js";import"./index.f9213b2f.js";import"./debounce.4efe57e2.js";import"./raf.11208e2e.js";const re={class:"h-full flex flex-col bg-app-bg-2 rounded-[20px]"},ne={class:"flex-shrink-0 p-[14px]"},de={class:"flex items-center"},pe={class:"grow min-h-0 overflow-hidden flex flex-col"},ie={class:"grow min-h-0"},ce={class:"flex justify-end items-center"},ue={class:"flex justify-center items-center h-full"},me={class:"flex justify-center p-4"},_e=P({__name:"index",setup(fe){const E=X(),s=W({device_code:"",wechat_no:"",channel:"",exec_type:"",name:"",status:"",page_size:20}),{pager:f,getLists:h,resetParams:A}=Q({fetchFun:le,params:s}),{optionsData:V}=ee({deviceLists:{api:se,params:{page_size:999},transformData:d=>d.lists},wechatLists:{api:oe,params:{page_size:999},transformData:d=>d.lists}}),L=d=>({[y.SPH]:"视频号",[y.XHS]:"小红书"})[d]||"-",S=d=>{E.$confirm({message:"确定重试该记录吗？",theme:"dark",onConfirm:async()=>{try{await ae({id:d}),k.msgSuccess("重试成功"),h()}catch(a){k.msgError(a||"重试失败")}}})},D=async d=>{E.$confirm({message:"确定删除该记录吗？",theme:"dark",onConfirm:async()=>{try{await te({id:d}),k.msgSuccess("删除成功"),h()}catch(a){k.msgError(a||"删除失败")}}})};return h(),(d,a)=>{const r=U,v=I,u=j,w=R,z=q,i=K,T=Y,$=M,B=Z,F=G;return p(),m("div",re,[c("div",ne,[c("div",de,[l(z,{model:o(s),inline:"",class:"w-full -mb-4"},{default:t(()=>[l(u,{label:"执行设备："},{default:t(()=>[l(v,{modelValue:o(s).device_code,"onUpdate:modelValue":a[0]||(a[0]=e=>o(s).device_code=e),class:"!w-[260px] !h-10","popper-class":"dark-select-popper",placeholder:"请选择执行设备",filterable:"",clearable:"","show-arrow":!1},{default:t(()=>[(p(!0),m(b,null,C(o(V).deviceLists,e=>(p(),g(r,{key:e.id,label:e.device_code,value:e.device_code},{default:t(()=>[n(_(e.device_name)+"（"+_(e.device_code)+"） ",1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"添加渠道："},{default:t(()=>[l(v,{modelValue:o(s).channel,"onUpdate:modelValue":a[1]||(a[1]=e=>o(s).channel=e),class:"!w-[260px] !h-10","popper-class":"dark-select-popper",placeholder:"请选择添加渠道",filterable:"",clearable:"","show-arrow":!1},{default:t(()=>[l(r,{label:"小红书",value:o(y).XHS},null,8,["value"]),l(r,{label:"视频号",value:o(y).SPH},null,8,["value"])]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"执行类型："},{default:t(()=>[l(v,{modelValue:o(s).exec_type,"onUpdate:modelValue":a[2]||(a[2]=e=>o(s).exec_type=e),class:"!w-[260px] !h-10","popper-class":"dark-select-popper",placeholder:"请选择执行类型",filterable:"",clearable:"","show-arrow":!1},{default:t(()=>[l(r,{label:"私信聊天",value:"1"},null,8,["value"]),l(r,{label:"自动爬取",value:"2"},null,8,["value"]),l(r,{label:"自动私信",value:"3"},null,8,["value"])]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"添加微信："},{default:t(()=>[l(v,{modelValue:o(s).wechat_no,"onUpdate:modelValue":a[3]||(a[3]=e=>o(s).wechat_no=e),class:"!w-[260px] !h-10","popper-class":"dark-select-popper",placeholder:"请选择添加微信",filterable:"",clearable:"","show-arrow":!1},{default:t(()=>[(p(!0),m(b,null,C(o(V).wechatLists,e=>(p(),g(r,{key:e.id,label:e.wechat_nickname,value:e.wechat_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"加微结果："},{default:t(()=>[l(v,{modelValue:o(s).status,"onUpdate:modelValue":a[4]||(a[4]=e=>o(s).status=e),class:"!w-[260px] !h-10","popper-class":"dark-select-popper",placeholder:"请选择加微结果",filterable:"",clearable:"","empty-values":[void 0,null],"show-arrow":!1},{default:t(()=>[l(r,{label:"全部",value:""}),l(r,{label:"失败",value:"0"}),l(r,{label:"成功",value:"1"}),l(r,{label:"执行中",value:"2"})]),_:1},8,["modelValue"])]),_:1}),l(u,null,{default:t(()=>[l(w,{type:"primary",class:"!h-10 !rounded-full w-[140px]",onClick:a[5]||(a[5]=e=>o(h)())},{default:t(()=>[...a[8]||(a[8]=[n("搜索",-1)])]),_:1}),l(w,{color:"#181818",class:"!h-10 !rounded-full w-[140px] !border-app-border-2",onClick:a[6]||(a[6]=e=>o(A)())},{default:t(()=>[...a[9]||(a[9]=[n("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])])]),c("div",pe,[c("div",ie,[H((p(),g($,{height:"100%",data:o(f).lists,"header-row-style":{height:"62px"},"row-style":{height:"50px"}},{empty:t(()=>[c("div",ue,[l(T,{description:"暂无数据"})])]),default:t(()=>[l(i,{prop:"device_code",label:"执行设备",width:"240",fixed:"left"},{default:t(({row:e})=>[n(_(e.device_name||"-")+"（"+_(e.device_code)+"） ",1)]),_:1}),l(i,{label:"添加渠道",width:"140"},{default:t(({row:e})=>[n(_(L(e.channel)),1)]),_:1}),l(i,{label:"执行类型",width:"140"},{default:t(({row:e})=>[e.exec_type=="1"?(p(),m(b,{key:0},[n("私信聊天")],64)):x("",!0),e.exec_type=="2"?(p(),m(b,{key:1},[n("自动爬取")],64)):x("",!0),e.exec_type=="3"?(p(),m(b,{key:2},[n("自动私信")],64)):x("",!0)]),_:1}),l(i,{prop:"original_message",label:"匹配内容","min-width":"200","show-overflow-tooltip":""}),l(i,{prop:"reg_wechat",label:"提取内容","min-width":"160"}),l(i,{prop:"wechat_name",label:"添加微信","min-width":"120"},{default:t(({row:e})=>[n(_(e.wechat_name||"-"),1)]),_:1}),l(i,{prop:"result",label:"加好友结果","min-width":"120","show-overflow-tooltip":""}),l(i,{prop:"create_time",label:"创建时间",width:"180"}),l(i,{label:"操作",width:"120",fixed:"right",align:"right"},{default:t(({row:e})=>[c("div",ce,[e.status==0?(p(),g(w,{key:0,class:"!border-app-border-2",color:"#181818",size:"small",onClick:N=>S(e.id)},{default:t(()=>[...a[10]||(a[10]=[n("重试",-1)])]),_:1},8,["onClick"])):x("",!0),l(w,{type:"danger",link:"",size:"small",onClick:N=>D(e.id)},{default:t(()=>[...a[11]||(a[11]=[n("删除",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])),[[F,o(f).loading]])]),c("div",me,[l(B,{modelValue:o(f),"onUpdate:modelValue":a[7]||(a[7]=e=>O(f)?f.value=e:null),layout:"prev, pager, next",onChange:o(h)},null,8,["modelValue","onChange"])])])])}}});const We=J(_e,[["__scopeId","data-v-062892a1"]]);export{We as default};
