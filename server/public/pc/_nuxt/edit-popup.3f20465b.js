import{d as B,z as D,aH as F,c as R,r as k,aG as S,cy as I,k as h,I as N,s as n,q as s,Z as t,az as T,m as q,v as E,cX as z,dv as G,G as w,bK as L,av as U,aw as K,ay as j}from"./entry.45b56a4a.js";import{f as A,g as H}from"./knowledge_base.519704cc.js";const O={class:"flex justify-end mt-6 -mb-4"},M=B({__name:"edit-popup",emits:["close","success"],setup(W,{expose:x,emit:y}){const i=y,m=D(),{getTokenByScene:b}=m;F(m),R(()=>{var o;return(o=b(G.KNOWLEDGE_CREATE))==null?void 0:o.score});const r=k(),d=k(),a=S({id:"",name:"",description:""}),v={name:[{required:!0,message:"请输入知识库名称"}],description:[{required:!0,message:"请输入知识库描述"}]},C=()=>{var o;(o=r.value)==null||o.open()},u=()=>{i("close")},V=async()=>{var o,e;await((o=d.value)==null?void 0:o.validate());try{await A(a),w.msgSuccess("操作成功"),(e=r.value)==null||e.close(),i("success")}catch(l){w.msgError(l)}},{lockFn:p,isLock:f}=I(V);return x({open:C,getDetail:async o=>{const e=await H({id:o});L(e,a)}}),(o,e)=>{const l=U,_=K,g=j;return h(),N(z,{ref_key:"popupRef",ref:r,async:"",title:"编辑知识库",width:"550px","confirm-loading":t(f),"confirm-button-text":"","cancel-button-text":"",onClose:u,onConfirm:t(p)},{default:n(()=>[s(t(T),{ref_key:"formRef",ref:d,model:t(a),rules:v,"label-position":"top"},{default:n(()=>[s(_,{label:"知识库名称",prop:"name"},{default:n(()=>[s(l,{modelValue:t(a).name,"onUpdate:modelValue":e[0]||(e[0]=c=>t(a).name=c),"show-word-limit":"",maxlength:"12",placeholder:"请输入知识库名称"},null,8,["modelValue"])]),_:1}),s(_,{label:"知识库描述",prop:"description"},{default:n(()=>[s(l,{modelValue:t(a).description,"onUpdate:modelValue":e[1]||(e[1]=c=>t(a).description=c),"show-word-limit":"",maxlength:"1000",type:"textarea",resize:"none",placeholder:"请输入知识库描述",rows:8},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),q("div",O,[s(g,{onClick:u},{default:n(()=>[...e[2]||(e[2]=[E("取消",-1)])]),_:1}),s(g,{type:"primary",loading:t(f),onClick:t(p)},{default:n(()=>[...e[3]||(e[3]=[E(" 确定 ",-1)])]),_:1},8,["loading","onClick"])])]),_:1},8,["confirm-loading","onConfirm"])}}});export{M as default};
