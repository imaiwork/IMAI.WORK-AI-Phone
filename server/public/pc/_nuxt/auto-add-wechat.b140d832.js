import{E as D,a as I}from"./index.899f58ef.js";import{d as L,bP as B,c as C,r as S,aG as W,cy as q,G as f,D as U,k as u,l as h,m as r,q as e,s,Z as o,J as z,K as N,I as O,v as R,aw as T,y as $,ba as G,av as K,az as j,ay as J,bK as P,_ as Z}from"./entry.556496e9.js";/* empty css                  *//* empty css               *//* empty css                     */import{u as H}from"./useDictOptions.8bb858a6.js";import{u as M,b as Q}from"./service.557e9b35.js";import{z as X}from"./person_wechat.703f63bb.js";import"./index.4bb9b943.js";import"./index.ef7246b4.js";import"./strings.09a7c832.js";import"./_baseIteratee.4a27397d.js";import"./toNumber.844d22bd.js";import"./clamp.b3f2460d.js";import"./index.c754b099.js";const Y={class:"px-4 flex flex-col h-full gap-4"},ee={class:"grow min-h-0"},te={class:"grid grid-cols-2 gap-x-10"},ae={class:"flex items-center gap-2"},oe={class:"cursor-pointer leading-[0]"},le={class:"flex items-center justify-center my-4"},se=L({__name:"auto-add-wechat",setup(ne){const m=B(),p=C(()=>m.query.account),_=S(),a=W({account:p.value,account_type:3,remark:"",wechat_enable:0,wechat_reg_type:0,wechat_id:[]}),w={wechat_id:[{required:!0,message:"请选择添加好友的微信号"}]},{optionsData:b}=H({wechatLists:{api:X,params:{page_size:999},transformData:n=>n.lists}}),{lockFn:g,isLock:v}=q(async()=>{var n;await((n=_.value)==null?void 0:n.validate());try{await M(a),f.msgSuccess("保存成功")}catch(t){f.msgError(t||"保存失败")}}),y=async()=>{const n=await Q({account:p.value});P(n,a)};return U(()=>m.query.account,n=>{n&&(a.account=n,y())},{immediate:!0}),(n,t)=>{const c=D,d=I,i=T,k=$,E=G,x=K,V=j,F=J;return u(),h("div",Y,[r("div",ee,[e(V,{ref_key:"formRef",ref:_,model:o(a),"label-position":"top",rules:w},{default:s(()=>[r("div",te,[e(i,{label:"加微策略"},{default:s(()=>[e(d,{modelValue:o(a).wechat_enable,"onUpdate:modelValue":t[0]||(t[0]=l=>o(a).wechat_enable=l),placeholder:"请选择加微策略"},{default:s(()=>[e(c,{label:"自动添加",value:1}),e(c,{label:"不执行加微",value:0})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"加微匹配规则"},{default:s(()=>[e(d,{modelValue:o(a).wechat_reg_type,"onUpdate:modelValue":t[1]||(t[1]=l=>o(a).wechat_reg_type=l),"empty-values":[null,void 0],placeholder:"请选择加微匹配规则"},{default:s(()=>[e(c,{label:"全部",value:0}),e(c,{label:"微信号",value:1}),e(c,{label:"手机号",value:2})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"添加好友的微信号",prop:"wechat_id"},{label:s(()=>[r("div",ae,[e(E,{content:"一个微信号短频（2小时）大约搜索添加次数在15次左右，请尽量选择多微信进行好友添加"},{default:s(()=>[r("div",oe,[e(k,{name:"el-icon-WarningFilled",class:"text-red-500"})])]),_:1}),t[4]||(t[4]=r("span",null,"添加好友的微信号",-1))])]),default:s(()=>[e(d,{modelValue:o(a).wechat_id,"onUpdate:modelValue":t[2]||(t[2]=l=>o(a).wechat_id=l),filterable:"",multiple:"",clearable:"",placeholder:"请选择添加好友的微信号"},{default:s(()=>[(u(!0),h(z,null,N(o(b).wechatLists,(l,A)=>(u(),O(c,{key:A,label:`${l.wechat_nickname}(${l.wechat_id})`,value:l.wechat_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"加微备注信息"},{default:s(()=>[e(x,{modelValue:o(a).remark,"onUpdate:modelValue":t[3]||(t[3]=l=>o(a).remark=l),type:"textarea",placeholder:"请输入加微备注信息",rows:5},null,8,["modelValue"])]),_:1})])]),_:1},8,["model"])]),r("div",le,[e(F,{type:"primary",class:"w-[166px] !h-[40px]",loading:o(v),onClick:o(g)},{default:s(()=>[...t[5]||(t[5]=[R(" 保存 ",-1)])]),_:1},8,["loading","onClick"])])])}}});const ke=Z(se,[["__scopeId","data-v-6f20aef7"]]);export{ke as default};
