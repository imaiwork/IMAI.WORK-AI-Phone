import{E as $,a as N}from"./index.899f58ef.js";import{d as S,aG as T,k as m,l as v,m as g,q as e,s as l,Z as o,J as k,K as x,I as h,v as c,t as U,L as z,bM as I,G as b,aw as R,ay as W,az as O,u as P,_ as q}from"./entry.556496e9.js";import{E as G,a as j}from"./index.e8affe9d.js";import{E as J}from"./el-empty.5e752bd7.js";import{_ as K}from"./index.vue.ba665940.js";/* empty css                  *//* empty css               *//* empty css                     *//* empty css                        *//* empty css                 */import{u as M}from"./usePaging.cb2ddca4.js";import{u as Z}from"./useDictOptions.8bb858a6.js";import{k as H,g as Q,r as X,l as Y}from"./service.557e9b35.js";import{z as ee}from"./person_wechat.703f63bb.js";import"./index.4bb9b943.js";import"./index.ef7246b4.js";import"./strings.09a7c832.js";import"./_baseIteratee.4a27397d.js";import"./toNumber.844d22bd.js";import"./clamp.b3f2460d.js";import"./index.c754b099.js";import"./debounce.0430f44a.js";import"./raf.a745d528.js";const te={class:"flex flex-col h-full bg-white rounded-[20px]"},ae={class:"p-4"},le={class:"grow min-h-0"},oe={class:"flex justify-end p-4"},se=S({__name:"index",setup(ne){const y=P(),s=T({account:"",wechat_no:"",action:"",status:""}),{pager:_,getLists:d,resetParams:V}=M({fetchFun:H,params:s}),{optionsData:E}=Z({redbookLists:{api:Q,params:{page_size:999},transformData:r=>r.lists},wechatLists:{api:ee,params:{page_size:999},transformData:r=>r.lists}}),C=r=>{y.$confirm({message:"确定重试该记录吗？",onConfirm:async()=>{try{await X({id:r}),d(),b.msgSuccess("重试成功")}catch(t){b.msgError(t||"重试失败")}}})},A=r=>{y.$confirm({message:"确定删除该记录吗？",onConfirm:async()=>{try{await Y({id:r}),d(),b.msgSuccess("删除成功")}catch(t){b.msgError(t||"删除失败")}}})};return d(),(r,t)=>{const i=$,f=N,p=R,w=W,L=O,n=G,B=J,D=j,F=K;return m(),v("div",te,[g("div",ae,[e(L,{model:o(s),inline:"",class:"w-full"},{default:l(()=>[e(p,{label:"来源账号"},{default:l(()=>[e(f,{modelValue:o(s).account,"onUpdate:modelValue":t[0]||(t[0]=a=>o(s).account=a),class:"!w-[200px]",placeholder:"请选择来源账号"},{default:l(()=>[(m(!0),v(k,null,x(o(E).redbookLists,(a,u)=>(m(),h(i,{key:u,label:a.nickname,value:a.account},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"执行微信"},{default:l(()=>[e(f,{modelValue:o(s).wechat_no,"onUpdate:modelValue":t[1]||(t[1]=a=>o(s).wechat_no=a),class:"!w-[200px]",placeholder:"请选择执行微信"},{default:l(()=>[(m(!0),v(k,null,x(o(E).wechatLists,(a,u)=>(m(),h(i,{key:u,label:a.wechat_nickname,value:a.wechat_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"执行动作"},{default:l(()=>[e(f,{modelValue:o(s).action,"onUpdate:modelValue":t[2]||(t[2]=a=>o(s).action=a),class:"!w-[200px]",placeholder:"请选择执行动作","empty-values":[null,void 0]},{default:l(()=>[e(i,{label:"自动添加",value:""})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"执行结果"},{default:l(()=>[e(f,{modelValue:o(s).status,"onUpdate:modelValue":t[3]||(t[3]=a=>o(s).status=a),class:"!w-[200px]",placeholder:"请选择执行结果","empty-values":[null,void 0]},{default:l(()=>[e(i,{label:"全部",value:""}),e(i,{label:"成功",value:"1"}),e(i,{label:"失败",value:"2"})]),_:1},8,["modelValue"])]),_:1}),e(p,null,{default:l(()=>[e(w,{type:"primary",onClick:t[4]||(t[4]=a=>o(d)())},{default:l(()=>[...t[6]||(t[6]=[c(" 搜索 ",-1)])]),_:1}),e(w,{onClick:o(V)},{default:l(()=>[...t[7]||(t[7]=[c(" 重置 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),g("div",le,[e(D,{data:o(_).lists,height:"100%","row-style":{height:"60px"}},{empty:l(()=>[e(B,{description:"暂无数据"})]),default:l(()=>[e(n,{prop:"device_code",label:"设备码",width:"180"}),e(n,{prop:"account",label:"来源账号",width:"150"}),e(n,{prop:"user_account",label:"小红书用户信息","min-width":"180"}),e(n,{prop:"original_message",label:"私信内容","min-width":"180","show-overflow-tooltip":""}),e(n,{prop:"reg_wechat",label:"匹配微信号","min-width":"180"}),e(n,{prop:"wechat_name",label:"执行微信","min-width":"160"},{default:l(({row:a})=>[c(U(a.wechat_name||"-"),1)]),_:1}),e(n,{label:"执行动作",width:"120"},{default:l(({row:a})=>[...t[8]||(t[8]=[g("div",null,"自动添加",-1)])]),_:1}),e(n,{prop:"result",label:"加微结果","min-width":"180"}),e(n,{label:"操作",fixed:"right",width:"100"},{default:l(({row:a})=>[a.status==0?(m(),h(w,{key:0,type:"primary",link:"",onClick:u=>C(a.id)},{default:l(()=>[...t[9]||(t[9]=[c("重试",-1)])]),_:1},8,["onClick"])):z("",!0),e(w,{type:"danger",link:"",onClick:u=>A(a.id)},{default:l(()=>[...t[10]||(t[10]=[c("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),g("div",oe,[e(F,{modelValue:o(_),"onUpdate:modelValue":t[5]||(t[5]=a=>I(_)?_.value=a:null),onChange:o(d)},null,8,["modelValue","onChange"])])])}}});const De=q(se,[["__scopeId","data-v-ef56e1f4"]]);export{De as default};
