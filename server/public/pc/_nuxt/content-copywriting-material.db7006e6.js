import{_ as P}from"./index.vue.fdfa7631.js";import{E as Q,a as W}from"./index.def52f2a.js";import{d as ee,r as b,c as L,k as c,I as g,s as r,m as t,q as n,Z as i,cZ as te,l as a,K as k,J as w,bM as oe,v as f,t as z,Y as le,L as se,ay as ne,av as ce,y as ie,cX as ae,_ as re}from"./entry.45b56a4a.js";import{E as de}from"./index.515d6243.js";import{E as pe}from"./el-empty.2f864f77.js";/* empty css                  *//* empty css               *//* empty css                     */import{a as ue}from"./matrix.418b34fe.js";import{CopywritingTypeEnum as fe}from"./index.db2ee73f.js";import"./index.386b5c03.js";import"./strings.2a3b34b9.js";import"./_baseIteratee.2c25c469.js";import"./toNumber.7157a344.js";import"./clamp.2ad9aed4.js";import"./index.1bb131e0.js";const _e={class:"-my-4"},me={class:"mt-[17px]"},ve={class:"flex justify-between items-center gap-x-2 mt-4"},he={class:"flex gap-x-2"},xe={class:"text-[#ffffff80] text-[11px]"},be={class:"text-white"},ye={class:"text-[#ffffff80] text-[11px]"},ge={class:"text-white"},ke={class:"flex gap-x-[10px] mt-[18px]"},we={class:"basis-[45%] flex-shrink-0 rounded-xl border border-app-border-1 bg-app-bg-2"},Ce={class:"flex items-center justify-between h-11 border-[0] border-b-[1px] border-app-border-1 px-[10px]"},Ee={class:"h-[350px]"},Ve={class:"p-3 flex flex-col gap-y-2"},Le={class:"flex-1"},ze=["onClick"],Se={key:1,class:"h-full flex items-center justify-center"},Te={class:"flex-auto rounded-xl border border-app-border-1 bg-app-bg-2"},$e={class:"flex items-center justify-between h-11 border-[0] border-b-[1px] border-app-border-1 px-[10px]"},je={class:"h-[350px]"},Ue={class:"p-3 flex flex-col gap-y-3"},Be={class:"flex-1"},Ie={class:"relative mt-4 flex gap-x-2 items-end"},Me={class:"flex-1 flex flex-wrap gap-2"},Ae=["onClick"],De={key:0,class:""},Ne=["onClick"],Re={key:1,class:"h-full flex items-center justify-center"},Fe={class:"mt-[18px] flex justify-center"},Ke=ee({__name:"content-copywriting-material",emits:["close","confirm"],setup(Oe,{expose:A,emit:D}){const S=D,_=b([]),d=b({title:[],described:[]}),m=b(),p=L(()=>{if(v.value)return{title:d.value.title,described:d.value.described};const o=_.value.find(e=>e.id==m.value)||{};return{title:o.title||[],described:o.described||[]}}),N=L(()=>d.value.title.length),R=L(()=>d.value.described.length),F=()=>{v.value=!1},K=async()=>{const{lists:o}=await ue({page_size:9999,copywriting_type:fe.TITLE});o.length>0&&(o.forEach(e=>{e.title=e.title.map(s=>({...s,checked:!1})),e.described=e.described.map(s=>({...s,checked:!1}))}),_.value=o,m.value=o[0].id)},O=o=>{const{described:e}=p.value;e[o].topic||(e[o].topic=[]),e[o].topic.push("")},Z=(o,e)=>{const{described:s}=p.value;s[o].topic&&s[o].topic.splice(e,1)},v=b(!1),q=()=>{v.value=!v.value},T=()=>{const o=_.value.flatMap(s=>s.title).filter(s=>s.checked),e=_.value.flatMap(s=>s.described).filter(s=>s.checked);d.value={title:o,described:e}},$=(o,e)=>{e.checked=!e.checked,T()},j=o=>{const e=p.value[o].some(s=>!s.checked);p.value[o].forEach(s=>{s.checked=e}),T()},C=b(),J=()=>{C.value.open(),_.value=[],d.value={title:[],described:[]},m.value=void 0,v.value=!1,K()},U=()=>{S("close"),C.value.close()},X=()=>{S("confirm",{titleList:d.value.title.map(o=>({content:o.content})),contentList:d.value.described.map(o=>({content:o.content,topic:o.topic}))}),U()};return A({open:J}),(o,e)=>{const s=P,Y=Q,G=W,h=ne,E=ce,V=ie,B=de,I=pe,H=ae;return c(),g(H,{ref_key:"popupRef",ref:C,width:"718px","confirm-button-text":"","cancel-button-text":"",style:{"background-color":"var(--app-bg-color-3)",border:"1px solid var(--app-border-color-1)"},"show-close":!1},{default:r(()=>[t("div",_e,[t("div",{class:"absolute w-6 h-6 top-4 right-4",onClick:U},[n(s,{theme:i(te).DARK},null,8,["theme"])]),e[11]||(e[11]=t("div",{class:"text-white text-[20px] font-bold"},"内容文案库",-1)),t("div",me,[n(G,{modelValue:i(m),"onUpdate:modelValue":e[0]||(e[0]=l=>oe(m)?m.value=l:null),class:"!w-[314px] !h-11",placeholder:"请选择","popper-class":"dark-select-popper",clearable:"",filterable:"","show-arrow":!1,onChange:F},{default:r(()=>[(c(!0),a(w,null,k(i(_),l=>(c(),g(Y,{label:l.name,value:l.id,key:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),t("div",ve,[t("div",he,[t("div",xe,[e[3]||(e[3]=f(" 已选择标题",-1)),t("span",be,"（"+z(i(N))+"）",1)]),t("div",ye,[e[4]||(e[4]=f(" 已选择正文",-1)),t("span",ge,"（"+z(i(R))+"）",1)])]),n(h,{link:"",class:"!text-[#ffffff80] !text-[11px]",onClick:q},{default:r(()=>[f(z(i(v)?"隐藏已选择":"查看已选择"),1)]),_:1})]),t("div",ke,[t("div",we,[t("div",Ce,[e[6]||(e[6]=t("div",{class:"text-white"},"标题",-1)),n(h,{class:"!border-app-border-2",color:"#1f1f1f",size:"small",onClick:e[1]||(e[1]=l=>j("title"))},{default:r(()=>[...e[5]||(e[5]=[f("全选",-1)])]),_:1})]),t("div",Ee,[i(p).title.length>0?(c(),g(B,{key:0,class:"h-full"},{default:r(()=>[t("div",Ve,[(c(!0),a(w,null,k(i(p).title,(l,x)=>(c(),a("div",{class:"flex items-center gap-x-3",key:x},[t("div",Le,[n(E,{modelValue:l.content,"onUpdate:modelValue":u=>l.content=u,class:"!h-11",clearable:"",maxlength:"20","show-word-limit":"",placeholder:"-","input-style":"font-size: 11px"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",{class:"w-4 h-4 rounded-full cursor-pointer",onClick:u=>$("title",l)},[n(V,{name:"local-icon-success_fill",size:16,color:l.checked?"var(--color-primary)":"#ffffff1a"},null,8,["color"])],8,ze)]))),128))])]),_:1})):(c(),a("div",Se,[n(I,{description:"暂无数据","image-size":100})]))])]),t("div",Te,[t("div",$e,[e[8]||(e[8]=t("div",{class:"text-white"},"正文描述",-1)),n(h,{class:"!border-app-border-2",color:"#1f1f1f",size:"small",onClick:e[2]||(e[2]=l=>j("described"))},{default:r(()=>[...e[7]||(e[7]=[f("全选",-1)])]),_:1})]),t("div",je,[i(p).described.length>0?(c(),g(B,{key:0,class:"h-full"},{default:r(()=>[t("div",Ue,[(c(!0),a(w,null,k(i(p).described,(l,x)=>(c(),a("div",{class:"flex items-center gap-x-3",key:x},[t("div",Be,[t("div",null,[n(E,{modelValue:l.content,"onUpdate:modelValue":u=>l.content=u,type:"textarea",maxlength:"800","show-word-limit":"",rows:6},null,8,["modelValue","onUpdate:modelValue"])]),t("div",Ie,[t("div",Me,[(c(!0),a(w,null,k(l.topic,(u,y)=>(c(),a("div",{key:y,class:le(["relative text-[11px] rounded-md shadow-[0_0_0_1px_rgba(255,255,255,0.1)]",{"bg-app-bg-4":u}])},[n(E,{modelValue:l.topic[y],"onUpdate:modelValue":M=>l.topic[y]=M,class:"h-[26px] !w-[78px]",placeholder:"#请输入话题","input-style":"font-size: 11px;height: 100%"},null,8,["modelValue","onUpdate:modelValue"]),t("div",{class:"absolute -top-2 -right-2 w-4 h-4 rounded-full flex items-center justify-center bg-[#FF3C26] cursor-pointer",onClick:M=>Z(x,y)},[n(V,{name:"local-icon-close",color:"#ffffff"})],8,Ae)],2))),128))]),l.topic.length<5?(c(),a("div",De,[n(h,{type:"primary",class:"!h-[26px]",onClick:u=>O(x)},{default:r(()=>[...e[9]||(e[9]=[f("添加话题",-1)])]),_:1},8,["onClick"])])):se("",!0)])]),t("div",{class:"w-4 h-4 rounded-full cursor-pointer",onClick:u=>$("described",l)},[n(V,{name:"local-icon-success_fill",size:16,color:l.checked?"var(--color-primary)":"#ffffff1a"},null,8,["color"])],8,Ne)]))),128))])]),_:1})):(c(),a("div",Re,[n(I,{description:"暂无数据","image-size":100})]))])])]),t("div",Fe,[n(h,{type:"primary",class:"!rounded-full w-[246px] !h-[50px]",onClick:X},{default:r(()=>[...e[10]||(e[10]=[f("确定",-1)])]),_:1})])])]),_:1},512)}}});const ct=re(Ke,[["__scopeId","data-v-2c193b52"]]);export{ct as default};
