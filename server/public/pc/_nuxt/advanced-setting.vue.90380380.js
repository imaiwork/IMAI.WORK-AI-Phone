import{_ as z}from"./index.vue.3f013733.js";import{E as F}from"./el-switch.e7de3b12.js";import{a as J,E as K}from"./index.7002e1fb.js";import{d as P,at as T,aG as G,r as w,x as L,A as Z,by as g,bK as q,k as c,l as n,q as i,s as m,m as t,Z as a,cZ as W,J as u,bM as H,K as y,I as V,L as _,t as Q,v as X,G as Y,y as ee,ay as oe,ai as te}from"./entry.8705b591.js";import{_ as se}from"./index.4557d148.js";import{E as le}from"./index.656bf02e.js";import{E as ae}from"./index.d5b2ab73.js";import{E as ce}from"./index.92324cf0.js";/* empty css                  *//* empty css               *//* empty css                     *//* empty css                   *//* empty css                  */import{A as ie}from"./choose-audio.1fa11988.js";import{ClipStyleMap as ne}from"./indexEnum.66dc19ba.js";const re={class:"h-full flex flex-col"},pe={class:"mx-4 border-b border-app-border-1 pb-4"},fe={class:"flex justify-between items-center"},de={class:"mt-3"};const me={key:0,class:"grow min-h-0 pb-[100px]"},ue={class:"flex flex-col gap-y-2 px-4"},_e={class:"flex-1 flex items-center gap-x-2"},he={class:"w-5 h-5 flex items-center justify-center rounded bg-[#ffffff0d]"},xe={class:"text-white text-base line-clamp-1"},ve=["onClick"],be={class:"absolute bottom-0 left-0 right-0 h-[80px] flex items-center px-4 shadow-[0_-1px_0_0_var(--app-border-color-1)] bg-app-bg-2"},Fe=P({__name:"advanced-setting",props:{show:{type:Boolean},showModifiers:{}},emits:T(["close","success"],["update:show"]),setup(E,{expose:B,emit:N}){const x=N,s=G({automatic_clip:0,music:[],clip:[]}),p=w([]),f=L(E,"show"),h=w(!1),v=Z(),we=async()=>{h.value=!0,await te(),v.value.open()},ge=o=>{const{uri:e,name:d}=o.data;s.music.push({url:e,name:d})},k=o=>{s.music.splice(o,1)},C=o=>{s.music.push(...o.map(e=>({url:e.url,name:e.name})))},S=o=>{s.clip=o.map(e=>({type:e}))},M=()=>{if(s.automatic_clip==1&&s.clip.length==0){Y.msgWarning("请选择剪辑风格");return}b(),x("success",s)},A=()=>{f.value=!0},b=()=>{f.value=!1,x("close")};return B({open:A,setFormData:o=>{o.clip=g(o.clip)?o.clip:JSON.parse(o.clip),o.music=g(o.music)?o.music:JSON.parse(o.music),q(o,s),o.clip&&o.clip.length>0&&(p.value=o.clip.map(e=>e.type))}}),(o,e)=>{const d=z,D=F,j=K,I=J,R=ee,ye=se,Ve=le,U=ae,O=oe,$=ce;return c(),n(u,null,[i($,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=l=>f.value=l),"body-class":"bg-app-bg-2 !p-0",size:"450px","with-header":!1},{default:m(()=>[t("div",re,[t("div",{class:"absolute w-6 h-6 top-6 right-6",onClick:b},[i(d,{theme:a(W).DARK},null,8,["theme"])]),e[12]||(e[12]=t("div",{class:"flex-shrink-0 h-[80px] flex items-center px-4 text-white text-lg font-bold"},"高级设置",-1)),t("div",pe,[t("div",fe,[e[4]||(e[4]=t("div",{class:"text-xs text-white"},"AI智能剪辑",-1)),i(D,{modelValue:a(s).automatic_clip,"onUpdate:modelValue":e[0]||(e[0]=l=>a(s).automatic_clip=l),style:{"--el-switch-off-color":"#333333"},"active-value":1,"inactive-value":0},null,8,["modelValue"])]),a(s).automatic_clip==1?(c(),n(u,{key:0},[t("div",de,[e[5]||(e[5]=t("div",{class:"text-xs text-white mb-3"},"剪辑风格选择：",-1)),t("div",null,[i(I,{modelValue:a(p),"onUpdate:modelValue":e[1]||(e[1]=l=>H(p)?p.value=l:null),class:"!h-11","popper-class":"dark-select-popper",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",placeholder:"请选择剪辑风格","show-arrow":!1,onChange:S},{default:m(()=>[(c(!0),n(u,null,y(a(ne),(l,r)=>(c(),V(j,{key:r,label:l,value:r},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_("",!0)],64)):_("",!0)]),a(s).automatic_clip?(c(),n("div",me,[i(U,null,{default:m(()=>[t("div",ue,[(c(!0),n(u,null,y(a(s).music,(l,r)=>(c(),n("div",{key:r,class:"rounded-md h-11 px-3 border border-app-border-1 bg-app-bg-2 flex items-center justify-between gap-x-2 cursor-pointer hover:bg-[#ffffff0d]"},[t("div",_e,[t("div",he,[i(R,{name:"local-icon-music",size:14,color:"#ffffff"})]),t("div",xe,Q(l.name),1)]),e[10]||(e[10]=t("div",{class:"w-[1px] h-[12px] bg-[#ffffff1a]"},null,-1)),t("div",null,[t("div",{class:"w-4 h-4",onClick:Ee=>k(r)},[i(d,{"icon-size":10})],8,ve)])]))),128))])]),_:1})])):_("",!0),t("div",be,[i(O,{type:"primary",class:"w-full !h-[50px] !rounded-full",onClick:M},{default:m(()=>[...e[11]||(e[11]=[X("确定",-1)])]),_:1})])])]),_:1},8,["modelValue"]),a(h)?(c(),V(ie,{key:0,ref_key:"audioMaterialRef",ref:v,multiple:"",onClose:e[3]||(e[3]=l=>h.value=!1),onConfirm:C},null,512)):_("",!0)],64)}}});export{Fe as _};
