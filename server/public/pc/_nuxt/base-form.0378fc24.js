import{d as I,c as T,A as z,bK as O,k as i,l as c,q as l,s as r,Z as t,I as D,J as u,K,m as n,t as x,L as U,a0 as A,az as L,av as G,aw as M,y as N,ba as $,_ as q}from"./entry.556496e9.js";import{E as J,a as P}from"./index.899f58ef.js";import{_ as Z}from"./index.vue.83bf2a64.js";import{_ as H}from"./index.2280f26b.js";/* empty css                  *//* empty css               *//* empty css                     */import{KnTypeEnum as d}from"./index.5bd136e1.js";const b=""+new URL("kn_default_cover.e1e6e050.png",import.meta.url).href,Q={class:"flex items-center gap-x-2 options-item"},W={class:"item-icon"},X={class:"h-[111px] rounded-md flex flex-col items-center justify-center relative leading-5"},Y=["src"],v=5,ee=I({__name:"base-form",props:{modelValue:{default:()=>({name:"",cover:"",description:""})},isEdit:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(f,{expose:y,emit:h}){const w=f,E=h,o=T({get(){return w.modelValue},set(s){E("update:modelValue",s)}}),_=z(),V={name:[{required:!0,message:"请输入知识库名称",trigger:"blur"},{validator:(s,e,p)=>{d.RAG==o.value.type&&e.length>12?p(new Error("知识库名称长度不能超过12个字符")):p()},trigger:"blur"}]},k=[{id:d.VECTOR,name:"向量知识库",icon:"local-icon-kb_type1"},{id:d.RAG,name:"RAG知识库",icon:"local-icon-kb_type2"}],j=s=>{const{uri:e}=s.data;o.value.cover=e};return y({validateForm:()=>{var s;return(s=_.value)==null?void 0:s.validate()},setFormData:s=>O(s,o)}),(s,e)=>{const p=G,m=M,g=N,F=J,R=P,B=Z,S=$,C=H;return i(),c("div",null,[l(t(L),{ref_key:"formRef",ref:_,model:t(o),"label-position":"top",rules:V},{default:r(()=>[l(m,{label:"知识库名称",prop:"name"},{default:r(()=>[l(p,{class:"!h-11",modelValue:t(o).name,"onUpdate:modelValue":e[0]||(e[0]=a=>t(o).name=a),"show-word-limit":"",maxlength:t(d).VECTOR==t(o).type?20:12,clearable:"",placeholder:"请输入知识库名称"},null,8,["modelValue","maxlength"])]),_:1}),l(m,{label:"知识库描述",prop:"description"},{default:r(()=>[l(p,{modelValue:t(o).description,"onUpdate:modelValue":e[1]||(e[1]=a=>t(o).description=a),"show-word-limit":"",maxlength:"200",type:"textarea",resize:"none",rows:6,placeholder:"请输入知识库描述"},null,8,["modelValue"])]),_:1}),f.isEdit?U("",!0):(i(),D(m,{key:0,label:"知识库类型",prop:"type"},{default:r(()=>[l(R,{class:"!h-11",modelValue:t(o).type,"onUpdate:modelValue":e[2]||(e[2]=a=>t(o).type=a),placeholder:"请选择知识库类型","popper-class":"kb-type-select","show-arrow":!1},{default:r(()=>[(i(),c(u,null,K(k,a=>l(F,{key:a.id,label:a.name,value:a.id},{default:r(()=>[n("div",Q,[n("span",W,[l(g,{name:a.icon},null,8,["name"])]),n("span",null,x(a.name),1)])]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})),l(m,{label:"知识库封面",prop:"cover"},{default:r(()=>[l(C,{class:"w-full",accept:"image/png,image/jpeg,image/jpg","show-progress":"",drag:"","show-file-list":!1,"max-size":v,onSuccess:j},{default:r(()=>[n("div",X,[t(o).cover||t(b)?(i(),c(u,{key:0},[n("img",{src:t(o).cover||t(b),class:"h-full object-cover"},null,8,Y),l(S,{content:"删除",placement:"right"},{default:r(()=>[n("div",{class:"absolute top-1 right-1 cursor-pointer w-6 h-6",onClick:e[3]||(e[3]=A(a=>t(o).cover="",["stop"]))},[l(B)])]),_:1}),e[4]||(e[4]=n("div",{class:"absolute bottom-3 w-full flex justify-center"},[n("div",{class:"cursor-pointer px-[10px] text-white rounded-full border border-[#ffffff1a] bg-[#ffffff4d] shadow-[0px_6px_12px_0px_rgba(0,0,0,0.24)] h-[28px] flex items-center justify-center text-xs"}," 更换图片 ")],-1))],64)):(i(),c(u,{key:1},[l(g,{name:"local-icon-file_add",size:28,color:"#000000"}),e[5]||(e[5]=n("span",{class:"text-gray-500 text-xs mt-2"},"点此上传图片 支持拖拽上传",-1)),n("div",{class:"text-xs text-gray-500"}," 图片大小不超过"+x(v)+"MB，规格为png、jpg、jpeg，分辨率推荐128*128 ")],64))])]),_:1})]),_:1})]),_:1},8,["model"])])}}});const te=q(ee,[["__scopeId","data-v-7e54b5f9"]]),me=Object.freeze(Object.defineProperty({__proto__:null,default:te},Symbol.toStringTag,{value:"Module"}));export{te as B,b as K,me as b};
