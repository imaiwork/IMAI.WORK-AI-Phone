import{d as w,r,bA as b,k as i,I as k,s as h,m as o,aI as C,Z as d,l as u,L as R,cX as B,cY as A,eq as I,u as L,G as N,er as Q}from"./entry.8705b591.js";import{u as q}from"./usePolling.d59491f5.js";const D={class:"flex flex-col gap-y-4"},E={class:"rounded-[10px] bg-white p-5 flex flex-col items-center"},P={class:"w-[250px] h-[250px] mt-[28px]"},V=["src"],X=w({__name:"device-add",props:{bindLoading:{type:Boolean}},emits:["close","confirm","update:account"],setup(G,{expose:m,emit:f}){const a=f,n=r(!1),p=r(null),c=r(""),{start:x,end:s}=q(async()=>{try{const e=await I();e.status==1&&(a("confirm"),s(),L().$confirm({title:"提示",message:"是否一键拉去平台账号，注意：设备必须在线才能拉取账号",onConfirm:()=>{a("update:account",e.device_code),l()},onCancel:()=>{l()}}))}catch(e){s(),N.msgError(e)}},{time:4500}),_=async()=>{n.value=!0;try{const e=await Q();c.value=e.url,x()}finally{n.value=!1}},v=()=>{p.value.open(),_()},l=()=>{a("close"),s()};return b(()=>s()),m({open:v}),(e,t)=>{const g=B,y=A;return i(),k(g,{ref_key:"popupRef",ref:p,title:"添加AI智能设备",async:"",width:"500px","confirm-button-text":"",onClose:l},{default:h(()=>[o("div",D,[o("div",E,[t[0]||(t[0]=o("div",{class:"text-xl font-bold"},"设备绑定码",-1)),t[1]||(t[1]=o("div",{class:"text-xl text-[#0000004d] mt-[10px]"},"请勿与任何人分享此代码",-1)),C((i(),u("div",P,[d(c)?(i(),u("img",{key:0,src:d(c),class:"w-full h-full rounded-[10px]"},null,8,V)):R("",!0)])),[[y,d(n)]]),t[2]||(t[2]=o("div",{class:"font-bold mt-5"},"请前往RPA启用摄像头扫描此二维码",-1))])])]),_:1},512)}}});export{X as _};
