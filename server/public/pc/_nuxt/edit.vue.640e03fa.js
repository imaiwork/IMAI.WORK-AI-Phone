import{E as G}from"./el-switch.316f10b8.js";import{d as N,A as h,aG as B,r as c,cy as K,bK as E,k as d,I as _,s as n,q as t,Z as o,l as O,K as W,J as z,L as J,cX as X,G as V,aw as Z,av as j,d0 as H,d1 as M,az as P}from"./entry.556496e9.js";import{E as Q,a as T}from"./index.899f58ef.js";import{E as Y}from"./el-input-number.fadfd561.js";/* empty css                  *//* empty css               *//* empty css                     */import{s as $,g as ee}from"./person_wechat.703f63bb.js";import{F as oe}from"./agent.4a5bb123.js";const ce=N({__name:"edit",emits:["close","success"],setup(ae,{expose:y,emit:w}){const f=w,v=h(),a=B({wechat_id:"",open_ai:1,remark:"wechat_ai",takeover_mode:1,takeover_type:1,robot_id:"",sort:1}),I={remark:[{required:!0,message:"请输入账号备注"}],open_ai:[{required:!0,message:"请选择AI接管"}],takeover_mode:[{required:!0,message:"请选择接管模式"}],takeover_type:[{required:!0,message:"请选择接管类型"}],robot_id:[{required:!0,message:"请选择AI接管机器人"}]},u=c(),k=c([]),i=c(!1),b=async r=>{i.value=!0;const e=await oe({keyword:r});k.value=e.lists,i.value=!1},A=()=>{var r;(r=u.value)==null||r.open(),b()},F=()=>{f("close")},C=async()=>{var r,e;await((r=v.value)==null?void 0:r.validate());try{await $(a),(e=u.value)==null||e.close(),V.msgSuccess("保存成功"),f("success")}catch(p){V.msgError(p||"保存失败")}},{lockFn:R,isLock:x}=K(C);return y({open:A,getDetail:async r=>{const e=await ee({wechat_id:r});E(e,a)},setFormData:r=>E(r,a)}),(r,e)=>{const p=G,s=Z,L=j,m=H,g=M,q=Q,U=T,D=Y,S=P;return d(),_(X,{ref_key:"popupRef",ref:u,async:"",width:"600px",title:"编辑微信账号","confirm-loading":o(x),onConfirm:o(R),onClose:F},{default:n(()=>[t(S,{model:o(a),ref_key:"formRef",ref:v,rules:I,"label-position":"top"},{default:n(()=>[t(s,{label:"AI总功能开关",prop:"open_ai"},{default:n(()=>[t(p,{modelValue:o(a).open_ai,"onUpdate:modelValue":e[0]||(e[0]=l=>o(a).open_ai=l),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),t(s,{label:"账号备注",prop:"remark"},{default:n(()=>[t(L,{modelValue:o(a).remark,"onUpdate:modelValue":e[1]||(e[1]=l=>o(a).remark=l),placeholder:"点击输入账号备注"},null,8,["modelValue"])]),_:1}),t(s,{label:"接管模式",prop:"takeover_mode"},{default:n(()=>[t(g,{modelValue:o(a).takeover_mode,"onUpdate:modelValue":e[2]||(e[2]=l=>o(a).takeover_mode=l)},{default:n(()=>[t(m,{label:"AI接管",value:1}),t(m,{label:"人工介入",value:0})]),_:1},8,["modelValue"])]),_:1}),o(a).takeover_mode===1?(d(),_(s,{key:0,label:"AI接管机器人",prop:"robot_id"},{default:n(()=>[t(U,{modelValue:o(a).robot_id,"onUpdate:modelValue":e[3]||(e[3]=l=>o(a).robot_id=l),filterable:"",clearable:"",remote:"",placeholder:"请选择接管机器人AI",loading:o(i),"remote-method":b},{default:n(()=>[(d(!0),O(z,null,W(o(k),l=>(d(),_(q,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1})):J("",!0),t(s,{label:"接管类型",prop:"takeover_type"},{default:n(()=>[t(g,{modelValue:o(a).takeover_type,"onUpdate:modelValue":e[4]||(e[4]=l=>o(a).takeover_type=l)},{default:n(()=>[t(m,{label:"全部",value:0}),t(m,{label:"私聊",value:1})]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"排序",prop:"sort"},{default:n(()=>[t(D,{modelValue:o(a).sort,"onUpdate:modelValue":e[5]||(e[5]=l=>o(a).sort=l),precision:0,min:0,max:100},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["confirm-loading","onConfirm"])}}});export{ce as _};
