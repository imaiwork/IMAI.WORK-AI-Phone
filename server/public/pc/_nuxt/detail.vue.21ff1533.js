import{_ as O}from"./index.vue.421b9ac0.js";import{E as Q}from"./el-image.315c077e.js";import{d as W,A as T,r as x,c as X,k as o,I as g,s as b,m as t,q as w,Z as i,cZ as Y,t as r,l as a,L as c,K as E,J as u,v as D,bM as tt,u as st,G as h,ay as et}from"./entry.9c858de7.js";import{E as ot}from"./index.d2366752.js";import{E as at}from"./el-empty.9547ccf9.js";import{E as lt}from"./index.60353080.js";import"./el-image-viewer.d6a7ffcb.js";/* empty css                     *//* empty css                  */import{u as rt}from"./useSocialPlatform.3ae66bf4.js";import{d as it,b as nt,c as ct}from"./device.b8ac970d.js";const dt={class:"mt-[38px] px-[26px]"},ft={class:"text-[15px] font-bold text-white mb-[14px]"},_t={class:"flex"},pt={class:"text-white"},ut={class:"flex mt-2"},mt={class:"flex gap-2"},vt=["src"],xt={class:"text-white"},ht={class:"flex mt-2"},yt={class:"text-white"},kt={class:"flex mt-2"},gt={class:"text-white"},bt={class:"grow min-h-0 mt-5"},wt={class:"px-[26px]"},Et={class:"flex flex-col gap-y-3"},Dt={class:"h-10 flex items-center border-0 border-b border-app-border-1 text-[#ffffff80]"},Rt={class:"py-2"},Bt={class:"text-white"},Vt={class:"mt-2 text-[11px] text-white"},Ct={class:"mt-[10px] flex flex-wrap gap-2 text-[11px] text-[#ffffff80]"},At={key:0,class:"grid grid-cols-4 gap-3 mt-3"},Lt={key:1,class:"mt-3"},Pt=["src","poster","onPlay"],Nt={class:"flex mt-[17px]"},St={key:0,class:"text-info"},Tt={key:1,class:"text-[#3BB840]"},It={key:2,class:"text-danger"},$t={key:3,class:"text-primary"},jt={class:"flex mt-2"},zt={class:"text-white"},Kt={class:"flex justify-end"},Zt={key:1,class:"my-10"},ts=W({__name:"detail",emits:["close"],setup(qt,{expose:I,emit:$}){const j=$,{getPlatform:z}=rt(),R=T(),_=T(),p=x(!1),y=x({}),d=x({}),k=x([]),B=X(()=>{var l,s;return(s=z((l=d.value)==null?void 0:l.account_type))==null?void 0:s.icon}),K=l=>{if(!_.value||!Array.isArray(_.value))return;const s=_.value[l];s&&(_.value.forEach(n=>{n&&n!==s&&!n.paused&&n.pause()}),s.play())},Z=l=>{st().$confirm({message:"确定要删除吗？",theme:"dark",onConfirm:async()=>{try{h.loading("删除中...",R.value),await it({id:l}),h.msgSuccess("删除成功"),V()}catch(s){h.msgError(s||"删除失败")}finally{h.closeLoading()}}})},q=l=>{p.value=!0,y.value=l,C(l.id),V()},F=()=>{p.value=!1,j("close")},V=async()=>{var s,n;const{lists:l}=await nt({page_size:9999,task_type:3,publish_id:(s=y.value)==null?void 0:s.publish_id,account:(n=y.value)==null?void 0:n.account});k.value=l},C=async l=>{const s=await ct({id:l});d.value=s};return I({open:q,getDetail:C}),(l,s)=>{const n=O,G=Q,J=et,M=ot,U=at,H=lt;return o(),g(H,{modelValue:i(p),"onUpdate:modelValue":s[0]||(s[0]=m=>tt(p)?p.value=m:null),"body-class":"bg-app-bg-2 !p-0",size:"450px","with-header":!1},{default:b(()=>{var m,A,L,P,N,S;return[t("div",{class:"h-full flex flex-col",ref_key:"containerRef",ref:R},[t("div",{class:"absolute w-6 h-6 top-5 right-2",onClick:F},[w(n,{theme:i(Y).DARK},null,8,["theme"])]),s[8]||(s[8]=t("div",{class:"text-[15px] font-bold text-white pt-[23px] px-[26px]"},"任务详情",-1)),t("div",dt,[t("div",ft,r((m=i(d))==null?void 0:m.name),1),t("div",_t,[s[1]||(s[1]=t("div",{class:"text-[#ffffff66] flex-shrink-0"},"任务类型：",-1)),t("div",pt,r((A=i(d))==null?void 0:A.task_category),1)]),t("div",ut,[s[2]||(s[2]=t("div",{class:"text-[#ffffff66] flex-shrink-0"},"发布账号：",-1)),t("div",mt,[i(B)?(o(),a("img",{key:0,src:i(B),class:"w-4 h-4"},null,8,vt)):c("",!0),t("span",xt,r((L=i(d))==null?void 0:L.account_name)+"（设备："+r((P=i(d))==null?void 0:P.device_name)+"）",1)])]),t("div",ht,[s[3]||(s[3]=t("div",{class:"text-[#ffffff66] flex-shrink-0"},"发布数量（每天）：",-1)),t("div",yt,r(((N=i(d))==null?void 0:N.count)||0)+"条",1)]),t("div",kt,[s[4]||(s[4]=t("div",{class:"text-[#ffffff66] flex-shrink-0"},"创建时间：",-1)),t("div",gt,r(((S=i(d))==null?void 0:S.create_time)||"-"),1)])]),t("div",bt,[i(k).length>0?(o(),g(M,{key:0},{default:b(()=>[t("div",wt,[t("div",Et,[(o(!0),a(u,null,E(i(k),(e,v)=>(o(),a("div",{key:v,class:"border border-app-border-1 rounded-md px-[23px]"},[t("div",Dt,[e.material_type==2?(o(),a(u,{key:0},[D(" 第"+r(v+1)+"组图文发布 ",1)],64)):c("",!0),e.material_type==1?(o(),a(u,{key:1},[D(" 第"+r(v+1)+"个视频发布 ",1)],64)):c("",!0)]),t("div",Rt,[t("div",Bt,r(e.material_title),1),t("div",Vt,r(e.material_subtitle),1),t("div",Ct,[(o(!0),a(u,null,E(e.material_tag,f=>(o(),a("div",{key:f},"#"+r(f),1))),128))]),e.material_type==2?(o(),a("div",At,[(o(!0),a(u,null,E(e.material_url.split(","),f=>(o(),g(G,{class:"h-[80px] rounded-md",fit:"cover",src:f,"preview-src-list":e.material_url.split(","),"preview-teleported":""},null,8,["src","preview-src-list"]))),256))])):c("",!0),e.material_type==1?(o(),a("div",Lt,[t("video",{ref_for:!0,ref_key:"videoRef",ref:_,src:e.material_url,poster:e.pic,class:"h-auto w-full rounded-md object-cover",controls:"",onPlay:f=>K(v)},null,40,Pt)])):c("",!0),t("div",Nt,[s[5]||(s[5]=t("div",{class:"text-[#ffffff66]"},"任务状态：",-1)),t("div",null,[e.status==0?(o(),a("span",St,"未发布")):c("",!0),e.status==1?(o(),a("span",Tt,"已发布")):c("",!0),e.status==2?(o(),a("span",It,"发布失败("+r(e.remark)+")",1)):c("",!0),e.status==3?(o(),a("span",$t,"发布中")):c("",!0)])]),t("div",jt,[s[6]||(s[6]=t("div",{class:"text-[#ffffff66]"},"发布时间：",-1)),t("div",zt,r(e.publish_time),1)]),t("div",Kt,[w(J,{color:"#121212",class:"!border-app-border-1",onClick:f=>Z(e.id)},{default:b(()=>[...s[7]||(s[7]=[D("删除",-1)])]),_:1},8,["onClick"])])])]))),128))])])]),_:1})):(o(),a("div",Zt,[w(U)]))])],512)]}),_:1},8,["modelValue"])}}});export{ts as _};
