import{_ as S}from"./index.vue.96af9406.js";import{E as B,a as T}from"./index.b6452ee7.js";import{d as U,z as A,c as L,r as N,aG as O,cy as z,I as D,s as c,cX as F,G as p,k as _,m as n,q as r,l as G,K,J as P,Z as a,v as R,t as $,dv as q,av as H,ay as J}from"./entry.563c232b.js";/* empty css                  *//* empty css               *//* empty css                     */import{g as W}from"./sph.d6d2831a.js";import{CreateTypeEnum as X}from"./index.22c5df69.js";const Z={class:"-my-4"},j={class:"mt-4"},M={class:"mt-4"},Q={class:"mt-4"},le=U({__name:"ai-add-keyword",props:{type:{type:Number,default:X.VIDEO}},emits:["close","success"],setup(y,{expose:k,emit:g}){const d=y,i=g,l=A(),u=L(()=>{var e;return((e=l.getTokenByScene(q.SPH_AI_CLUE))==null?void 0:e.score)*t.targetCount}),m=N(),t=O({targetCount:30,keyword:"",channelVersion:d.type}),x=()=>{m.value.open(),t.channelVersion=d.type},f=()=>{i("close")},{lockFn:w,isLock:v}=z(async()=>{if(l.userTokens<=u.value){p.msgPowerInsufficient();return}if(!t.keyword){p.msgWarning("请输入您想获取的线索方向");return}try{let o=await W(t);o&&o.length>0&&(o=o.filter(e=>e.indexOf("=")==-1).map(e=>e.trim())),l.getUser(),i("success",o),f()}catch(o){p.msgError(o||"操作失败")}});return k({open:x}),(o,e)=>{const b=S,E=B,h=T,V=H,C=J,I=F;return _(),D(I,{ref_key:"popupRef",ref:m,async:"",width:"500px","confirm-button-text":"","cancel-button-text":"",style:{padding:"18px","border-radius":"20px","background-color":"var(--app-bg-color-3)","box-shadow":"0 0 0 1px #2a2a2a"},"append-to-body":!1,"show-close":!1},{default:c(()=>[n("div",Z,[n("div",{class:"absolute w-6 h-6 top-[18px] right-[18px] z-[22]",onClick:f},[r(b)]),e[3]||(e[3]=n("div",{class:"text-[15px] text-white font-bold"},"AI添加检索关键词",-1)),n("div",j,[r(h,{modelValue:a(t).targetCount,"onUpdate:modelValue":e[0]||(e[0]=s=>a(t).targetCount=s),placeholder:"请选择生成数量",class:"!h-11","popper-class":"dark-select-popper ","show-arrow":!1},{default:c(()=>[(_(),G(P,null,K([10,20,30,40,50,60,70,80,90,100],s=>r(E,{key:s,label:`${s}个`,value:s},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),n("div",M,[e[2]||(e[2]=n("div",{class:"text-white mb-3"},"生成相关内容",-1)),r(V,{modelValue:a(t).keyword,"onUpdate:modelValue":e[1]||(e[1]=s=>a(t).keyword=s),type:"textarea",placeholder:"请输入需要检索的相关方向，AI将自动为您生成相关检索词",resize:"none",rows:10},null,8,["modelValue"])]),n("div",Q,[r(C,{type:"primary",class:"!rounded-full w-full !h-[50px]",loading:a(v),onClick:a(w)},{default:c(()=>[R("立即生成(消耗"+$(a(u))+"算力)",1)]),_:1},8,["loading","onClick"])])])]),_:1},512)}}});export{le as _};
