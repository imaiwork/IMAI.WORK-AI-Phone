import{E as Z}from"./index.d5b2ab73.js";import{d as O,a as Q,au as U,r as g,c as W,aG as X,cA as ee,o as se,k as o,l as a,m as s,q as c,s as d,J as u,K as D,Y as L,Z as i,t as h,aI as R,I,a0 as te,v as N,L as w,cB as oe,G as Y,ai as ne,bC as ae,y as ie,ay as re,cY as le,u as ce,_ as de}from"./entry.8705b591.js";import{E as pe}from"./index.656bf02e.js";import{E as _e}from"./el-card.f55b5742.js";import{E as me}from"./el-empty.a2e85def.js";/* empty css                     *//* empty css                   */import{u as ue}from"./usePaging.0c251ebb.js";import{_ as fe}from"./index.vue.00099806.js";import{E as ve}from"./index.cac1152c.js";import"./index.7002e1fb.js";import"./index.d9a24f65.js";import"./strings.05ad2423.js";import"./_baseIteratee.889eaccd.js";import"./toNumber.9701a4c1.js";import"./clamp.2d199c02.js";import"./index.f9213b2f.js";import"./el-slider.a8a2e45a.js";import"./el-input-number.1be09075.js";import"./index.506eb19c.js";import"./debounce.4efe57e2.js";/* empty css                  *//* empty css               */import"./useDictOptions.73f577c5.js";import"./knowledge_base.519704cc.js";import"./common.1728c92e.js";import"./throttle.2aefc6f7.js";const ge={class:"h-full"},he={class:""},ye={class:"flex items-center gap-2 pb-4"},ke=["onClick"],xe={class:"text-base"},be=["infinite-scroll-disabled"],Ce={class:"pb-6"},we={class:"grid grid-cols-2 gap-3 md:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-6"},Ee={class:"flex flex-col rounded-lg w-full flex-grow gap-4 group relative h-[130px]"},$e={class:"font-bold"},Se={class:"line-clamp-3 grow"},Be={class:"text-tx-primary text-sm"},De={class:"rotate-90 origin-center p-1"},Le={class:"flex flex-col gap-2"},Re=["onClick"],Ie=["onClick"],Ne={key:0,class:"text-center py-4 text-gray-500"},Ye={key:0,class:"mt-20"},Ae=O({__name:"content",setup(Me){var B;const E=Q(),A=ce(),M=U(),p=g(0),y=g(""),k=W(()=>[{name:"全部",id:""}].concat(M.menuList)),f=X({page_no:1,scene_id:(B=k.value[p.value])==null?void 0:B.id}),{pager:l,getLists:$,resetPage:P}=ue({size:25,fetchFun:ee,params:f,isScroll:!0}),F=n=>{var e;n!=p.value&&(p.value=n,f.page_no=1,f.scene_id=(e=k.value[p.value])==null?void 0:e.id,P())},S=(n,e)=>{n?y.value=e:y.value=""},H=n=>{const{assistant_id:e,task_id:r,robot_id:C,robot_name:v}=n;e==0?E.push(`/?task_id=${r}&agent_id=${C}&agent_name=${v}`):E.push(`/robot/chat?id=${e}&task_id=${r}`)},T=async(n,e)=>{await A.$confirm({message:"确定删除此记录吗？",onConfirm:async()=>{try{await oe({task_id:n}),Y.msgSuccess("删除成功"),l.lists.splice(e,1)}catch(r){Y.msgError(r||"删除失败")}}})},x=g(!1),b=g(),V=async n=>{var e,r;x.value=!0,await ne(),(e=b.value)==null||e.open(),(r=b.value)==null||r.setFormData({type:"txt",fileName:`${ae().format("YYYYMMDDHHmmss")}`,content:n.message})},j=async()=>{f.page_no+=1,await $()};return se(async()=>{$()}),(n,e)=>{const r=Z,C=ie,v=re,q=pe,z=_e,G=me,K=le,J=ve;return o(),a(u,null,[s("div",ge,[s("div",he,[c(r,null,{default:d(()=>[s("div",ye,[(o(!0),a(u,null,D(i(k),(t,_)=>(o(),a("div",{class:L(["px-2 py-1 rounded-md cursor-pointer whitespace-nowrap",[i(p)==_?"text-[#000000] font-bold bg-[rgba(120,96,254,.08)]":"bg-[rgba(139,95,95,0.04)]"]]),onClick:m=>F(_)},[s("span",xe,h(t.name),1)],10,ke))),256))])]),_:1})]),R((o(),a("div",{class:"mt-2","infinite-scroll-distance":10,"infinite-scroll-immediate":!1,"infinite-scroll-disabled":!i(l).isLoad},[R((o(),a("div",Ce,[i(l).lists.length?(o(),a(u,{key:0},[s("div",we,[(o(!0),a(u,null,D(i(l).lists,(t,_)=>(o(),I(z,{class:"cursor-pointer !rounded-xl relative hover:scale-[1.02] !p-0",shadow:"never",key:_,onClick:m=>H(t)},{default:d(()=>[s("div",Ee,[s("div",$e,h(t.scene_name),1),s("div",Se,h(t.message||t.file_info.name),1),s("div",Be,h(t.create_time),1),s("div",{class:L(["ml-2 h-full invisible group-hover:visible absolute -right-2 -top-1",[i(y)==t.task_id?"!visible":""]]),onClick:e[0]||(e[0]=te(()=>{},["stop"]))},[c(q,{"show-arrow":!1,"popper-class":"!w-[120px] !min-w-[120px] !p-[6px] !rounded-xl",onShow:m=>S(!0,t.task_id),onHide:m=>S(!1,t.task_id)},{reference:d(()=>[s("div",De,[c(C,{name:"el-icon-MoreFilled"})])]),default:d(()=>[s("div",Le,[s("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer",onClick:m=>T(t.task_id,_)},[c(v,{link:"",icon:"el-icon-Delete",class:"w-full !justify-start"},{default:d(()=>[...e[2]||(e[2]=[N("删除",-1)])]),_:1})],8,Re),s("div",{class:"px-2 py-1 hover:bg-primary-light-9 rounded-lg cursor-pointer flex items-center gap-1.5",onClick:m=>V(t)},[c(v,{link:"",icon:"el-icon-DocumentAdd",class:"w-full !justify-start"},{default:d(()=>[...e[3]||(e[3]=[N("训练知识库",-1)])]),_:1})],8,Ie)])]),_:2},1032,["onShow","onHide"])],2)])]),_:2},1032,["onClick"]))),128))]),i(l).isLoad?w("",!0):(o(),a("div",Ne,"暂无更多了"))],64)):(o(),a(u,{key:1},[i(l).loading?w("",!0):(o(),a("div",Ye,[c(G)]))],64))])),[[K,i(l).loading]])],8,be)),[[J,j]])]),i(x)?(o(),I(fe,{key:0,ref_key:"knbBindRef",ref:b,onClose:e[1]||(e[1]=t=>x.value=!1)},null,512)):w("",!0)],64)}}});const ds=de(Ae,[["__scopeId","data-v-111ca2de"]]);export{ds as default};
