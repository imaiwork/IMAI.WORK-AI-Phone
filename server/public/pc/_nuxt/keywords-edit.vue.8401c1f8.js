import{_ as B}from"./index.vue.fdfa7631.js";import{d as q,bP as G,r as f,aG as A,cy as K,k as N,I as U,s as a,m as d,q as t,t as $,Z as s,v as u,cX as L,G as w,bK as S,d0 as z,d1 as P,aw as T,av as X,az as Z,ay as j}from"./entry.45b56a4a.js";import{x as H,y as J}from"./agent.4a5bb123.js";import M from"./add-content.75603322.js";const O={class:"text-2xl font-bold mb-5"},Q={class:"h-[600px] w-full overflow-hidden"},W={class:"flex"},le=q({__name:"keywords-edit",emits:["close","success"],setup(Y,{expose:x,emit:b}){const _=b,E=G(),m=f(),c=f("add"),y=f(),o=A({id:"",match_type:0,keyword:"",reply:[]}),R={keyword:[{required:!0,message:"请输入匹配内容"}],reply:[{required:!0,message:"请输入回复内容"}]},F=l=>{var e;c.value=l||"add",(e=m.value)==null||e.open()},k=()=>{_("close")},V=async()=>{var l,e;await((l=y.value)==null?void 0:l.validate());try{const r=o.id?H:J,p={...o,robot_id:E.query.id};await r(p),w.msgSuccess(`${c.value==="add"?"新增":"编辑"}成功`),(e=m.value)==null||e.close(),_("success")}catch(r){w.msgError(r||`${c.value==="add"?"新增":"编辑"}失败`)}},{lockFn:C,isLock:g}=K(V);return x({open:F,setFormData:l=>{S(l,o),Array.isArray(o.reply)&&(o.reply=o.reply.map(e=>({...e,type:parseInt(e.type,10)})))}}),(l,e)=>{const r=B,p=z,h=P,i=T,D=X,I=Z,v=j;return N(),U(L,{ref_key:"popupRef",ref:m,async:"",width:"550px","confirm-button-text":"","cancel-button-text":"","header-class":"!p-0","show-close":!1},{default:a(()=>[d("div",null,[d("div",{class:"absolute w-6 h-6 right-4 top-4 cursor-pointer",onClick:k},[t(r)]),d("div",O,$(s(o).id?"编辑":"添加")+"关键词回复",1),t(I,{ref_key:"formRef",ref:y,model:s(o),rules:R,"label-position":"top"},{default:a(()=>[t(i,{label:"匹配方式",prop:"match_type"},{default:a(()=>[t(h,{modelValue:s(o).match_type,"onUpdate:modelValue":e[0]||(e[0]=n=>s(o).match_type=n)},{default:a(()=>[t(p,{value:0},{default:a(()=>[...e[3]||(e[3]=[u("模糊匹配",-1)])]),_:1}),t(p,{value:1},{default:a(()=>[...e[4]||(e[4]=[u("精确匹配",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(i,{label:"匹配内容",prop:"keyword"},{default:a(()=>[t(D,{modelValue:s(o).keyword,"onUpdate:modelValue":e[1]||(e[1]=n=>s(o).keyword=n),placeholder:"回复内容支持多词组匹配，以分号相隔; 例如：你好;你好啊;你好呀"},null,8,["modelValue"])]),_:1}),t(i,{label:"回复内容",prop:"reply"},{default:a(()=>[d("div",Q,[t(M,{ref:"addContentRef",type:2,modelValue:s(o).reply,"onUpdate:modelValue":e[2]||(e[2]=n=>s(o).reply=n),"show-preview":!1},null,8,["modelValue"])])]),_:1})]),_:1},8,["model"]),d("div",W,[t(v,{class:"!rounded-full flex-1 !h-[50px]",onClick:k},{default:a(()=>[...e[5]||(e[5]=[u("取消",-1)])]),_:1}),t(v,{type:"primary",class:"!rounded-full flex-1 !h-[50px]",loading:s(g),onClick:s(C)},{default:a(()=>[...e[6]||(e[6]=[u(" 保存 ",-1)])]),_:1},8,["loading","onClick"])])])]),_:1},512)}}});export{le as _};
