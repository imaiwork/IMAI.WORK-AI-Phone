import{Q as Ve,S as te,b1 as ke,b5 as Ce,b7 as _e,a_ as ne,bX as ye,b0 as Le,aV as ae,O as le,ab as Ie,r as Z,c as f,D as de,bh as ce,aY as Re,aZ as Y,ai as me,d as oe,W as we,aG as Pe,aH as be,k as B,l as I,q as Ne,s as Ee,m as Q,t as pe,Z as l,Y as R,ba as Ke,a3 as G,aa as Te,aq as Be,e as Xe,aK as Ye,A as Fe,X as We,ah as he,N as $e,o as Ue,V as Oe,aL as Ae,aQ as je,aj as He,I as ve,L as ue,J as ie,K as fe,a0 as qe,an as Ge}from"./entry.563c232b.js";import{E as Qe}from"./el-input-number.6d124fdd.js";import{d as xe}from"./debounce.cf3b8bee.js";import{c as Ze}from"./clamp.43011008.js";const ze=Symbol("sliderContextKey"),Je=Ve({modelValue:{type:te([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:ke,inputSize:ke,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:te(Function),default:void 0},disabled:{type:Boolean,default:void 0},range:Boolean,vertical:Boolean,height:String,rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:te(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Ce,default:"top"},marks:{type:te(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},..._e(["ariaLabel"])}),ge=e=>ae(e)||le(e)&&e.every(ae),De={[ne]:ge,[ye]:ge,[Le]:ge},et=Ve({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Ce,default:"top"}}),tt={[ne]:e=>ae(e)},lt=(e,t,d)=>{const a=Z(),o=Z(!1),m=f(()=>t.value instanceof Function),r=f(()=>m.value&&t.value(e.modelValue)||e.modelValue),h=xe(()=>{d.value&&(o.value=!0)},50),V=xe(()=>{d.value&&(o.value=!1)},50);return{tooltip:a,tooltipVisible:o,formatValue:r,displayTooltip:h,hideTooltip:V}},at=(e,t,d)=>{const{disabled:a,min:o,max:m,step:r,showTooltip:h,persistent:V,precision:u,sliderSize:v,formatTooltip:c,emitChange:y,resetSize:p,updateDragging:F}=Ie(ze),{tooltip:L,tooltipVisible:z,formatValue:x,displayTooltip:M,hideTooltip:K}=lt(e,c,h),k=Z(),S=f(()=>`${(e.modelValue-o.value)/(m.value-o.value)*100}%`),P=f(()=>e.vertical?{bottom:S.value}:{left:S.value}),J=()=>{t.hovering=!0,M()},se=()=>{t.hovering=!1,t.dragging||K()},W=i=>{a.value||(i.preventDefault(),U(i),window.addEventListener("mousemove",C),window.addEventListener("touchmove",C),window.addEventListener("mouseup",_),window.addEventListener("touchend",_),window.addEventListener("contextmenu",_),k.value.focus())},X=i=>{a.value||(t.newPosition=Number.parseFloat(S.value)+i/(m.value-o.value)*100,T(t.newPosition),y())},s=()=>{X(-r.value)},g=()=>{X(r.value)},E=()=>{X(-r.value*4)},$=()=>{X(r.value*4)},j=()=>{a.value||(T(0),y())},H=()=>{a.value||(T(100),y())},q=i=>{const b=Re(i);let w=!0;switch(b){case Y.left:case Y.down:s();break;case Y.right:case Y.up:g();break;case Y.home:j();break;case Y.end:H();break;case Y.pageDown:E();break;case Y.pageUp:$();break;default:w=!1;break}w&&i.preventDefault()},N=i=>{let b,w;return i.type.startsWith("touch")?(w=i.touches[0].clientY,b=i.touches[0].clientX):(w=i.clientY,b=i.clientX),{clientX:b,clientY:w}},U=i=>{t.dragging=!0,t.isClick=!0;const{clientX:b,clientY:w}=N(i);e.vertical?t.startY=w:t.startX=b,t.startPosition=Number.parseFloat(S.value),t.newPosition=t.startPosition},C=i=>{if(t.dragging){t.isClick=!1,M(),p();let b;const{clientX:w,clientY:D}=N(i);e.vertical?(t.currentY=D,b=(t.startY-t.currentY)/v.value*100):(t.currentX=w,b=(t.currentX-t.startX)/v.value*100),t.newPosition=t.startPosition+b,T(t.newPosition)}},_=()=>{t.dragging&&(setTimeout(()=>{t.dragging=!1,t.hovering||K(),t.isClick||T(t.newPosition),y()},0),window.removeEventListener("mousemove",C),window.removeEventListener("touchmove",C),window.removeEventListener("mouseup",_),window.removeEventListener("touchend",_),window.removeEventListener("contextmenu",_))},T=async i=>{if(i===null||Number.isNaN(+i))return;i=Ze(i,0,100);const b=Math.floor((m.value-o.value)/r.value),w=b*r.value/(m.value-o.value)*100,D=w+(100-w)/2;let n;if(i<w){const re=w/b,O=Math.round(i/re);n=o.value+O*r.value}else i<D?n=o.value+b*r.value:n=m.value;n=Number.parseFloat(n.toFixed(u.value)),n!==e.modelValue&&d(ne,n),!t.dragging&&e.modelValue!==t.oldValue&&(t.oldValue=e.modelValue),await me(),t.dragging&&M(),L.value.updatePopper()};return de(()=>t.dragging,i=>{F(i)}),ce(k,"touchstart",W,{passive:!1}),{disabled:a,button:k,tooltip:L,tooltipVisible:z,showTooltip:h,persistent:V,wrapperStyle:P,formatValue:x,handleMouseEnter:J,handleMouseLeave:se,onButtonDown:W,onKeyDown:q,setPosition:T}},nt=oe({name:"ElSliderButton"}),ot=oe({...nt,props:et,emits:tt,setup(e,{expose:t,emit:d}){const a=e,o=we("slider"),m=Pe({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:a.modelValue}),r=f(()=>v.value?c.value:!1),{disabled:h,button:V,tooltip:u,showTooltip:v,persistent:c,tooltipVisible:y,wrapperStyle:p,formatValue:F,handleMouseEnter:L,handleMouseLeave:z,onButtonDown:x,onKeyDown:M,setPosition:K}=at(a,m,d),{hovering:k,dragging:S}=be(m);return t({onButtonDown:x,onKeyDown:M,setPosition:K,hovering:k,dragging:S}),(P,J)=>(B(),I("div",{ref_key:"button",ref:V,class:R([l(o).e("button-wrapper"),{hover:l(k),dragging:l(S)}]),style:G(l(p)),tabindex:l(h)?void 0:0,onMouseenter:l(L),onMouseleave:l(z),onMousedown:l(x),onFocus:l(L),onBlur:l(z),onKeydown:l(M)},[Ne(l(Ke),{ref_key:"tooltip",ref:u,visible:l(y),placement:P.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":P.tooltipClass,disabled:!l(v),persistent:l(r)},{content:Ee(()=>[Q("span",null,pe(l(F)),1)]),default:Ee(()=>[Q("div",{class:R([l(o).e("button"),{hover:l(k),dragging:l(S)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var Me=Te(ot,[["__file","button.vue"]]);const st=Ve({mark:{type:te([String,Object]),default:void 0}});var rt=oe({name:"ElSliderMarker",props:st,setup(e){const t=we("slider"),d=f(()=>Be(e.mark)?e.mark:e.mark.label),a=f(()=>Be(e.mark)?void 0:e.mark.style);return()=>Xe("div",{class:t.e("marks-text"),style:a.value},d.value)}});const ut=(e,t,d)=>{const{formItem:a}=Ye(),o=Fe(),m=Z(),r=Z(),h={firstButton:m,secondButton:r},V=We(),u=f(()=>Math.min(t.firstValue,t.secondValue)),v=f(()=>Math.max(t.firstValue,t.secondValue)),c=f(()=>e.range?`${100*(v.value-u.value)/(e.max-e.min)}%`:`${100*(t.firstValue-e.min)/(e.max-e.min)}%`),y=f(()=>e.range?`${100*(u.value-e.min)/(e.max-e.min)}%`:"0%"),p=f(()=>e.vertical?{height:e.height}:{}),F=f(()=>e.vertical?{height:c.value,bottom:y.value}:{width:c.value,left:y.value}),L=()=>{if(o.value){const s=o.value.getBoundingClientRect();t.sliderSize=s[e.vertical?"height":"width"]}},z=s=>{const g=e.min+s*(e.max-e.min)/100;if(!e.range)return m;let E;return Math.abs(u.value-g)<Math.abs(v.value-g)?E=t.firstValue<t.secondValue?"firstButton":"secondButton":E=t.firstValue>t.secondValue?"firstButton":"secondButton",h[E]},x=s=>{const g=z(s);return g.value.setPosition(s),g},M=s=>{t.firstValue=s??e.min,k(e.range?[u.value,v.value]:s??e.min)},K=s=>{t.secondValue=s,e.range&&k([u.value,v.value])},k=s=>{d(ne,s),d(ye,s)},S=async()=>{await me(),d(Le,e.range?[u.value,v.value]:e.modelValue)},P=s=>{var g,E,$,j,H,q;if(V.value||t.dragging)return;L();let N=0;if(e.vertical){const U=($=(E=(g=s.touches)==null?void 0:g.item(0))==null?void 0:E.clientY)!=null?$:s.clientY;N=(o.value.getBoundingClientRect().bottom-U)/t.sliderSize*100}else{const U=(q=(H=(j=s.touches)==null?void 0:j.item(0))==null?void 0:H.clientX)!=null?q:s.clientX,C=o.value.getBoundingClientRect().left;N=(U-C)/t.sliderSize*100}if(!(N<0||N>100))return x(N)};return{elFormItem:a,slider:o,firstButton:m,secondButton:r,sliderDisabled:V,minValue:u,maxValue:v,runwayStyle:p,barStyle:F,resetSize:L,setPosition:x,emitChange:S,onSliderWrapperPrevent:s=>{var g,E;((g=h.firstButton.value)!=null&&g.dragging||(E=h.secondButton.value)!=null&&E.dragging)&&s.preventDefault()},onSliderClick:s=>{P(s)&&S()},onSliderDown:async s=>{const g=P(s);g&&(await me(),g.value.onButtonDown(s))},onSliderMarkerDown:s=>{if(V.value||t.dragging)return;x(s)&&S()},setFirstValue:M,setSecondValue:K}},it=(e,t,d,a)=>({stops:f(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return he("ElSlider","step should not be 0."),[];const r=Math.ceil((e.max-e.min)/e.step),h=100*e.step/(e.max-e.min),V=Array.from({length:r-1}).map((u,v)=>(v+1)*h);return e.range?V.filter(u=>u<100*(d.value-e.min)/(e.max-e.min)||u>100*(a.value-e.min)/(e.max-e.min)):V.filter(u=>u>100*(t.firstValue-e.min)/(e.max-e.min))}),getStopStyle:r=>e.vertical?{bottom:`${r}%`}:{left:`${r}%`}}),dt=e=>f(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((d,a)=>d-a).filter(d=>d<=e.max&&d>=e.min).map(d=>({point:d,position:(d-e.min)*100/(e.max-e.min),mark:e.marks[d]})):[]),ct=(e,t,d,a,o,m)=>{const r=u=>{o(ne,u),o(ye,u)},h=()=>e.range?![d.value,a.value].every((u,v)=>u===t.oldValue[v]):e.modelValue!==t.oldValue,V=()=>{var u,v;e.min>e.max&&$e("Slider","min should not be greater than max.");const c=e.modelValue;e.range&&le(c)?c[1]<e.min?r([e.min,e.min]):c[0]>e.max?r([e.max,e.max]):c[0]<e.min?r([e.min,c[1]]):c[1]>e.max?r([c[0],e.max]):(t.firstValue=c[0],t.secondValue=c[1],h()&&(e.validateEvent&&((u=m==null?void 0:m.validate)==null||u.call(m,"change").catch(y=>he(y))),t.oldValue=c.slice())):!e.range&&ae(c)&&!Number.isNaN(c)&&(c<e.min?r(e.min):c>e.max?r(e.max):(t.firstValue=c,h()&&(e.validateEvent&&((v=m==null?void 0:m.validate)==null||v.call(m,"change").catch(y=>he(y))),t.oldValue=c)))};V(),de(()=>t.dragging,u=>{u||V()}),de(()=>e.modelValue,(u,v)=>{t.dragging||le(u)&&le(v)&&u.every((c,y)=>c===v[y])&&t.firstValue===u[0]&&t.secondValue===u[1]||V()},{deep:!0}),de(()=>[e.min,e.max],()=>{V()})},mt=(e,t,d)=>{const a=Z();return Ue(async()=>{e.range?(le(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue]):(!ae(e.modelValue)||Number.isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue),ce(window,"resize",d),await me(),d()}),{sliderWrapper:a}},vt=oe({name:"ElSlider"}),ft=oe({...vt,props:Je,emits:De,setup(e,{expose:t,emit:d}){const a=e,o=we("slider"),{t:m}=Oe(),r=Pe({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:h,slider:V,firstButton:u,secondButton:v,sliderDisabled:c,minValue:y,maxValue:p,runwayStyle:F,barStyle:L,resetSize:z,emitChange:x,onSliderWrapperPrevent:M,onSliderClick:K,onSliderDown:k,onSliderMarkerDown:S,setFirstValue:P,setSecondValue:J}=ut(a,r,d),{stops:se,getStopStyle:W}=it(a,r,y,p),{inputId:X,isLabeledByFormItem:s}=Ae(a,{formItemContext:h}),g=je(),E=f(()=>a.inputSize||g.value),$=f(()=>a.ariaLabel||m("el.slider.defaultLabel",{min:a.min,max:a.max})),j=f(()=>a.range?a.rangeStartLabel||m("el.slider.defaultRangeStartLabel"):$.value),H=f(()=>a.formatValueText?a.formatValueText(i.value):`${i.value}`),q=f(()=>a.rangeEndLabel||m("el.slider.defaultRangeEndLabel")),N=f(()=>a.formatValueText?a.formatValueText(b.value):`${b.value}`),U=f(()=>[o.b(),o.m(g.value),o.is("vertical",a.vertical),{[o.m("with-input")]:a.showInput}]),C=dt(a);ct(a,r,y,p,d,h);const _=f(()=>{const n=[a.min,a.max,a.step].map(re=>{const O=`${re}`.split(".")[1];return O?O.length:0});return Math.max.apply(null,n)}),{sliderWrapper:T}=mt(a,r,z),{firstValue:i,secondValue:b,sliderSize:w}=be(r),D=n=>{r.dragging=n};return ce(T,"touchstart",M,{passive:!1}),ce(T,"touchmove",M,{passive:!1}),He(ze,{...be(a),sliderSize:w,disabled:c,precision:_,emitChange:x,resetSize:z,updateDragging:D}),t({onSliderClick:K}),(n,re)=>{var O,Se;return B(),I("div",{id:n.range?l(X):void 0,ref_key:"sliderWrapper",ref:T,class:R(l(U)),role:n.range?"group":void 0,"aria-label":n.range&&!l(s)?l($):void 0,"aria-labelledby":n.range&&l(s)?(O=l(h))==null?void 0:O.labelId:void 0},[Q("div",{ref_key:"slider",ref:V,class:R([l(o).e("runway"),{"show-input":n.showInput&&!n.range},l(o).is("disabled",l(c))]),style:G(l(F)),onMousedown:l(k),onTouchstartPassive:l(k)},[Q("div",{class:R(l(o).e("bar")),style:G(l(L))},null,6),Ne(Me,{id:n.range?void 0:l(X),ref_key:"firstButton",ref:u,"model-value":l(i),vertical:n.vertical,"tooltip-class":n.tooltipClass,placement:n.placement,role:"slider","aria-label":n.range||!l(s)?l(j):void 0,"aria-labelledby":!n.range&&l(s)?(Se=l(h))==null?void 0:Se.labelId:void 0,"aria-valuemin":n.min,"aria-valuemax":n.range?l(b):n.max,"aria-valuenow":l(i),"aria-valuetext":l(H),"aria-orientation":n.vertical?"vertical":"horizontal","aria-disabled":l(c),"onUpdate:modelValue":l(P)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),n.range?(B(),ve(Me,{key:0,ref_key:"secondButton",ref:v,"model-value":l(b),vertical:n.vertical,"tooltip-class":n.tooltipClass,placement:n.placement,role:"slider","aria-label":l(q),"aria-valuemin":l(i),"aria-valuemax":n.max,"aria-valuenow":l(b),"aria-valuetext":l(N),"aria-orientation":n.vertical?"vertical":"horizontal","aria-disabled":l(c),"onUpdate:modelValue":l(J)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):ue("v-if",!0),n.showStops?(B(),I("div",{key:1},[(B(!0),I(ie,null,fe(l(se),(A,ee)=>(B(),I("div",{key:ee,class:R(l(o).e("stop")),style:G(l(W)(A))},null,6))),128))])):ue("v-if",!0),l(C).length>0?(B(),I(ie,{key:2},[Q("div",null,[(B(!0),I(ie,null,fe(l(C),(A,ee)=>(B(),I("div",{key:ee,style:G(l(W)(A.position)),class:R([l(o).e("stop"),l(o).e("marks-stop")])},null,6))),128))]),Q("div",{class:R(l(o).e("marks"))},[(B(!0),I(ie,null,fe(l(C),(A,ee)=>(B(),ve(l(rt),{key:ee,mark:A.mark,style:G(l(W)(A.position)),onMousedown:qe(bt=>l(S)(A.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):ue("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),n.showInput&&!n.range?(B(),ve(l(Qe),{key:0,ref:"input","model-value":l(i),class:R(l(o).e("input")),step:n.step,disabled:l(c),controls:n.showInputControls,min:n.min,max:n.max,precision:l(_),size:l(E),"onUpdate:modelValue":l(P),onChange:l(x)},null,8,["model-value","class","step","disabled","controls","min","max","precision","size","onUpdate:modelValue","onChange"])):ue("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var gt=Te(ft,[["__file","slider.vue"]]);const St=Ge(gt);export{St as E};
