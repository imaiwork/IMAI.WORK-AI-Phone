import{_ as D}from"./index.vue.fdfa7631.js";import{d as P,z,aH as A,r as p,A as M,cy as N,k as a,l as n,m as o,q as i,Z as l,cZ as j,s as d,J as q,K as G,t as U,v,L as H,bM as K,Y as Z,G as h,ds as J,ay as W,av as Y,_ as O}from"./entry.45b56a4a.js";import{E as Q}from"./index.515d6243.js";/* empty css                     */import{u as X}from"./useCopy.b0d85a8a.js";const ee={class:"absolute w-[350px] h-full bg-app-bg-3 rounded-tr-[20px] rounded-br-[20px] shadow-[0_0_0_1px_#333333] left-full flex flex-col py-[16px] z-20"},te={class:"grow min-h-0 mt-[50px]"},oe={class:"px-[16px] content-box"},se={class:"text-[#ffffff4d]"},re={class:"mt-4"},le={class:"mt-4 flex justify-end"},ae={key:0,class:"chat-loader mt-2 text-white"},ne={class:"flex-shrink-0 px-[16px] mt-4"},ie={class:"relative rounded-md shadow-[0_0_0_1px_var(--app-border-color-2)] bg-app-bg-3"},ce={class:"flex justify-end"},pe={xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 30 30",fill:"currentColor"},de=["opacity"],ue=P({__name:"prompt-dialog",emits:["use","close"],setup(_e,{expose:w,emit:C}){const u=C,E=z(),{userTokens:F}=A(E),s=p(""),_=p([]),x=p(),c=p(!1),g=async t=>{if(F.value<=0){h.msgPowerInsufficient();return}if(!c.value){if(!t&&!s.value){h.msgWarning("请输入创意描述");return}try{c.value=!0;const{reply:e}=await J({message:t||s.value,prompt_id:x.value});s.value="",_.value.push(e),setTimeout(()=>{y()},500)}catch(e){h.msgError(e||"生成提示词失败")}finally{c.value=!1,setTimeout(()=>{y()},500)}}},V=t=>{x.value=t.promptId,L(t.prompt)},k=M(),y=()=>{var t;(t=k.value)==null||t.scrollTo(document.querySelector(".content-box").clientHeight)},{copy:B}=X(),R=t=>{_.value.splice(t,1)},I=t=>{u("use",t),u("close")},{lockFn:L,isLock:me}=N(g);return w({startGenerate:V}),(t,e)=>{const S=D,m=W,T=Q,$=Y;return a(),n("div",ee,[o("div",{class:"absolute w-6 h-6 top-4 right-4 cursor-pointer",onClick:e[0]||(e[0]=r=>u("close"))},[i(S,{theme:l(j).DARK},null,8,["theme"])]),o("div",te,[i(T,{ref_key:"scrollRef",ref:k},{default:d(()=>[o("div",oe,[(a(!0),n(q,null,G(l(_),(r,f)=>(a(),n("div",{key:f,class:"mt-4"},[(a(),n("div",{class:"rounded-md border border-app-border-2 bg-app-bg-3 mt-[11px] relative p-3",key:f},[o("div",se,U(r),1),o("div",re,[i(m,{class:"shadow-[0_0_0_1px_var(--app-border-color-2)] !h-[26px]",color:"#1F1F1F",onClick:b=>R(f)},{default:d(()=>[...e[3]||(e[3]=[v("删除",-1)])]),_:1},8,["onClick"]),i(m,{class:"shadow-[0_0_0_1px_var(--app-border-color-2)] !h-[26px]",color:"#1F1F1F",onClick:b=>l(B)(r)},{default:d(()=>[...e[4]||(e[4]=[v("复制",-1)])]),_:1},8,["onClick"])])])),o("div",le,[i(m,{type:"primary",class:"!h-[26px]",onClick:b=>I(r)},{default:d(()=>[...e[5]||(e[5]=[v("使用提示词",-1)])]),_:1},8,["onClick"])])]))),128)),l(c)?(a(),n("div",ae)):H("",!0)])]),_:1},512)]),o("div",ne,[o("div",ie,[i($,{modelValue:l(s),"onUpdate:modelValue":e[1]||(e[1]=r=>K(s)?s.value=r:null),placeholder:"请输入创意描述",type:"textarea",resize:"none",rows:4},null,8,["modelValue"]),o("div",ce,[o("div",{class:Z(["cursor-pointer m-2",l(s)?"text-primary-light-9":"text-[#f4f4f4]"]),onClick:e[2]||(e[2]=r=>g())},[(a(),n("svg",pe,[e[6]||(e[6]=o("rect",{opacity:"0.05",width:"30",height:"30",rx:"15",fill:"currentColor"},null,-1)),o("path",{opacity:l(s)?"1":"0.3",d:"M10 14L15 9M15 9L20 14M15 9V21",stroke:"white","stroke-width":"1.4","stroke-linecap":"square","stroke-linejoin":"round"},null,8,de)]))],2)])])])])}}});const ke=O(ue,[["__scopeId","data-v-a4223d44"]]);export{ke as default};
